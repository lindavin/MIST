{"version":3,"sources":["workspace/trash.png","TutorialImages/CircleImages/circle3.png","TutorialImages/CircleImages/circle.png","TutorialImages/CircleImages/circle1.png","TutorialImages/CircleImages/circle2.png","pages/components/Contexts/UserContext.js","pages/components/NavBar/navBarLoggedOut.js","pages/components/NavBar/navBarLoggedIn.js","pages/about.js","pages/components/MISTImageGallery.js","pages/challenges.js","pages/community.js","pages/contact.js","pages/development.js","expert/macros.js","expert/components/CanvasCard.js","expert/components/Menu.js","expert/components/Popup.js","expert/components/prism-mist.js","expert/components/WorkspaceCard.js","expert/expertGlobals.js","expert/components/SidePanelCard.js","expert/initial-state.js","expert/index.js","pages/faq.js","pages/components/displayImages.js","pages/Gallery.js","pages/components/LinkButton.jsx","pages/home.js","pages/license.js","pages/privacy.js","pages/report.js","pages/settings.js","pages/signIn.js","pages/signUp.js","workspace/globals.js","workspace/mistgui-globals.js","workspace/Portal.js","workspace/globals-popup_canvas-dimensions.js","workspace/mistui.js","workspace/MISTImage.js","workspace/PopupCanvas.js","workspace/globals-funbar-dimensions.js","workspace/globals-fonts.js","workspace/FunBar.js","workspace/globals-nodes-dimensions.js","workspace/FunNode.js","workspace/globals-themes.js","workspace/line.js","workspace/MakeMenuButton.js","workspace/globals-menu-dimensions.js","workspace/Menu.js","workspace/MakeValue.js","workspace/MakeFunction.js","workspace/ValNode.js","workspace/index.js","pages/tutorial.js","pages/user.js","pages/profile.js","pages/components/footer.js","App.js","index.js","design/icons/icons8-facebook-30.png","design/icons/icons8-google-48.png","design/Logos/logoFinal.png","workspace/mist.js"],"names":["module","exports","UserContext","createContext","UserContextProvider","props","useState","data","setData","useEffect","fetch","method","headers","credentials","then","res","json","user","Provider","value","children","Logo","to","style","width","src","MistLogo","alt","maxWidth","Search","Form","inline","FormControl","type","placeholder","className","Button","variant","NavBarCenter","mode","setMode","Nav","DefaultCenter","SignInUpButton","onClick","SignInCenter","SignUpButton","CancelButton","NavDropdown","title","id","Item","href","Link","loginUsername","setLoginUsername","loginPassword","setLoginPassword","Image","GoogleIcon","FacebookIcon","eventKey","disabled","Label","htmlFor","srOnly","Control","onChange","e","target","InputGroup","class","for","preventDefault","username","password","body","JSON","stringify","action","message","console","log","window","location","Header","Navbar","expand","Toggle","aria-controls","Collapse","NavBar","Divider","SignOutButton","signout","UserHeader","setUser","AboutHeader","AboutContent","Container","About","fluid","marginTop","marginBottom","paddingBottom","MISTImage","React","createRef","canvas","animator","setAnimator","new_animator","MIST","ui","Animator","code","current","setResolution","resolution","frame","stop","height","onMouseOut","onMouseOver","start","ref","ChallengeCard","Card","padding","Title","margin","challenge","Body","Row","justifyContent","Filters","Group","as","Col","controlId","name","defaultValue","level","handleChange","color","animation","PageCounter","Pagination","First","Prev","active","Ellipsis","Next","Last","Challenges","challenges","setChallenges","setLevel","setColor","setAnimation","req","event","map","Community","Contact","Development","parse","Val","make_template_string","templates","macros","params","_make_template_string","node","has","length","operation","operands","operand","_expand_macros","join","TypeError","Set","replace_all","s","old_s","new_s","indexOf","replace","i","expand_macros","mist_string","_order","forEach","CanvasSlider","min","max","step","tooltip","tooltipStyle","tooltipLabel","parseInt","CanvasCard","state","nextProps","nextState","this","setState","bounds","expand_code","default_params","split","param","idx","getStateFunctions","setMessage","txt","setRenderingCode","error","link","document","createElement","download","getFormState","toDataURL","click","size","ButtonGroup","OverlayTrigger","container","expertRef","key","placement","overlay","Tooltip","startAnimator","bind","stopAnimator","Math","round","getClientRects","downloadImage","Img","Component","FullscreenButton","fullscreen","setFullscreen","listener","addEventListener","removeEventListener","exitFullscreen","requestFullscreen","FileDropdown","handleDeleteOnClick","a","getUserExpertWS","success","triggerPopup","footer","vertical","expertWorkspaces","expert_workspace","deleteWorkspace","togglePopup","alert","DropdownButton","Dropdown","isWorkspaceInUse","onConfirm","resetWorkspace","ImportWorkspace","loadWorkspace","workspaceNameRef","handleOnClick","memo","finalimageNameRef","bg","ListGroup","getCurrentWorkspace","saveWorkspace","rendering_code","response","image","catch","err","Popup","Modal","show","isOpen","onHide","onClose","closeButton","Footer","mist","RegExp","highlight","textareaId","textarea","getElementById","selectionStart","prism_highlight","end","Array","from","parens","splice","FunctionButtons","flexDirection","currentForm","description","checkIfFormInUse","clearFunction","fun_name","doesFunctionExist","addUserDefinedFunction","HelpText","text","WorkspaceCard","setHighlightSwitch","setKey","updateHighlight","hs","macros_list","functions","filter","macro","undefined","params_list","Tabs","activeKey","onSelect","k","Tab","form","loadFunction","setName","rows","setParams","setDefaultParams","setDescription","onKeyUp","onValueChange","setCode","codeRef","tabSize","readOnly","MIST_builtin_functions","MIST_builtin_values","SidePanelCard","wrap_in_row","component","obj","createKeyFromObj","wrap_button_in_overlay","createOverlayFromObj","createButtons","objects","specifiedKeys","button_name","insert_text","wrap_button","button","keys","Object","sort","block","insertText","selection","focus","createRange","startPos","endPos","selectionEnd","scrollTop","substring","onDragEnd","result","destination","source","draggableId","droppableId","new_index","index","old_index","old_order","getFunctions","new_order","setFunctionsOrder","provided","innerRef","droppableProps","object","draggableProps","dragHandleProps","make_draggable","_warningMessage","cursor","deleteFunction","xs","loadSavedFunction","wrap_custom_icons","about","backgroundColor","display","initialForm","initialMacros","initialPopup","getInitialForm","getInitialMacros","Expert","popup","setPopup","setForm","loadFunctionToForm","functionToLoad","fun","isArray","toString","getFormValue","str","setFormValue","setMacros","_save","workspace","inUse","field","isFormInUse","workspaceToLoad","hasWorkspace","bkcolor","displayDirection","panelsSize","sizeUnitMeasure","resizerSize","new_macros","order","funct","new_function","new_function_name","assign","addFunctionToState","Faq","DisplayImages","ModalSwitch","cards","useLocation","background","path","Gallery","ImageView","ImageModal","card","CardHeader","CardImage","CardBody","alignItems","isAnimated","MoreIcon","pathname","_id","userId","caption","ratings","CodeIcon","SaveIcon","CommentIcon","ShareIcon","MakeComment","imageId","useParams","find","elem","fontSize","textAlign","custom","ModalComments","history","useHistory","modalShow","MyVerticallyCenteredModal","goBack","aria-labelledby","centered","SideView","minHeight","paddingLeft","comments","setComments","overflowY","comment","Comment","date","createdAt","ModalIcons","setComment","onSubmit","fullcomment","flexFlow","alignSelf","timeAgo","TimeAgo","format","convertTime","flexGrow","setShow","setTarget","useRef","paddingRight","Overlay","containerPadding","Popover","Content","paddingTop","hidePopover","reportPopover","Menu","trigger","setCards","cardsLoaded","setCardsLoaded","category","slice","addLocale","en","withRouter","match","staticContext","rest","push","PageContent","Intro","ButtonContainer","BottomText","FeaturedImages","getFeaturedImages","featuredImages","border","borderWidth","borderRadius","marginLeft","marginRight","featuredImage","home","License","Privacy","ReportForm","required","Check","label","SettingsTable","newEmail","setNewEmail","newUsername","setNewUsername","currentPassword","setCurrentPassword","newPassword","setNewPassword","changePassword","popover","Text","usernamePopover","Accordion","defaultActiveKey","defaultChecked","Settings","SignIn","SignUp","setUsername","setPassword","firstname","setFirstname","lastname","setLastname","email","setEmail","passwordInfo","setPasswordInfo","v","alue","documentElement","clientWidth","clientHeight","menuHeight","funBarHeight","functionWidth","valueWidth","functionStrokeWidth","functionHalfStrokeWidth","functionTotalSideLength","functionRectSideLength","valueSideLength","menuFontSize","nodeFontSize","globalScale","add","rep","prefix","multiply","square","negate","sine","cosine","absolute","average","sign","wrapsum","rgb","mistif","values","x","y","second","minute","hour","day","constant","mouseX","mouseY","imageBoxSideLength","functionImageBoxOffset","valueImageBoxOffset","renderSideLength","editableTextWidth","editableTextHeight","editableTextFont","constiableRadius","constiableWidth","cos","PI","menuCornerWidth","buttonWidth","valSpaceWidth","functSpaceWidth","menuControlHeight","toolboxWidth","funBarOffset","popRectWidth","popRectHeight","popSaveGroupX","popSaveGroupY","popCanvasSide","popCanvasShiftY","popTextShiftX","popTextFontSize","popTextHeight","popButtonWidth","popOpenWsRectWidth","popOpenWsRectHeight","globalFont","functionFont","functionColor","functionColorLight","functionMultColor","functionSingleColor","functionRGBcolor","valueMenuColor","valueMenuColorLight","valueXYColor","valueTimeColor","valueMouseColor","valueConstantColor","funNames","valNames","imageBoxColor","constiableColor","r","g","b","constiableStrokeColor","constiableTextColor","outletXOffset","outletYOffset","outletColor","outletColor2","lineStrokeWidth","dragShadowColor","selectedShadowColor","numVals","valMenuXSpacing","numFuncts","functMenuXSpacing","menuYspacing","menuFunctsXStart","menuFunctsXEnd","menuValuesXStart","menuAnimDuration","arrowWidth","arrowBoxFill","arrowFill","triX","triY","menuOffset","menuControlColor","menuControlSelect","menuControlTextColor","menuTextOffset","toolboxHeight","toolboxShift","toolboxButtonSize","deleteColor","funBarWidth","funBarBackgroundColor","funBarTextAreaWidth","funBarTextAreaHeight","funBarTextOffset","funBarDisplayFontSize","funBarFontSize","funBarIconOffset","funBarIconSideLength","funBarIconTextWidth","funBarIconTextY","popRectColor","popCanvasResolution","popCanvasShiftX","popTextShiftY","popTextWidth","nameTextShift","popButtonHeight","popButtonShiftX","popButtonColor","popButtonSelectedColor","errorColor","popOpenWsGroupX","popOpenWsGroupY","popOpenWsButtonShiftX","popOpenWsButtonWidth","popOpenWsButtonHeight","RGBoutletColors","lineToolOn","workToolOn","deleteToolOn","valueExpanded","functionExpanded","tagsOn","dragShape","scaledObj","makingLine","OUTLET_OFFSET","bezPoint","repToFun","sum","mult","sqr","neg","sin","abs","avg","wsum","if","repToVal","Portal","renderPortal","ReactDOM","unmountComponentAtNode","defaultNode","removeChild","appendChild","cloneElement","render","canvasX","canvasY","canvasWidth","canvasHeight","canvasMargin","imageWidth","buttonMargin","buttonOffset","textfieldX","textfieldY","textfieldWidth","textfieldHeight","imageX","imageY","imageHeight","buttonX","buttonY","buttonHeight","rfTextX","rfTextY","rfTextWidth","rfTextHeight","fps","on","increments","val","time","t","m","stopAnimation","startAnimation","exp","context","tmp","paramInfo","p","newval","setTimeout","builtinsPattern","requestAnimationFrame","_animatorCount_","h","d","simTime","sanitize","expParsed","prototype","left","top","renderWidth","renderHeight","coords","getContext","font","textBaseline","fillText","parameters","jpg","jpgBody","img","run","setFps","onmousemove","evt","rect","getBoundingClientRect","clientX","clientY","scaledX","scaledY","MISTui","addHelp","helptext","hideHelp","help","visibility","showHelp","setAttribute","innerHTML","addMenu","parent","menuid","menuname","element","menu","items","formatMenu","addMenuItem","handler","wrapHandler","li","parentNode","item","onclick","addMenuSeparator","clearMenu","refreshMenu","removeMenuItem","itemid","renderFunction","automated","position","Background","fill","opacity","popupDimensions","cornerRadius","PortalTextBox","gui","fontFamily","setImageName","PortalImage","PortalFunction","overflow","PortalButtons","u","closePortal","stroke","strokeWidth","align","verticalAlign","SaveButton","ExpertButton","removeOuterWhiteSpace","imageName","SaveImage","string","PopupCanvas","funbarY","rfTextAreaHeight","functionButtonX","functionButtonWidth","functionButtonHeight","imageButtonX","imageButtonWidth","imageButtonHeight","BarBase","funbarDimensions","functionBoxBg","functionTextColor","fontGlobals","FunctionButton","functionButtonHovered","setFunctionButtonHovered","native","isRenderable","Rect","ImageButton","imageButtonClicked","setImageButtonClicked","imageButtonHovered","setImageButtonHovered","FunBar","valueOffset","outletStartY","functionTrashX","functionTrashY","valueTrashX","valueTrashY","FunNode","numOutlets","showImage","setShowImage","hovered","setHovered","trashHovered","setTrashHovered","useImage","require","groupRef","Trashcan","nodeDimensions","shadowColor","shadowBlur","visible","onMouseEnter","onMouseLeave","removeNode","draggable","dragBoundFunc","pos","innerWidth","globals","innerHeight","onDragStart","setAttrs","duration","shadowOffset","scaleX","scaleY","easing","Konva","Easings","ElasticEaseOut","updateNodePosition","currentTarget","onDragMove","updateLinePosition","attrs","outletClicked","funClicked","onDblClick","dblClickHandler","hoverShadowColor","_useStrictMode","offsetX","offsetY","shadowOffsetX","shadowOffsetY","expanded","sceneFunc","beginPath","moveTo","bezierCurveTo","closePath","fillStrokeShape","fillRadialGradientStartPoint","fillRadialGradientStartRadius","fillRadialGradientEndPoint","fillRadialGradientEndRadius","fillRadialGradientColorStops","menuBackground","classic","dusk","dark","workspaceBackground","lineFill","nodeHoverShadow","valueMenuColor1","valueMenuColor2","valueMenuColor3","menuFunTab","menuValTab","menuCustomTab","menuSavedTab","workspaceButton","funBarBackground","DrawArrow","sourceX","sinkX","sourceY","sinkY","removeLine","points","pointerLength","pointerWidth","shadowEnabled","MakeMenuButton","setHover","handleClick","buttonColor","customTabOffsetX","formY","formHeight","formWidth","customTabPoints","topLeft","topRight","point","bottomRight","bottomLeft","valueTabOffsetX","valueListStartX","valueListLength","valueTabPoints","functionTabOffsetX","functionListStartX","functionListLength","savedTabOffsetX","formX","valueMargin","functionTabPoints","functionMargin","savedTabPoints","isValueMenuOpen","setIsValueMenuOpen","isFunctionMenuOpen","setIsFunctionMenuOpen","isCustomMenuOpen","setIsCustomMenuOpen","isSavedMenuOpen","setIsSavedMenuOpen","random","formValue","wsNameRef","wsFormRef","isContentModalOpen","setIsContentModalOpen","contentModalInfo","setContentModalInfo","contentModalCallback","setContentModalCallack","isConfirmationModalOpen","setIsConfirmationModalOpen","confirmationModalInfo","setConfirmationModalInfo","confirmationCallback","setConfirmationCallback","changeKey","toggleContentModal","prev","toggleConfirmationModal","global","bgColor","tabPoints","menuDimensions","tabOffsetX","lineTo","valTabColor","funTabColor","customTabColor","savedTabColor","shadowOpacity","rotation","atan","stopPropagation","nativeEvent","stopImmediatePropagation","createLayout","addNode","valName","vis","_lastPos","valGroup","funName","funcGroup","func","clearWorkspace","getWorkspaces","workspaces","workspacesObj","wsName","checkIfWorkspaceExists","wsButtonColor","ValNode","setRenderFunction","clickHandler","lineJoin","parseFloat","updateHashValue","WorkspaceComponent","expression","newNodes","nodes","newLines","lines","redoIndices","sink","parentX","parentY","outermost","lineOut","numInputs","activeOutlets","parentNodes","evalFrom","sinkIndex","Error","sourceIndex","lineIndex","pX","pY","sourceNode","headPosition","tailPosition","outletIndex","redoFromIndices","pushNode","rf","pushLine","includes","newLst","nodeIndex","line","newRedoIndices","j","pop","temp","renderFunctionRedo","lineCount","findRenderFunction","_saveWorkspace","ok","status","exists","updateMousePosition","mousePosition","currentNode","valClicked","newSource","bgClicked","tempLine","mouseListenerOn","dblClicked","layout1","Layout","themes","layouts","themeIndex","theme","pos1","pos2","prevProps","prevState","colors","deleteWorkspaces","onMouseMove","addLine","TableContents","sections","section","subsections","subsection","offset","Tutorials","Jumbotron","borderColor","sm","keywords","keyword","SubsectionButton","Video","video","Final","final","isChallenge","SectionMenu","Challenge","question","hint","setModalShow","HelpModal","sticky","SubsectionDropdownItem","Circle","Circle1","Circle2","Circle3","frameborder","allow","allowfullscreen","Tutorial","User","FirstPart","blocked","setBlocked","blockPopover","column","plaintext","IconsBar","icons","iconName","num","iconBlock","ProfileNav","Profile","forename","surname","profilepic","userImages","setUserImages","userAlbums","setUserAlbums","userInfo","bio","images","albums","updateContent","openImagesView","openAlbumsView","Albums","openedAlbum","AlbumsView","setImages","openAlbum","album","ControlledCarousel","OpenedAlbum","Album","setIndex","Carousel","activeIndex","selectedIndex","Caption","App","useContext","Home","exact","UserProfile","contains","array","getArgs","args","arglen","ncopies","n","ch","nspaces","create","TYPE","RGB","HSV","NUMBER","expType","depth","deepest","hasLoop","seen","isExp","isFun","Fun","rebuild","sameExp","checkedLoops","arguments","prettyPrint","indent","suffix","arity","newindent","toFunction","eval","ImageGrey","Collection","clear","get","addUserFun","numParams","FunInfo","minarity","maxArity","addUserVal","ValInfo","addBuiltinFun","maxarity","other","alpha","digit","tokens","freeze","UNKNOWN","OPEN","CLOSE","COMMA","ID","NUM","EOF","Token","row","col","Input","len","eof","peek","next","c","skipWhitespace","ws","test","parseError","tokenize","input","dot","peekType","gifTime","Date","ms","getMilliseconds","getSeconds","getMinutes","getHours","BUILTIN","builtins","apply","wrap","createSanitizer","resultingRE","evaluated","RE","kernel","tok","shift","expToRGB","env","envCode","COMPONENT_EPSILON","PERCENT_MATCH","compareFun","code1","code2","timed","mouse","compareFunCore","times","count","compareFunOnce","similar","rand","X","Y","parsed1","parsed2","fun1","fun2","pixels","matches","c1","c2","compareFunMouse","compareFunTime","product","range","signz","operations","edges","addEdge","addOp","addVal","getFun","getVal","displayLayout","layout","things","op","pushFunctionNode","pushVariableNode","edge","rebuildLayout","rebuildlayout","sampleDisplay","displayCount","sampleLayout","setMouse","setClick","clickX","clickY","hoff","voff","basicLayout","counts","imgLeft","imgTop","imgWidth","imgHeight","renderAt","renderGIF","buffer","deltaX","deltaY","canvasContext","bufferContext","region","createImageData","putImageData","drawImage"],"mappings":"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","file":"static/js/main.2239164a.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/trash.c9edfe14.png\";","module.exports = __webpack_public_path__ + \"static/media/circle3.d5030f7c.png\";","module.exports = __webpack_public_path__ + \"static/media/circle.bf5edfc5.png\";","module.exports = __webpack_public_path__ + \"static/media/circle1.3d4768fa.png\";","module.exports = __webpack_public_path__ + \"static/media/circle2.d2802209.png\";","import React, {useState, createContext, useEffect} from 'react';\r\n\r\nexport const UserContext = createContext();\r\n\r\nconst UserContextProvider = (props) => {\r\n    const [data, setData] = useState();\r\n\r\n    useEffect(() => {\r\n        fetch('/api?action=getUser', {\r\n            method: 'GET',\r\n            headers: {\r\n            'Content-Type': 'application/json',\r\n            },\r\n            credentials: 'include'\r\n          }) \r\n          .then(res => res.json())\r\n          .then(user => {setData(user);\r\n          })\r\n    }, []);\r\n\r\n    // Fetch method to get the data\r\n    return <UserContext.Provider value={data}>{props.children}</UserContext.Provider>;\r\n};\r\n\r\nexport default UserContextProvider;","/**\n * MIST is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\n// +-----------------------+----------------------------------------------------------------------\n// | navBarLoggedIn.js     |\n// +-----------------------+\n/** \n * This file, navBarLoggedOut.js, creates the navigation bar for users\n * who are not signed in. The navigation bar is returned by the\n * function Header.\n *\n * Copyright (c) 2020 Samuel A. Rebelsky and the people who did the work.\n * This work is licenced under a LGLP 3.0 or later .....\n */\n\n// +----------------+-----------------------------------------------------------------------\n// | Design Issues  |\n// +----------------+\n/**\n * Header is built up of the following components:\n *    --Logo\n *    --NavbarCenter\n *        | default mode  (default navigation Bar)\n *        | signIn mode   (when the user is trying to sign in navBar)\n *    --Search\n * \n * Additional functions:\n *    -SignInUpButton (used in NavbarCenter in the case of ***default*** mode)\n *    -SignInButton (used in NavbarCenter in the case of ***signIn*** mode)\n *    -SignUpButton (used in NavbarCenter in the case of ***signIn*** mode)\n *    -CancelButton (used in NavbarCenter in the case of ***signIn*** mode)\n */\n\n\n// +---------+----------------------------------------------------------\n// | Imports |\n// +---------+\n\nimport React, { useState } from \"react\";\nimport FacebookIcon from \"../../../design/icons/icons8-facebook-30.png\";\nimport GoogleIcon from \"../../../design/icons/icons8-google-48.png\";\nimport MistLogo from \"../../../design/Logos/logoFinal.png\";\nimport { Link } from \"react-router-dom\";\nimport {\n  Navbar, Nav, NavDropdown, Form, Image, InputGroup,\n  FormControl, Button\n} from \"react-bootstrap\";\nimport \"../../../design/styleSheets/navBar.css\";\nimport \"bootstrap/dist/css/bootstrap.css\";\n\n// +---------+----------------------------------------------------\n// | Header  |\n// +---------+\n\n/** Returns the whole header for logged out users */\nfunction Header(props) {\n  return (\n    <div>\n      <Navbar variant=\"dark\" expand=\"lg\" className=\"navigationBar\">\n        <Logo />\n        <Navbar.Toggle aria-controls=\"basic-navbar-nav\" />\n        <Navbar.Collapse id=\"basic-navbar-nav\">\n          <NavBarCenter />\n        </Navbar.Collapse>\n        <Search />\n      </Navbar>\n    </div>\n  );\n};\n\n/**\n * returns logo\n */\nfunction Logo() {\n  return (\n    <Link to=\"/\" style={{ width: \"5%\" }}>\n      <img src={MistLogo} alt=\"MIST Logo\" style={{ maxWidth: \"100%\" }}></img>\n    </Link>\n  );\n}\n\n/**\n * returns Search\n */\nfunction Search() {\n  return (\n    <div>\n      <Form inline>\n        <FormControl type=\"text\" placeholder=\"Search\" className=\"mr-sm-2\" />\n        <Button variant=\"outline-light\" className=\"searchButton\">\n          Search\n        </Button>\n      </Form>\n    </div>\n  );\n}\n\n// +-----------------------+------------------------------------\n// | Center Part of NavBar |\n// +-----------------------+\n\n/**\n * NavBarCenter returns the center portion of the Header depending on the mode.\n * The two modes are \"default\", \"signIn\"\n *    --The default mode is \"default\".\n *    --The mode changes to \"signIn\" when the user clicks on the Sign In/Up option.\n *        (they are trying to sign in)\n * */\n\nfunction NavBarCenter() {\n\n  const [mode, setMode] = useState(\"default\");\n  function handleSignInClick() { setMode(\"signIn\") };\n  function handleCancelClick() { setMode(\"default\") };\n\n  if (mode === \"default\") {\n    return (\n      /* default mode*/\n      <Nav className=\"mr-auto\">\n        <DefaultCenter />\n        <SignInUpButton onClick={handleSignInClick} />\n      </Nav>\n    );\n  } else {\n    return (\n      /* signIn mode*/\n      <Nav className=\"mr-auto\">\n        <SignInCenter />\n        {/*\n        <SignInButton onClick={handleSignInClick} />\n        */}\n        <SignUpButton />\n        <CancelButton onClick={handleCancelClick} />\n      </Nav>\n    );\n  }\n}\n\n// +--------------+------------------------------------\n// | Default Mode |\n// +--------------+\n\n/* DefaultCenter contains links for Create, Challenges, Tutorial, Gallery, and About.*/\nfunction DefaultCenter() {\n  return (\n    <Nav>\n      <NavDropdown title=\"Create\" id=\"basic-nav-dropdown\">\n        <NavDropdown.Item href=\"/createWorkspace\">GUI Workspace</NavDropdown.Item>\n        <NavDropdown.Item href=\"/expert\">Expert UI</NavDropdown.Item>\n      </NavDropdown>\n      <Nav.Link href=\"/challenges\">Challenges</Nav.Link>\n      <Nav.Link href=\"/tutorial\">Tutorial</Nav.Link>\n      <Nav.Link href=\"/gallery\">Gallery</Nav.Link>\n      <NavDropdown title=\"About\" id=\"basic-nav-dropdown\">\n        <NavDropdown.Item href=\"/about\">About MIST</NavDropdown.Item>\n        <NavDropdown.Item href=\"/development\">Development</NavDropdown.Item>\n        <NavDropdown.Item href=\"/community\">Community Guidelines</NavDropdown.Item>\n        <NavDropdown.Item href=\"/faq\">FAQ</NavDropdown.Item>\n      </NavDropdown>\n    </Nav>\n  );\n}\n\nfunction SignInUpButton(props) {\n  return (\n    <Nav>\n      <Nav.Link href=\"#\" onClick={props.onClick}>\n        Sign In / Up\n      </Nav.Link>\n    </Nav>\n  );\n}\n\n// +--------------+------------------------------------\n// | SignIn Mode  |\n// +--------------+\n\n\n/* Base of the SignIn navigation bar -- Icons + Forms (Inputs, Remember Check) */\n\nfunction SignInCenter() {\n\n  const [loginUsername, setLoginUsername] = useState(\"\");\n  const [loginPassword, setLoginPassword] = useState(\"\");\n\n  const login = (e) => {\n\n    // prevents the page from refreshing on submit\n    e.preventDefault();\n\n    let user = {\n      username: loginUsername,\n      password: loginPassword,\n    };\n\n    fetch('/api', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      credentials: 'include',\n      body: JSON.stringify({ action: 'signIn', ...user })\n    })\n      //redirect user to home page\n      .then(res => res.json())\n      .then(message => {\n        console.log(\"message = \" + message);\n        if (message === \"Success\") window.location.href = \"/\";\n      })\n  }\n\n  return (\n    <Nav>\n      {/* Google and Facebook Icons */}\n      <Image src={GoogleIcon} alt=\"MIST Logo\" className=\"navBarIcon\"></Image>\n      <Image src={FacebookIcon} alt=\"MIST Logo\" className=\"navBarIcon\"></Image>\n\n      <Nav.Link eventKey=\"disabled\" disabled> OR </Nav.Link>\n\n      {/* type in labels (email + password) */}\n      <Form inline>\n        <Form.Label htmlFor=\"inlineFormInputName2\" srOnly>\n          className\n        </Form.Label>\n        <Form.Control\n          className=\"mb-2 mr-sm-2\"\n          id=\"inlineFormInputName2\"\n          placeholder=\"Username\"\n          onChange={(e) => setLoginUsername(e.target.value)}\n        />\n        <Form.Label htmlFor=\"inlineFormInputGroupUsername2\" srOnly>\n          Email\n        </Form.Label>\n        <InputGroup className=\"mb-2 mr-sm-2\">\n          <FormControl\n            id=\"inlineFormInputGroupUsername2\"\n            type=\"password\"\n            placeholder=\"Password\"\n            onChange={(e) => setLoginPassword(e.target.value)}\n          />\n        </InputGroup>\n\n        {/* Remember Me checkbox */}\n        <div class=\"custom-control custom-checkbox\">\n          <input\n            type=\"checkbox\"\n            class=\"custom-control-input\"\n            id=\"customCheck1\"\n          />\n          <label class=\"custom-control-label\" for=\"customCheck1\" variant=\"dark\">\n            Remember Me\n          </label>\n        </div>\n        <Nav.Link href=\"#\" onClick={login}>\n          Sign In\n      </Nav.Link>\n      </Form>\n    </Nav>\n  );\n}\n\n/* Sign in button */\nfunction SignInButton(props) {\n  return (\n    <Nav>\n      <Nav.Link href=\"#\" onClick={props.onClick}>\n        Sign In\n      </Nav.Link>\n    </Nav>\n  );\n}\n\n/* Sign up button */\nfunction SignUpButton(props) {\n  return (\n    <Nav>\n      <Nav.Link href=\"/signUp\" onClick={props.onClick}>\n        Sign Up\n      </Nav.Link>\n    </Nav>\n  );\n}\n\n/* Cancel up button */\nfunction CancelButton(props) {\n  return (\n    <Nav>\n      <Nav.Link href=\"#\" onClick={props.onClick}>\n        Cancel\n      </Nav.Link>\n    </Nav>\n  );\n}\n\nexport default Header;","/**\n * MIST is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\n// +-----------------------+----------------------------------------------------------------------\n// | navBarLoggedIn.js     |\n// +-----------------------+\n/**\n * This file, navBarLoggedIn.js, creates the navigation bar for users\n * who are signed in. The navigation bar is returned by the\n * function UserHeader.\n *\n * Copyright (c) 2020 Samuel A. Rebelsky and the people who did the work.\n * This work is licenced under a LGLP 3.0 or later .....\n */\n\n// +----------------+-----------------------------------------------------------------------\n// | Design Issues  |\n// +----------------+\n/**\n * UserHeader is built up of the following components:\n *    --Logo\n *    --Navbar\n *        | Create, Challenges, Tutorial, Gallery, About and its dropdowns\n *        | Username dropdown\n *            |Profile, Settings, <SignOutButton>\n *    --Search\n */\n\n// +---------+----------------------------------------------------------\n// | Imports |\n// +---------+\nimport React, { useState, useEffect } from \"react\";\nimport {Link} from \"react-router-dom\";\n\n/* Imports for stylesheet & logo */\nimport MistLogo from \"../../../design/Logos/logoFinal.png\";\nimport \"../../../design/styleSheets/navBar.css\";\n\n/* Imports for bootstrap */\nimport {\n  Navbar, Nav, NavDropdown, Form,\n  FormControl, Button\n} from \"react-bootstrap\";\nimport \"bootstrap/dist/css/bootstrap.css\";\n\n\n// +------------+----------------------------------------------------------\n// | UserHeader |\n// +------------+\n\nfunction UserHeader(props) {\n  const [user, setUser] = useState(null);\n\n  useEffect(() => {\n    fetch('/api?action=getUser', {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      credentials: 'include'\n    })\n      .then(res => res.json())\n      .then(user => {\n        if (user) setUser(user);\n      })\n  }, [user])\n\n  return (\n    <div>\n      {/* variant is the styling of it, see more on bootstrap */}\n      <Navbar variant=\"dark\" expand=\"lg\" className=\"navigationBar\">\n        <Logo />\n        <Navbar.Toggle aria-controls=\"basic-navbar-nav\" />\n        <Navbar.Collapse id=\"basic-navbar-nav\">\n          <NavBar user={user} />\n        </Navbar.Collapse>\n        <Search />\n      </Navbar>\n    </div>\n  );\n};\n\n/**\n *  returns the logo\n */\nfunction Logo() {\n  return (\n    <Link to=\"/\" style={{ width: \"5%\" }}>\n      <img src={MistLogo} alt=\"MIST Logo\" style={{ maxWidth: \"100%\" }}></img>\n    </Link>\n  );\n}\n/**\n * returns the searchBar\n */\nfunction Search() {\n  return (\n    <div>\n      <Form inline>\n        <FormControl type=\"text\" placeholder=\"Search\" className=\"mr-sm-2\" />\n\n        {/* variant is the styling of it, see more on bootstrap */}\n        <Button variant=\"outline-light\" className=\"searchButton\">\n          Search\n        </Button>\n      </Form>\n    </div>\n  );\n}\n\n/* Base Nav Bar */\n\n/* First part of the base navigation Bar (Create, Challenges, Tutorial, Gallery, About and its dropdowns) */\nfunction NavBar(props) {\n\n  let username;\n  if (props.user)\n    username = props.user.username;\n  else\n    username = \"Account\"\n\n  return (\n    <Nav>\n      <NavDropdown title=\"Create\" id=\"basic-nav-dropdown\">\n        <NavDropdown.Item href=\"/createWorkspace\">GUI Workspace</NavDropdown.Item>\n        <NavDropdown.Item href=\"/expert\">Expert UI</NavDropdown.Item>\n      </NavDropdown>      <Nav.Link href=\"/challenges\">Challenges</Nav.Link>\n      <Nav.Link href=\"/tutorial\">Tutorial</Nav.Link>\n      <Nav.Link href=\"/gallery\">Gallery</Nav.Link>\n      {/* about dropdown */}\n      <NavDropdown title=\"About\" id=\"basic-nav-dropdown\">\n        <NavDropdown.Item href=\"/about\">About MIST</NavDropdown.Item>\n        <NavDropdown.Item href=\"/development\">Development</NavDropdown.Item>\n        <NavDropdown.Item href=\"/faq\">FAQ</NavDropdown.Item>\n      </NavDropdown>\n      {/* username dropdown */}\n      <NavDropdown title={username} id=\"basic-nav-dropdown\">\n        <NavDropdown.Item href=\"/profile\">Profile</NavDropdown.Item>\n        <NavDropdown.Item href=\"/settings\">Settings</NavDropdown.Item>\n        <NavDropdown.Divider />\n        <SignOutButton />\n      </NavDropdown>\n    </Nav>\n  );\n}\n\n/* Sign Out Bar */\nfunction SignOutButton(props) {\n  return (\n    <NavDropdown.Item href=\"#\" onClick={signout}>\n      Sign Out\n    </NavDropdown.Item>\n  );\n}\n\n\nfunction signout() {\n  fetch('/api?action=signOut', {\n    method: 'GET',\n    headers: {\n      'Content-Type': 'application/json',\n    },\n    credentials: 'include'\n  }).then(res => {\n    window.location.href = \"/\";\n  })\n}\n\nexport default UserHeader;","\n// +-------+------------------------------------------------------------------------\n// | Notes |\n// +-------+\n/*\n * about.js\n * \n * This file is that displays the About page, which gives basic information about MIST.\n *\n * Copyright (c) 2020 Samuel A. Rebelsky and the people who did the work.\n * This work is licenced under a LGLP 3.0 or later .....\n *\n */\n\n// +-------------+----------------------------------------------------------------------\n// | Imports     |\n// +-------------+\nimport React from \"react\";\nimport { Container } from \"react-bootstrap\";\nimport \"./../design/styleSheets/styles.css\";\nimport \"./../design/styleSheets/about.css\";\n\n\n//full page\nconst About = () => {\n  return (\n    <Container fluid style={{marginTop: \"2vh\", marginBottom: \"0\", paddingBottom: \"7.5rem\"}}>\n      <AboutHeader />\n      <AboutContent />\n    </Container>\n  );\n};\n\n//page title\nconst AboutHeader = () => {\n  return (\n    <div>\n      <h1>About MIST</h1>\n    </div>\n  );\n};\n\n//page contents (Q&A)\nconst AboutContent = () => {\n  return (\n    <div>\n      <dl id=\"aboutQA\">\n        <Container>\n          <dt>What is MIST?</dt>\n          <dd>\n            MIST (or the Mathematical Image Synthesis Toolkit) is a tool for\n            creating images and animations using simple math functions. You can\n            make your own art from scratch, complete challenges, and share your\n            creations with the MIST community.\n          </dd>\n        </Container>\n        <Container>\n          <dt>Who can use MIST?</dt>\n          <dd>\n            Anyone! MIST does not require any prior experience in art, math, or\n            computer science.\n          </dd>\n        </Container>\n        <Container>\n          <dt>What can I learn with MIST?</dt>\n          <dd>\n            You will learn artistic creativity, functional problem solving, and\n            computational thinking.\n          </dd>\n        </Container>\n        <Container>\n          <dt>How can I share my art?</dt>\n          <dd>\n            Create an account to see, share, and modify the work of other users.\n            You will join a community of people who love to create art and learn\n            computing.\n          </dd>\n        </Container>\n        <Container>\n          <dt>Community Guidelines</dt>\n          <dd>\n            You can find our community guidelines <a href=\"/community\">here</a>\n          </dd>\n        </Container>\n      </dl>\n    </div>\n  );\n};\n\nexport default About;","/* MISTImage props\n *   resolution: the resolution used to render the image (may be smaller than\n *     the actual canvas)\n *   code: the MIST code used to render the image\n *   width: (optional, defaults to resolution) the width of the canvas\n *   height: (optional, defaults to resolution) the height of the canvas\n */\n\nimport React, {useEffect, useState} from 'react';\n\nexport default function MISTImage(props) {\n  const [canvas] = useState(React.createRef());\n  const [animator, setAnimator] = useState(null);\n\n  useEffect(() => {\n    const new_animator = new window.MIST.ui.Animator(props.code, [], {}, canvas.current)\n    new_animator.setResolution(props.resolution, props.resolution);\n    new_animator.frame();\n    setAnimator(animator => {\n      if (animator) {\n        animator.stop();\n      }\n      return new_animator;\n    });\n    return () => {\n      new_animator.stop();\n    }\n  }, [props.resolution, props.code, canvas, setAnimator]);\n\n  return (\n    <canvas\n      className=\"mist-image\"\n      width={props.width ?? props.resolution}\n      height={props.height ?? props.resolution}\n      onMouseOut={() => {\n        if (animator) {\n          animator.stop();\n        }\n      }}\n      onMouseOver={() => {\n        if (animator) {\n          animator.stop();\n          animator.start();\n        }\n      }}\n      ref={canvas}\n    />\n  );\n}","\n// +-------+------------------------------------------------------------------------\n// | Notes |\n// +-------+\n/*\n * challenges.js\n *\n * Copyright (c) 2020 Samuel A. Rebelsky and the people who did the work.\n * This work is licenced under a LGLP 3.0 or later .....\n */\n\n// +----------------+-----------------------------------------------------------------------\n// | Design Issues  |\n// +----------------+\n/**\n * The page is made up of the following parts:\n *    -- Header\n *        | Title + Subtitle\n * \n *    --Filters\n *        | Level:     Beginner, Intermediate, Advanced\n *        | Color:     Greyscale, RGB\n *        | Animation: Static, Animated\n * \n *    --Challenges Cards\n *        | thesee are the cards for the different challenges\n *        |   with an image on it and the title of the challenge\n * \n *    --Page Counter\n *        | shows what page the user is on --- NEEDS TO BE IMPLEMENTED\n */\n\n// +-------------+----------------------------------------------------------------------\n// | Imports     |\n// +-------------+\n/* react-related imports */\n\nimport React, { useState, useEffect } from \"react\";\nimport {\n  Button, Card, Col, Container,\n  Form, Pagination, Row\n} from \"react-bootstrap\";\nimport \"bootstrap/dist/css/bootstrap.css\";\n\n/* stylesheets */\nimport \"./../design/styleSheets/challenges.css\";\nimport \"./../design/styleSheets/generalStyles.css\";\n\nimport MISTImage from \"./components/MISTImageGallery\";\n\n// +----------------+----------------------------------------------------------------------\n// | Challenges     |\n// +----------------+\n\n//Challenges; header, spacing between drop down\n//menus, and the challenges displayed on the screen\n\n/**\n * Displays the whole challenges page content \n */\nconst Challenges = () => {\n\n  const [challenges, setChallenges] = useState([]);\n  const [level, setLevel] = useState(\"Beginner\");\n  const [color, setColor] = useState(\"Grayscale\");\n  const [animation, setAnimation] = useState(\"Static\");\n\n  function handleChange(event) {\n    let name = event.target.name;\n    let value = event.target.value;\n    if (name === \"level\") setLevel(value);\n    else if (name === \"color\") setColor(value);\n    else setAnimation(value);\n  };\n\n  //fetches every time the level, color, or animation changes\n  useEffect(() => {\n    // create url with the parameters we need to search\n    let url = 'api?action=getChallenges&level=' + level + \"&color=\"\n    + color + \"&animation=\" + animation;\n    fetch(url)\n      .then(req => req.json())\n      .then(challenges => { setChallenges(challenges) });\n  }, [level, color, animation])\n\n  return (\n    /* The styling helps with the footer */\n    <Container fluid style={{ marginTop: \"2vh\", marginBottom: \"0\", paddingBottom: \"7.5rem\" }}>\n      {/* Title and subtitle */}\n      <Container>\n        <h1>Challenges</h1>\n        <p>Start of challenges</p>\n      </Container>\n\n      {/* Filters */}\n      <Container style={{ marginBottom: \"1em\" }}>\n        <Filters handleChange={handleChange}\n          level={level}\n          color={color}\n          animation={animation}\n        />\n      </Container>\n\n      {/* Challenge Cards */}\n      <Container>\n        <Row style={{ justifyContent: \"space-between\" }}>\n          {challenges.map((challenge) => (\n            <ChallengeCard challenge={challenge} />\n          ))}\n        </Row>\n      </Container>\n\n      {/* Page Counter */}\n      <Container>\n        <PageCounter style={{ margin: \"auto\" }} />\n      </Container>\n    </Container>\n  );\n};\n\n/**\n * Displays one Challenge Card with title, image, button\n *  | takes in data of a challenge\n */\n//format for (all) challenge cards\nfunction ChallengeCard(props) {\n  return (\n    <Card style={{ width: \"30%\", padding: \"1em\" }}>\n\n      {/* Challenge title */}\n      <Card.Title style={{ margin: \"auto\" }}>\n        {props.challenge.title}\n      </Card.Title>\n\n      {/* Challenge card body */}\n      <Card.Body>\n        {/* Challenge image */}\n        <Row variant=\"top\" style={{ justifyContent: \"center\" }}>\n          <MISTImage code={props.challenge.code} resolution=\"250\" />\n        </Row>\n\n        {/* Button */}\n        <Row style={{ justifyContent: \"flex-end\", margin: \"1vh\" }}>\n          <Button variant=\"outline-dark\">Do challenge!</Button>\n        </Row>\n      </Card.Body>\n    </Card>\n  );\n}\n\n/**\n * Displays the Filter with the different dropdown options\n *  | takes in the level, color, and animation of the challenge\n */\n//drop down menus; level, color, and animation options\nfunction Filters(props) {\n\n  return (\n    <Form>\n      <Form.Row style={{ width: \"50%\" }}>\n\n        {/* Level Filter */}\n        <Form.Group as={Col} controlId=\"formGridState\">\n          <Form.Label>Level</Form.Label>\n          <Form.Control\n            name=\"level\"\n            as=\"select\"\n            defaultValue={props.level}\n            onChange={(e) => props.handleChange(e)}>\n            <option value=\"Beginner\">Beginner</option>\n            <option value=\"Intermediate\">Intermediate</option>\n            <option value=\"Advanced\">Advanced</option>\n          </Form.Control>\n        </Form.Group>\n        \n        {/* Color Filter */}\n        <Form.Group as={Col} controlId=\"formGridState\">\n          <Form.Label>Color</Form.Label>\n          <Form.Control\n            name=\"color\"\n            as=\"select\"\n            defaultValue={props.color}\n            onChange={(e) => props.handleChange(e)}>\n            <option>Grayscale</option>\n            <option>RGB</option>\n          </Form.Control>\n        </Form.Group>\n\n        {/* Animation Filter */}\n        <Form.Group as={Col} controlId=\"formGridState\">\n          <Form.Label>Animation</Form.Label>\n          <Form.Control\n            name=\"animation\"\n            as=\"select\"\n            defaultValue={props.animation}\n            onChange={(e) => props.handleChange(e)}>\n            <option>Static</option>\n            <option>Animated</option>\n          </Form.Control>\n        </Form.Group>\n      </Form.Row>\n    </Form>\n  );\n}\n\n/**\n * Returns a page counter\n * Needs to be implemented\n */\nfunction PageCounter() {\n  return (\n    <Pagination className=\"pagination-style\">\n      <Pagination.First />\n      <Pagination.Prev />\n      <Pagination.Item active>{1}</Pagination.Item>\n      <Pagination.Ellipsis />\n\n      <Pagination.Item>{10}</Pagination.Item>\n      <Pagination.Item>{11}</Pagination.Item>\n      <Pagination.Item>{12}</Pagination.Item>\n      <Pagination.Item>{13}</Pagination.Item>\n\n      <Pagination.Ellipsis />\n      <Pagination.Item>{20}</Pagination.Item>\n      <Pagination.Next />\n      <Pagination.Last />\n    </Pagination>\n  );\n}\nexport default Challenges;","\n// +-------+------------------------------------------------------------------------\n// | Notes |\n// +-------+\n/*\n * community.js\n * This file is  displays the Community Guidelines\n *\n * Copyright (c) 2020 Samuel A. Rebelsky and the people who did the work.\n * This work is licenced under a LGLP 3.0 or later .....\n */\n\n// +-------------+----------------------------------------------------------------------\n// | Imports     |\n// +-------------+\nimport React from \"react\";\nimport { Container } from \"react-bootstrap\";\nimport \"./../design/styleSheets/community.css\";\n\n// full community page\nfunction Community() {\n  return (\n    <Container fluid style={{ marginTop: \"2vh\", marginBottom: \"0\", paddingBottom: \"7.5rem\", width: \"70%\" }}>\n      <div>\n        <h1>Community Guidelines</h1>\n      </div>\n      <div id=\"community\">\n        <h2>Welcome to MIST!</h2> \n        <p> MIST provides a new approach to making interesting abstract images\n        and we would like you to share that experience with other users and friends.\n        We provide the ability to see other user’s images and write comments,\n        where we hope you can find inspiration and applaud other people’s creativity.\n        We very much would like you to help us do just that, so here are some\n        guidelines for how to participate. </p>\n\n        {/* Short Version */}\n        <h2>The Short Version</h2>\n        <ul>\n          <li>\n            Be nice!\n          </li>\n          <li>\n            See anything offensive? Just report and we’ll remove the bad stuff!\n          </li>\n          <li>\n            In addition to reporting, you have the option to hide content and block users.\n          </li>\n          <li>\n            Respect and help the moderators. We appreciate those who help us\n            identify inappropriate content and users!\n          </li>\n        </ul>\n        \n        {/* Rules & Guidelines */}\n        <h2>Rules and Guidelines</h2>\n        <ul>\n          <li>\n            <b>Be respectful:</b> When creating images or posting comments,\n            remember that people of different ages and backgrounds will see what you’ve shared.\n          </li>\n          <li>\n            <b>Share:</b> You are free to remix projects, ideas, images, or anything else you find\n            on MIST– and anyone can use anything that you share. Be sure to give credit when you remix.\n          </li>\n          <li>\n            <b>Keep personal information private:</b> For safety reasons, don't give out any information\n            that could be used for private communication - such as real last names, phone numbers,\n            addresses, email addresses, links to social media sites or websites with unmoderated chat\n          </li>\n          <li>\n            <b>Be honest:</b> Don’t try to impersonate other users, spread rumors, or otherwise\n            try to trick the community.\n          </li>\n        </ul>\n        <p style={{paddingBottom: \"10px\"}}>Here are things that will get your comment, image, or album removed and quite possibly\n        get you banned. Note that this is not a comprehensive list. Our moderators reserve\n          the right to remove anything we deem inappropriate.</p>\n        <ul>\n          <li>\n            <b>Spam:</b> Zero tolerance, of course! If it comes from a human or a robot,\n            spam will be deleted.\n          </li>\n          <li>\n            <b>Personal attacks/Harassment:</b> Don’t attack or insult another user.\n            It’s not helpful and it doesn’t make MIST a friendly place.\n          </li>\n          <li>\n            <b>Illegal activities: </b> Posting links to illegal downloads,\n            ways to steal service, and other nefarious activity is not OK here.\n          </li>\n          <li>\n            <b>Explicit material:</b> A good rule of thumb is that anything beyond PG-13\n            will get you in trouble, but we reserve the right to remove anything we\n            deem inappropriate.\n          </li>\n          <li>\n            <b>Offensive content:</b> Inappropriate content, both visual and written,\n             have no place here. Please remain mindful of the words you use and the\n             images you create. We understand that people may hold different opinions\n             about what is inappropriate and we take this into consideration when moderating.\n          </li>\n          <li>\n            <b>Discrimination:</b> Attacking entire classes of people is just\n            like attacking a single person: we’ll ban you for it. Example forms of discrimiation:\n            <ul>\n              <li>Racism</li>\n              <li>Sexism</li>\n              <li>Ableism</li>\n              <li>Heterosexism/Homophobia</li>\n              <li>Transphobia</li>\n            </ul>\n            This list is by no means exhaustive and we will not tolerate discimination of any form.\n          </li>\n          <li>\n            <b>Trolling: </b> Trolling is a complex term, but in its basic essence, includes\n            intentionally provoking other users for an emotional response (usually anger),\n            writing inflammatory and off-topic material, and in general, causing chaos.\n            If you’re abusing the good conversations, we will take those comments, images,\n            and or albums down.\n          </li>\n        </ul>\n        <p>Above all, our team of moderators works to keep conversation here friendly,\n        engaging, helpful, and productive. If we feel content is harming that endeavor,\n          we’ll take action.</p>\n        <p><b>See any of the above? You can help us out by reporting!</b></p>\n\n        {/* Hiding, Blocking, Reporting */}\n        <h2>Hiding, Blocking, and Reporting</h2>\n        <p style={{paddingBottom: \"10px\"}}>We provide the ability to hide and report images, comments, albums,\n          and block and report users. </p>\n        <ul>\n          <li>\n            <b>Hide:</b> You will not see this content again, but you will still be able\n          to see other content the author creates. This is not the same as reporting and\n          will only affect what you see. To hide something, click the “...” option next to\n          the content and select <i>hide.</i> Once you have hidden content, you will have the\n          ability to view hidden content in your personal settings page and unhide anything.\n          </li>\n          <li>\n            <b>Block:</b> You will not see the user or any content from this user.\n          This is not the same as reporting and will only affect what you see.\n          To block a user, navigate to their profile page and select <i>block</i>.\n          Once you block a user, you have the ability to unblock from “block list”\n          in the personal settings page.\n          </li>\n          <li>\n            <b>Report:</b>\n            <ul>\n              <li>\n                <b>Reporting content:</b> To report content, click the “...” option next\n              to the content and select <i>report</i>. You will be asked to select the reasoning\n              for the report and the content will be automatically hidden. If our moderators\n              deem the content inappropriate it will be removed and no one will be able to see it.\n              </li>\n              <li>\n                <b>Reporting Users:</b> To report a user, navigate to their profile page and\n              select <i>report</i>. You will be asked to select the reasoning for the report. If our\n              moderators deem the user to be breaking the community guidelines, they will be banned.\n              </li>\n              <li>\n                We appreciate you taking time to report. Please be patient as it may take some time\n                for reports to be processed; we do not have full time moderators. Once your report has\n                been reviewed, we will send you an email with the status of the report.\n              </li>\n            </ul>\n          </li>\n        </ul>\n        <br/>\n        <p>These guidelines were inspired by Scratch’s and The Verge’s community guidelines. </p>\n        <p>Scratch: <a href=\"https://scratch.mit.edu/community_guidelines\">Community Guidelines</a> </p>\n        <p>The Verge: <a href=\"https://www.theverge.com/pages/community-guidelines\">Community Guidelines</a> </p>\n        <br/>\n        <p>&copy;2020 Glimmer Labs</p>\n      </div>\n    </Container>\n  );\n}\n\nexport default Community;","\n// +-------+------------------------------------------------------------------------\n// | Notes |\n// +-------+\n/**\n * contact.js\n * This file would display ways to contact Glimmer Labs\n * Not yet developed\n *\n * Copyright (c) 2020 Samuel A. Rebelsky and the people who did the work.\n * This work is licenced under a LGLP 3.0 or later .....\n */\n\nimport React from \"react\";\nimport { Container } from \"react-bootstrap\";\nimport \"bootstrap/dist/css/bootstrap.css\";\n\nfunction Contact() {\n  return <Container fluid style={{ marginTop: \"2vh\", marginBottom: \"0\", paddingBottom: \"7.5rem\" }}>\n    contact info\n  </Container>;\n}\n\nexport default Contact;\n","// +-------+------------------------------------------------------------------------\n// | Notes |\n// +-------+\n/*\n * development.js\n * \n * This exports the development page, which gives a disclaimer about\n * how MIST is still in developmental phases.\n * \n * Copyright (c) 2020 Samuel A. Rebelsky and the people who did the work.\n * This work is licenced under a LGLP 3.0 or later .....\n */\n// +-------------------+----------------------------------------------------------------------\n// | IMPORTS           |\n// +-------------------+\nimport React from \"react\";\nimport \"./../design/styleSheets/styles.css\";\nimport \"./../design/styleSheets/about.css\";\nimport { Container } from \"react-bootstrap\";\n\n// +-------------------+----------------------------------------------------------------------\n// | development.js    |\n// +-------------------+\n//Disclaimer about how MIST is still in developmental phases\nconst Development = () => {\n  return (\n    <Container fluid style={{marginTop: \"2vh\", marginBottom: \"0\", paddingBottom: \"7.5rem\"}}>\n      <h1>Development</h1>\n      <Container className=\"clear:left;\">\n        <p>\n          Welcome to the MIST public beta release. We hope that you have fun\n          experimenting with MIST. In case you haven't figured it out, MIST\n          provides a new approach to making interesting abstract images. We hope\n          that you will be inspired by the sample images already on the site and\n          that you will be inspired to create your own.\n        </p>\n        <p>\n          Because MIST is in its early stages of development, you are likely to\n          find some things missing on this Web site, and you'll ocassionally\n          find that things don't work as they should. We'd appreciate it if\n          you'd take the time to let us know about\n          <a href=\"https://docs.google.com/forms/d/1vWQcSE6oU-yiM0CWk-q55aBj6Ec8zTRTepUlKdbPdog/viewform\">\n            features\n          </a>\n          that you would like to see and any\n          <a href=\"https://docs.google.com/forms/d/1TrMg8uoYFa1JJYR4qRAxX396gGW46UazTnU_Z23eQm8/viewform\">\n            bugs\n          </a>\n          that you have encountered. If you spend more than a few minutes on the\n          site, we'd also appreciate it if you'd fill out the\n          <a href=\"https://docs.google.com/forms/d/1DUo5eEY-5w8amayx9DJMifr7BvgzRUp1yy4a9-r09-g/viewform\">\n            user feedback form\n          </a>\n          .\n        </p>\n        <p className=\"text-align: right;\">-- The MIST Team</p>\n      </Container>\n    </Container>\n  );\n};\n\nexport default Development;\n","/**\n * MIST is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\n/**\n * macros.js\n *   Exports the default function expand_macros(mist_string, macros),\n *   which expands the user-defined macros of macros in mist_string\n * Author: Daniel Rebelsky\n */\n\n// +-------+---------------------------------------------------------\n// | Notes |\n// +-------+\n\n/* \n * There are four important \"types\"/variables used throughout this program.\n *\n *  1. macro: A macro is an object with two keys \"code\" and \"params\"\n *    \"code\" should be a MIST-expression String (MIST.Parse should be able to\n *    run on it); note that \"code\" may contain other macros\n *\n *    \"params\" should be an array of strings, where each string represents a\n *    parameter of the macro\n *\n *  2. macros: macros throughout the program is an object that stores a\n *  collection of macros, each key is the name of a macro except for the special\n *  key, \"_order\", which is an array of Strings, where each String is a key of\n *  the object. The array _order corresponds to the order in which the macros are\n *  parsed.\n *\n *  3. node: a node is of type MIST.App or MIST.Val\n *\n *  4. templates: templates troughough the program is an object that maps macro\n *  names to template strings\n *    a template string is a String for a macro where all of the submacros are\n *    expanded and every parameter is surrounded by curly braces\n */\n\n/* At some point, we will probably we want to turn the old MIST libraries into\n * ES6 style modules, but until then, we can grab the parse method from the\n * global MIST object.\n */\nconst {parse, Val} = window.MIST;\n\n/*\n * _make_template_string takes an AST for a macro and converts into a template\n * string: a template string has macro parameters surrounded with curly braces\n * and has any sub-macros fully expanded\n *\n * params is a Set of Strings, where each String is a parameter for the macro\n */\nfunction _make_template_string(node, params, templates, macros) {\n  switch (node.class) {\n    case \"MIST.Val\":\n      if (params.has(node.name)) {\n        return `{${node.name}}`;\n      }\n      // Allow 0 parameter macros to be input without parentheses\n      if (node.name in templates && macros[node.name].params.length === 0) {\n        return templates[node.name];\n      }\n      return node.name;\n    case \"MIST.App\":\n      const {operation, operands} = node;\n      if (operation in templates) {\n        node.operands = operands.map(operand => (\n          new Val(_make_template_string(operand, params, templates, macros))\n        ));\n        return _expand_macros(\n          node,\n          templates,\n          macros\n        );\n      }\n      return `${operation}(${operands.map(operand => (\n        _make_template_string(operand, params, templates, macros)\n      )).join(',')})`;\n    default:\n      throw TypeError(`Unknown node type ${node.class}`);\n  }\n}\n\n/*\n * make_template_string is a thin wrapper around _make_template_string\n *\n * The first parameter is a macro.\n */\nexport function make_template_string({code, params}, templates, macros) {\n  return _make_template_string(parse(code), new Set(params), templates, macros);\n}\n\n/*\n * replace_all replaces all occurences of old_s in s with new_s\n */\nexport function replace_all(s, old_s, new_s) {\n  while (s.indexOf(old_s) !== -1) {\n    s = s.replace(old_s, new_s);\n  }\n  return s;\n}\n\n/*\n * _expand_macros takes an AST of a MIST expression and returns a string version\n * for a MIST expression with all the macros expanded.\n */\nfunction _expand_macros(node, templates, macros) {\n  switch (node.class) {\n    case \"MIST.Val\":\n      // Allow 0 parameter macros to be input without parentheses\n      if (node.name in templates) {\n        return templates[node.name];\n      }\n      return node.name;\n    case \"MIST.App\":\n      const operands = node.operands.map(operand => (\n        _expand_macros(operand, templates, macros)\n      ));\n      if (node.operation in templates) {\n        const params = macros[node.operation].params;\n        let res = templates[node.operation];\n        for (let i = 0; i < operands.length; i++) {\n          res = replace_all(res, `{${params[i]}}`, operands[i]);\n        }\n        return res;\n      }\n      return `${node.operation}(${operands.join(',')})`;\n    default:\n      throw TypeError(`Unknown node type ${node.class}`);\n  }\n}\n\n/*\n * expand_macros takes a MIST string with macros and returns a MIST string with\n * all the macros expanded.\n */\nexport default function expand_macros(mist_string, macros) {\n  const templates = {};\n  macros._order.forEach(name => {\n    templates[name] = make_template_string(macros[name], templates, macros);\n  });\n  return _expand_macros(parse(mist_string), templates, macros);\n}\n\n// +---------------+-------------------------------------------------\n// | Example Usage |\n// +---------------+\n\n/*\n   const macros = {\n     PI: {\n       code: \"3.14\",\n       params: []\n     },\n     E: {\n      code: \"2.72\",\n      params: []\n     },\n     circle: {\n       code: \"sum(square(wsum(x, dx)), square(wsum(y, dy)))\",\n       params: [\"dx\", \"dy\"]\n     },\n     circles: {\n       code: \"wsum(circle(1, 2), circle(3, 4), extra)\",\n       params: [\"extra\"]\n     },\n     _order: [\"PI\", \"E\", \"circle\", \"circles\"]\n   };\n   \n   expand_macros(\"avg(circles(wsum(E, PI())))\", macros);\n   => \"avg(wsum(sum(square(wsum(x,1)),square(wsum(y,2))),sum(square(wsum(x,3)),square(wsum(y,4))),wsum(2.72,3.14)))\"\n   \n   expand_macros(\"quadrants(1, .33, -.33, -1)\", {\n     quadrants: {\n       code: \"mistif(x, mistif(y, q4, q1), mistif(y, q3, q2))\",\n       params: [\"q1\", \"q2\", \"q3\", \"q4\"]\n     },\n     _order: [\"quadrants\"]\n   });\n   => \"mistif(x,mistif(y,-1,1),mistif(y,-.33,.33))\"\n */","/**\n * MIST is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\n// +-------+------------------------------------------------------------------------\n// | Notes |\n// +-------+\n/*\n * CanvasCard.js\n *\n * Here we export the CanvasCard React Component which corresponds to the rightmost\n * panel of the MIST Expert GUI. On this panel, the user renders the MIST Image\n * written in the central panel.\n */\n\nimport expand_macros, { make_template_string, replace_all } from '../macros';\nimport PropTypes from 'prop-types';\nimport React, { Component, createRef } from 'react';\nimport {\n    Button,\n    ButtonGroup,\n    Card,\n    OverlayTrigger,\n    Row,\n    Tooltip,\n} from 'react-bootstrap';\nimport RangeSlider from 'react-bootstrap-range-slider';\nimport {\n    FiDownload,\n    FiPlay,\n    FiStopCircle,\n} from 'react-icons/fi';\n\nclass CanvasCard extends Component {\n    constructor(props) {\n        super(props);\n        this.animator = null;\n        this.canvas = createRef(\"canvas\");\n        this.state = { resolution: 200 };\n    }\n\n    /**\n     * We should only rerender the Canvas if the resolution changes\n     */\n    shouldComponentUpdate(nextProps, nextState) {\n        return (nextState.resolution !== this.state.resolution)\n    }\n\n    /**\n     * Sets the resolution of the MIST Image render via the animator object.\n     * @param {number} resolution \n     */\n    setResolution(resolution) {\n        if (this.state.resolution !== resolution) {\n            this.setState({ resolution: resolution });\n            if (this.animator) {\n                this.canvas.current.width = this.state.resolution;\n                this.canvas.current.height = this.state.resolution;\n                this.animator.bounds();\n                this.animator.setResolution(resolution, resolution);\n                this.animator.frame();\n            }\n        }\n    } // setResolution(resolution)\n\n    /**\n     * Starts rendering the MIST Image onto the canvas element.\n     */\n    startAnimator() {\n        const MIST = window.MIST;\n        if (this.animator) { this.animator.stop(); }\n        try {\n            let expand_code = this.props.code;\n            // check the user has specified default parameters\n            if (this.props.default_params) {\n\n                const params = this.props.params.replace(/\\s/g, \"\").split(\",\");\n                const default_params = this.props.default_params.replace(/\\s/g, \"\").split(\",\");;\n                // check that default_params match params in count\n                if (params.length === default_params.length) {\n                    // surround parameters with brackets\n                    expand_code = make_template_string({ code: expand_code, params: params }, {}, {});\n                    // replace parameters with default parameters\n                    console.log(expand_code);\n                    params.forEach((param, idx) => {\n                        console.log('here')\n                        expand_code = replace_all(expand_code, `{${param}}`, default_params[idx])\n                    });\n                } else {\n                    throw 'There is a mismatch between default_params and params';\n                }\n            }\n            expand_code = expand_macros(expand_code, this.props.getStateFunctions());\n            this.props.setMessage(\"\"); // Clear out any previous errors\n            this.animator = new MIST.ui.Animator(expand_code, \"\", {}, this.canvas.current, (txt) => {\n                this.props.setMessage(txt);\n                throw txt\n            });\n            this.animator.setResolution(this.state.resolution, this.state.resolution);\n            this.animator.start();\n            // at this point the image should be rendering\n            this.props.setRenderingCode(expand_code);\n        } catch (error) {\n            this.props.setMessage(error);\n            this.props.setRenderingCode('');\n        }\n    } // startAnimator()\n\n    /**\n     * Stops animating the MIST Image in the canvas element. \n     */\n    stopAnimator() {\n        if (this.animator) {\n            this.animator.stop();\n        }\n    } // stopAnimator()\n\n    /**\n     * Downloads the image seen in the canvas element.\n     */\n    downloadImage() {\n        let link = document.createElement('a');\n        link.download = (this.props.getFormState().name || 'untitled') + '.png';\n        link.href = this.canvas.current.toDataURL();\n        link.click();\n    } // downloadImage()\n\n    render() {\n        return (\n            <Card\n                id='expert-canvas'\n                className={(this.props.size ? 'col-' + this.props.size : ' ') + ' scroll panel'}>\n                {console.log('rendering canvascard')}\n                <Card.Title style={{ color: 'white' }}>Final Image</Card.Title>\n                <Card.Body>\n                    <Row style={{ justifyContent: 'space-between' }}>\n                        <ButtonGroup>\n                            <OverlayTrigger\n                                container={this.props.expertRef}\n                                key={'startAnimation'}\n                                placement=\"right\"\n                                overlay={\n                                    <Tooltip>\n                                        Start image animation\n                                    </Tooltip>\n                                }>\n\n                                <Button\n                                    className='canvasButton'\n                                    onClick={this.startAnimator.bind(this)}\n                                >\n                                    <FiPlay />\n                                </Button>\n                            </OverlayTrigger>\n\n\n                            <OverlayTrigger\n                                container={this.props.expertRef}\n                                key={'stopAnimation'}\n                                placement=\"right\"\n                                overlay={\n                                    <Tooltip>\n                                        Stop image animation\n                                    </Tooltip>\n                                }>\n                                <Button\n                                    className='canvasButton'\n                                    onClick={this.stopAnimator.bind(this)}\n                                >\n                                    <FiStopCircle />\n                                </Button>\n                            </OverlayTrigger>\n\n\n                        </ButtonGroup>\n                        <CanvasSlider\n                            min={1}\n                            max={Math.round(this.canvas.current?.getClientRects()[0].width ?? 400)}\n                            step={1}\n                            setResolution={(res) => this.setResolution(res)}\n                            resolution={this.state.resolution}\n                        />\n                        <ButtonGroup>\n                            <OverlayTrigger\n                                container={this.props.expertRef}\n                                key={'downloadImagePng'}\n                                placement=\"left\"\n                                overlay={\n                                    <Tooltip>\n                                        Locally download the image as a .png\n                                    </Tooltip>\n                                }>\n                                <Button\n                                    className='canvasButton'\n                                    onClick={() => this.downloadImage()}\n                                >\n                                    <FiDownload />\n                                </Button>\n                            </OverlayTrigger>\n                        </ButtonGroup>\n                    </Row>\n                    <Card.Img\n                        as=\"canvas\"\n                        id=\"expert-canvas-image\"\n                        ref={this.canvas}\n                        width={200}\n                        height={200} />\n\n                </Card.Body>\n            </Card>\n        )\n    }\n}\n\nCanvasCard.propTypes = {\n    code: PropTypes.string.isRequired,\n    setMessage: PropTypes.func.isRequired,\n    getFormState: PropTypes.func.isRequired,\n    getStateFunctions: PropTypes.func.isRequired,\n}\n\nfunction CanvasSlider(props) {\n    return (\n        <RangeSlider\n            value={props.resolution}\n            min={props.min}\n            max={props.max}\n            step={props.step}\n            tooltip={'on'}\n            tooltipStyle={{ color: 'white' }}\n            tooltipLabel={(value) => ('Resolution: ' + value)}\n            onChange={(e) => props.setResolution(parseInt(e.target.value, 10))}\n        />\n    );\n\n}\n\nCanvasSlider.propTypes = {\n    min: PropTypes.number.isRequired,\n    max: PropTypes.number.isRequired,\n    step: PropTypes.number.isRequired,\n    setResolution: PropTypes.func.isRequired,\n}\n\nexport default CanvasCard;","/**\n * MIST is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\n// +-------+------------------------------------------------------------------------\n// | Notes |\n// +-------+\n/*\n * Menu.js\n * \n * This exports the Menu component of the MIST Expert GUI.\n * \n */\n\nimport PropTypes from 'prop-types';\nimport React, { createRef, useEffect, useState } from 'react';\nimport {\n    Button,\n    ButtonGroup,\n    Dropdown,\n    DropdownButton,\n    Form,\n    FormControl,\n    ListGroup,\n    Nav,\n    Navbar,\n    OverlayTrigger,\n    Row,\n    Tooltip,\n} from 'react-bootstrap';\nimport { BsCloud, BsFullscreen, BsFullscreenExit, BsQuestionCircle } from 'react-icons/bs';\nimport { FaRegShareSquare } from 'react-icons/fa';\nimport { Link } from \"react-router-dom\";\n\nfunction Menu(props) {\n    // A reference to keep track of the name that the user picks for their workspace\n    const workspaceNameRef = createRef('workspaceName');\n    const finalimageNameRef = createRef('finalimageName');\n    return (\n        <Navbar id='menu' bg=\"dark\" variant=\"dark\" style={{ justifyContent: 'space-between', }}>\n            <Nav>\n\n                <Button\n                    className='menu-btn'\n                    onClick={() => {\n                        props.triggerPopup({\n                            footer: false,\n                            message: (\n                                <div>\n                                    <ListGroup>\n                                        <ListGroup.Item>\n                                            The <b>Side Panel</b> is the left-most panel is where you\n                                        access builtin MIST functions and values as well as your saved functions.\n                                        </ListGroup.Item>\n\n                                        <ListGroup.Item>\n                                            The <b>Central Panel</b> is where you can write and save your own MIST function with however many\n                                        parameters as well as write your MIST Image.\n                                        </ListGroup.Item>\n\n                                        <ListGroup.Item>\n                                            The <b>Final Image Panel</b> is where you can render and see the MIST image that you wrote out\n                                        in the Central Panel.\n                                        </ListGroup.Item>\n\n                                        <ListGroup.Item>\n                                            The <b>Workspace</b> you save is both the functions that you have saved as well as the contents\n                                        of the function that you are currently writing.\n                                        </ListGroup.Item>\n\n                                        <ListGroup.Item>\n                                            If you need additional help to start using the Expert UI, click the following button to\n                                            checkout our tutorial!\n                                            <a href='/tutorial/#expert-ui'>\n                                                <Button>To Tutorials</Button>\n                                            </a>\n                                        </ListGroup.Item>\n\n                                    </ListGroup>\n                                </div>\n                            ),\n                            title: 'MIST Expert UI Terminology',\n                        })\n                    }}\n                    variant=\"outline-light\">\n                    <BsQuestionCircle\n\n                    />\n                </Button>\n                <FileDropdown\n                    deleteWorkspace={props.deleteWorkspace}\n                    getCurrentWorkspace={props.getCurrentWorkspace}\n                    getUserExpertWS={props.getUserExpertWS}\n                    isWorkspaceInUse={props.isWorkspaceInUse}\n                    loadWorkspace={props.loadWorkspace}\n                    resetWorkspace={props.resetWorkspace}\n                    togglePopup={props.togglePopup}\n                    triggerPopup={props.triggerPopup}\n                    workspaceNameRef={workspaceNameRef}\n                />\n            </Nav>\n            <Nav>\n                <Form inline>\n                    <FormControl\n                        className=\"mr-sm-2\"\n                        placeholder=\"Name your Workspace\"\n                        ref={workspaceNameRef}\n                        type=\"text\"\n                    />\n                </Form>\n                <OverlayTrigger\n                    placement='top'\n                    overlay={<Tooltip>Save your workspace</Tooltip>}\n                >\n                    <Button className='menu-btn'\n                        onClick={() => props.saveWorkspace(workspaceNameRef.current.value)}\n                        variant='outline-light'> <BsCloud /> Save</Button>\n                </OverlayTrigger>\n            </Nav>\n\n            <Nav>\n                <Form inline>\n                    <FormControl\n                        className=\"mr-sm-2\"\n                        placeholder=\"Name your Final Image\"\n                        ref={finalimageNameRef}\n                        type=\"text\"\n                    />\n                </Form>\n                <OverlayTrigger\n                    placement='top'\n                    overlay={<Tooltip>Publish your final image</Tooltip>}\n                >\n                    <Button className='menu-btn'\n                        variant='outline-light'\n                        onClick={() => {\n                            if (!finalimageNameRef.current.value || !props.rendering_code) {\n                                if (!finalimageNameRef.current.value)\n                                    alert('Enter a valid final image name')\n                                else\n                                    alert('Please render an image to save')\n                            } else {\n                                //props.triggerPopup({message: 'You are about to publish the image'finalimageNameRef.current.value, props.rendering_code});\n                                // check if the user already has an image with that title\n                                // or if the user is not logged in \n                                const title = finalimageNameRef.current.value;\n\n                                let url = \"api?action=imageexists&title=\" + title;\n                                fetch(url)\n                                    .then((res) => res.json())\n                                    .then((response) => {\n                                        switch (response) {\n                                            case \"logged out\":\n                                                alert(\"Please log in to save images.\")\n                                                break;\n                                            case \"image exists\":\n                                                alert(\"You already have an image with this name; please name it something else.\")\n                                                break;\n                                            case \"image does not exist\":\n                                                let image = {\n                                                    action: \"saveimage\",\n                                                    title: title,\n                                                    code: props.rendering_code\n                                                }\n                                                // save the image\n                                                fetch(\"api\", {\n                                                    method: 'POST',\n                                                    headers: {\n                                                        'Content-Type': 'application/json',\n                                                    },\n                                                    credentials: 'include',\n                                                    body: JSON.stringify(image)\n                                                })\n                                                    .then(res => res.json())\n                                                    .then(data => {\n                                                        if (data.success)\n                                                            alert(data.message);\n                                                        else {\n                                                            alert('Failed to save due to ' + (data.message || data))\n                                                        }\n                                                    })\n                                                    .catch(err => alert('Failed to save due to Error: ' + err))\n                                                break;\n                                            default: {\n                                                // we do not expect to reach this state\n                                                console.log('Unexpected result')\n                                            }\n                                        }\n                                    })\n                                    .catch(error => alert('Failed to fetch due to Error: ' + error))\n\n                            }\n                        }}\n                    ><FaRegShareSquare /> Publish</Button>\n                </OverlayTrigger>\n            </Nav>\n            <FullscreenButton\n                requestFullscreen={props.requestFullscreen}\n                exitFullscreen={props.exitFullscreen}\n            />\n        </Navbar>\n    )\n}\n\nMenu.propTypes = {\n    getCurrentWorkspace: PropTypes.func.isRequired,\n    loadWorkspace: PropTypes.func.isRequired,\n    resetWorkspace: PropTypes.func.isRequired,\n    requestFullscreen: PropTypes.func.isRequired,\n    exitFullscreen: PropTypes.func.isRequired,\n}\n\n/**\n * Button for the user to toggle fullscreen\n */\nfunction FullscreenButton(props) {\n    const [fullscreen, setFullscreen] = useState(document.fullscreen);\n    useEffect(() => {\n        const listener = () => setFullscreen(document.fullscreen);\n        document.addEventListener('fullscreenchange', listener);\n        return () => {\n            document.removeEventListener('fullscreenchange', listener);\n        }\n    }, []);\n\n    if (fullscreen) {\n        return (\n            <Button\n                className='menu-btn'\n                onClick={props.exitFullscreen}\n                variant='outline'><BsFullscreenExit /></Button>\n        );\n    } else {\n        return (\n            <Button\n                className='menu-btn'\n                onClick={props.requestFullscreen}\n                variant='outline-light'><BsFullscreen /></Button>\n        );\n    }\n}\n\n/**\n * Dropdown for where the user can perform actions related to workspaces other than saving\n */\nfunction FileDropdown(props) {\n    const handleDeleteOnClick = async () => {\n        const data = await props.getUserExpertWS();\n        if (data.success) {\n            props.triggerPopup({\n                footer: false,\n                title: 'Choose an Expert Workspace to Delete',\n                message: (<ButtonGroup vertical>\n                    {data.expertWorkspaces.map(expert_workspace => (\n                        <Button\n                            className='menu-btn'\n                            onClick={() => { props.deleteWorkspace(expert_workspace.name); props.togglePopup() }}\n                            variant='outline-primary'\n                        >\n                            {expert_workspace.name}\n                        </Button>\n                    ))}\n                </ButtonGroup>),\n            })\n        } else {\n            alert(data.message)\n        }\n    }\n    return (\n        <>\n            <DropdownButton\n                as={ButtonGroup}\n                className='menu-btn'\n                id=\"file\"\n                title=\"File\"\n                variant=\"outline-light\"\n            >\n                <Dropdown.Item\n                    onClick={() => {\n                        if (props.isWorkspaceInUse()) {\n                            props.triggerPopup({\n                                message: 'Your workspace is currently in use. Are you sure that you want to reset it?',\n                                onConfirm: props.resetWorkspace,\n                            })\n                        }\n                    }}\n                >Reset Workspace</Dropdown.Item>\n\n                <ImportWorkspace\n                    getUserExpertWS={props.getUserExpertWS}\n                    loadWorkspace={props.loadWorkspace}\n                    triggerPopup={props.triggerPopup}\n                    workspaceNameRef={props.workspaceNameRef} />\n                <Dropdown.Item onClick={handleDeleteOnClick}>Delete Workspace</Dropdown.Item>\n                <Dropdown.Divider />\n\n            </DropdownButton>{' '}\n        </>\n    )\n}\n\nFileDropdown.propTypes = {\n    getCurrentWorkspace: PropTypes.func.isRequired,\n    loadWorkspace: PropTypes.func.isRequired,\n    resetWorkspace: PropTypes.func.isRequired,\n    workspaceNameRef: PropTypes.object.isRequired,\n}\n\n/**\n * Button for the user to load a saved workspace from the server \n */\nfunction ImportWorkspace(props) {\n    const handleOnClick = async () => {\n        const data = await props.getUserExpertWS();\n        if (data.success) {\n            props.triggerPopup({\n                footer: false,\n                title: 'Choose an Expert Workspace to Load',\n                message: (<ButtonGroup vertical>\n                    {data.expertWorkspaces.map(expert_workspace => (\n                        <Button\n                            className='menu-btn'\n                            onClick={() => props.loadWorkspace(expert_workspace)}\n                            variant='outline-primary'\n                        >\n                            {expert_workspace.name}\n                        </Button>\n                    ))}\n                </ButtonGroup>),\n            })\n        } else {\n            alert(data.message)\n        }\n    }\n\n    return (\n        <>\n            <Dropdown.Item onClick={handleOnClick}>Load a Workspace</Dropdown.Item>\n        </>\n    );\n}\n\nexport default React.memo(Menu);","/**\n * MIST is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\n// +-------+------------------------------------------------------------------------\n// | Notes |\n// +-------+\n/*\n * Popup.js\n * This is our Popup Component that is used by the Expert component to create\n * popups. Or rather, we do not create popups, but rerender this component whenever\n * we need one in a situation where we need to confirmation for an action.\n * \n */\n\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport {\n    Button,\n    Modal,\n} from 'react-bootstrap';\n\n/*\n * Our Popup React component. For props we expect to receive:\n * isOpen, \n * onClose,\n * message,\n * onConfirm.\n * which we elaborate in the propTypes immediately after. \n */\nfunction Popup(props) {\n    return (\n        <Modal show={props.isOpen} onHide={props.onClose}>\n            <Modal.Header closeButton>\n                <Modal.Title>{props.title}</Modal.Title>\n            </Modal.Header>\n            <Modal.Body> {props.message}\n            </Modal.Body>\n            {(props.footer) ? <Modal.Footer>\n                <Button\n                    onClick={props.onClose}\n                    variant=\"secondary\">Close</Button>\n                <Button\n                    onClick={() => { props.onConfirm(); props.onClose() }}\n                    variant=\"primary\">\n                    Confirm</Button>\n            </Modal.Footer> : <></>}\n        </Modal>)\n}\n\n/*\n * isOpen: a boolean that represents whether or not Popup is shown\n * message: a string that represents the contents of the popup\n * onConfirm: a function that is the action we need a confirmation for\n * onClose: a function that is what needs to happen when we close our modal, additionally\n *  we need to set isOpen to false within this function\n */\nPopup.propTypes = {\n    isOpen: PropTypes.bool,\n    onConfirm: PropTypes.func.isRequired,\n    onClose: PropTypes.func.isRequired,\n}\n\nexport default Popup;","/**\n * MIST is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport { highlight as prism_highlight } from 'prismjs/components/prism-core';\n\n// A UTF character that doesn't take up any width, used for matching parentheses\nconst invisible_char = \"‎\";\n\nconst mist = {\n  'keyword': {\n    'pattern': /(^|,|\\s|\\(|‎)(?:abs|avg|cos|mistif|mult|neg|rgb|sign|signz|sin|sine|square|sum|wsum)(?=\\(|\\s|‎)/,\n    'lookbehind': true\n  },\n  'number': {\n    'pattern': /(,|\\s|\\(|‎)-?[0-9]?\\.?[0-9]+/,\n    'lookbehind': true\n  },\n  'paren': {\n    'pattern': new RegExp(\"(\" + invisible_char + \")(?:\\\\(|\\\\))(?=\" + invisible_char + \")\"),\n    'lookbehind': true\n  },\n  'symbol': {\n    'pattern': /(\\(|,|\\s|‎)(?:x|y|t\\.(?:s|m|h|d)|m\\.(?:x|y))(?=\\s|,|\\)|‎)/,\n    'lookbehind': true\n  }\n};\n\nexport function match_macros(macros_list) {\n  macros_list = macros_list.filter(macro => macro !== \"\");\n  if (macros_list.length > 0) {\n    mist.macros = macros_list.map(macro => ({\n      'pattern': new RegExp(`(^|${invisible_char}|\\\\(|,|\\\\s)(?:${macro})(?=\\\\s|,|\\\\)|\\\\(|${invisible_char})`),\n      'lookbehind': true\n    }));\n  } else {\n    mist.macros = undefined;\n  }\n}\n\nexport function match_params(params_list) {\n  params_list = params_list.filter(param => param !== \"\");\n  if (params_list.length > 0) {\n    mist.params = params_list.map(param => ({\n      'pattern': new RegExp(`(${invisible_char}|\\\\(|,|\\\\s)(?:${param})(?=\\\\s|,|${invisible_char}|\\\\))`),\n      'lookbehind': true\n    }));\n  } else {\n    mist.params = undefined;\n  }\n}\n\nexport function highlight(code, textareaId) {\n  const textarea = document.getElementById(textareaId);\n  let start = textarea?.selectionStart ?? -1;\n  if (start === -1 || (code[start] !== '(' && code[start] !== ')')) {\n    return prism_highlight(code, mist, 'mist');\n  }\n\n  code = Array.from(code);\n  let end = null;\n\n  // The cursor is by an open paren\n  if (code[start] === '(') {\n    let parens = 1;\n    let i = start + 1;\n    while (parens > 0 && i < code.length) {\n      switch (code[i++]) {\n        case '(': parens++; break;\n        case ')': parens--; break;\n        default: break;\n      }\n    }\n    if (parens === 0) {\n      end = i - 1;\n    }\n  } // The cursor is by an open paren\n  // Otherwise, the cursor is by a closed paren\n  else {\n    end = start;\n    start = null;\n    let parens = 1;\n    let i = end - 1;\n    while (parens > 0 && i >= 0) {\n      switch (code[i--]) {\n        case '(': parens--; break;\n        case ')': parens++; break;\n        default: break;\n      }\n    }\n    if (parens === 0) {\n      start = i + 1;\n    }\n  }\n\n  if (end !== null && start !== null) {\n    code.splice(end, 1, invisible_char, code[end], invisible_char);\n    code.splice(start, 1, invisible_char, code[start], invisible_char);\n  }\n  return prism_highlight(code.join(''), mist, 'mist');\n}","/**\n * MIST is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\n// +-------+------------------------------------------------------------------------\n// | Notes |\n// +-------+\n/*\n * Workspace.js\n * The only export here is the WorkspaceCard React Component.\n * \n * Here we build the WorkspaceCard component which mainly consists of the Form a user\n * fills out on the expert page.\n * \n * We might rename the WorkspaceCard to FunctionCard.\n */\n\nimport PropTypes from 'prop-types';\nimport React, { useEffect, useState } from 'react';\nimport {\n    Button,\n    ButtonGroup,\n    Card,\n    Form,\n    OverlayTrigger,\n    Row,\n    Tab,\n    Tabs,\n    Tooltip,\n} from 'react-bootstrap';\nimport { BsQuestionCircle } from 'react-icons/bs'\nimport { FiSave } from 'react-icons/fi';\nimport { GrPowerReset } from 'react-icons/gr'\nimport Editor from 'react-simple-code-editor';\nimport { highlight, match_macros, match_params } from './prism-mist.js';\n\nfunction WorkspaceCard(props) {\n    // Class toggles are used to force a highlight update when moving through the code\n    // TODO: see if there's a better way to do this\n    const [, setHighlightSwitch] = useState(true);\n    const [key, setKey] = useState('createFunction');\n    const updateHighlight = () => setHighlightSwitch(hs => !hs);\n\n    useEffect(() => {\n        match_macros(props.functions);\n    }, [props.functions])\n\n    useEffect(() => {\n        match_params(props.params.replace(/\\s/g, \"\").split(\",\"));\n    }, [props.params])\n\n    return (\n        <Card className='scroll panel' id='expert-workspace'>\n\n            {\n                console.log('rendering workspace')\n            }\n            <Card.Title >Create Your Custom Function</Card.Title>\n            <Tabs\n                id=\"controlled-center-body\"\n                activeKey={key}\n                onSelect={(k) => setKey(k)}\n            >\n                <Tab eventKey=\"createFunction\" title=\"Create Function\">\n                    <Card.Body>\n                        <FunctionButtons\n                            addUserDefinedFunction={props.addUserDefinedFunction}\n                            clearFunction={props.clearFunction}\n                            currentForm={props.getCurrentWorkspace().form}\n                            doesFunctionExist={props.doesFunctionExist}\n                            expertRef={props.expertRef}\n                            loadFunction={props.loadFunction}\n\n                            triggerPopup={props.triggerPopup}\n                        >\n\n                            <Form>\n                                <Form.Group>\n                                    <Form.Label>\n                                        Name&nbsp;\n                                        <HelpText text=\"The name of your MIST function. Your function name can include numbers and capital or lowercase letters. The name should not conflict with a MIST builtin function.\" id=\"mist-function-name-tooltip\" />\n                                    </Form.Label>\n                                    <Form.Control\n                                        as=\"textarea\"\n                                        className=\"formTextbox\"\n                                        onChange={(e) => props.setName(e.target.value.replace(/[^ a-zA-Z0-9]/g, \"\"))}\n                                        placeholder=\"Please name your MIST Function\"\n                                        rows=\"1\"\n                                        value={props.name}\n                                    />\n                                </Form.Group>\n                                <Form.Group>\n                                    <Form.Label>\n                                        Parameters&nbsp;\n                                        <HelpText text=\"The parameters to your MIST function. Separate parameters with commas. Parameter names can include numbers and capital or lowercase letters.\" id=\"mist-function-params-tooltip\" />\n                                    </Form.Label>\n                                    <Form.Control\n                                        as=\"textarea\"\n                                        className=\"formTextbox\"\n                                        onChange={(e) => props.setParams(e.target.value.replace(/[^ a-zA-Z0-9,]/g, \"\"))}\n                                        placeholder=\"Please list your params, separated by commas\"\n                                        rows=\"1\"\n                                        value={props.params}\n                                    />\n                                </Form.Group>\n                                <Form.Group>\n                                    <Form.Label>\n                                        Testing Parameters&nbsp;\n                                        <HelpText text=\"Parameter values that are used when rendering your function directly. Separate testing parameters with commas.\" id=\"mist-function-test-params-tooltip\" />\n                                    </Form.Label>\n                                    <Form.Control\n                                        as=\"textarea\"\n                                        className=\"formTextbox\"\n                                        onChange={(e) => props.setDefaultParams(e.target.value)}\n                                        placeholder=\"Please pick your default params, separated by commas\"\n                                        rows=\"1\"\n                                        value={props.default_params}\n                                    />\n                                </Form.Group>\n                                <Form.Group>\n                                    <Form.Label>Description</Form.Label>\n                                    <Form.Control\n                                        as=\"textarea\"\n                                        className=\"formTextbox\"\n                                        onChange={(e) => props.setDescription(e.target.value)}\n                                        placeholder=\"Please describe your MIST function\"\n                                        rows=\"2\"\n                                        value={props.description}\n                                    />\n                                </Form.Group>\n                                <Form.Group>\n                                    <Form.Label>Code</Form.Label>\n\n                                    <Editor\n                                        className='formTextbox'\n                                        highlight={code => (\n                                            highlight(code, \"code-editor\")\n                                        )}\n                                        id='expert-code'\n                                        onKeyUp={updateHighlight}\n                                        onValueChange={code => props.setCode(code)}\n                                        padding={10}\n                                        ref={props.codeRef}\n                                        tabSize={4}\n                                        textareaId='code-editor'\n                                        value={props.code}\n                                    />\n                                </Form.Group>\n                                <Form.Group>\n                                    <Form.Label>Message Box</Form.Label>\n                                    <Form.Control\n                                        as=\"textarea\"\n                                        id=\"message\"\n                                        className=\"formTextbox\"\n                                        value={props.message}\n                                        readOnly\n                                        rows=\"3\" />\n                                </Form.Group>\n\n                            </Form>\n                        </FunctionButtons>\n\n                    </Card.Body>\n                </Tab>\n\n                <Tab eventKey=\"createImage\" title=\"Create Image\">\n                    <Card.Body>\n                        <Form>\n                            <Form.Group>\n                                <Form.Label>Code</Form.Label>\n\n                                <Editor\n                                    className='formTextbox'\n                                    highlight={code => (\n                                        highlight(code, \"code-editor\")\n                                    )}\n                                    id='expert-code'\n                                    onKeyUp={updateHighlight}\n                                    onValueChange={code => props.setCode(code)}\n                                    padding={10}\n                                    ref={props.codeRef}\n                                    tabSize={4}\n                                    textareaId='code-editor'\n                                    value={props.code}\n                                />\n                            </Form.Group>\n                        </Form>\n                    </Card.Body>\n                </Tab>\n\n            </Tabs>\n\n        </Card>\n    )\n}\n\nWorkspaceCard.propTypes = {\n    name: PropTypes.string,\n    params: PropTypes.string,\n    description: PropTypes.string,\n    code: PropTypes.string,\n}\n\n// FunctionDropdown\n// Contains all actions related directly to the function form\nfunction FunctionButtons(props) {\n\n    // check if form is in use\n    const checkIfFormInUse = () => {\n        const currentForm = props.currentForm;\n        return (currentForm.name || currentForm.params || currentForm.description || currentForm.code);\n    }\n\n    // check if workspace is in use\n\n    return (\n        <>\n            <Row style={{ justifyContent: 'space-between', flexDirection: 'row-reverse' }}>\n                <ButtonGroup>\n                    <OverlayTrigger\n                        container={props.expertRef}\n                        key={'clearFunction'}\n                        placement=\"right\"\n                        overlay={\n                            <Tooltip>\n                                Reset the function form to the default state\n                        </Tooltip>\n                        }>\n                        <Button\n                            onClick={() => {\n                                const warning_message = ' Your function form is currently in use. Are you sure that you want to clear it?'\n                                if (checkIfFormInUse())\n                                    props.triggerPopup({\n                                        message: warning_message,\n                                        onConfirm: () => props.clearFunction(),\n                                    });\n                            }}\n                        >\n                            <GrPowerReset />\n                        </Button>\n                    </OverlayTrigger>\n                </ButtonGroup>\n\n                <ButtonGroup>\n                    <OverlayTrigger\n                        container={props.expertRef}\n                        key={'addToWorkspace'}\n                        placement=\"right\"\n                        overlay={\n                            <Tooltip>\n                                Save your function to your workspace\n                        </Tooltip>\n                        }>\n                        <Button onClick={() => {\n                            const fun_name = props.currentForm.name;\n                            const warning_message = 'You are about to overwrite a previous custom function. Are you sure that you want to continue?'\n                            if (props.doesFunctionExist(fun_name)) {\n                                props.triggerPopup({\n                                    message: warning_message,\n                                    onConfirm: () => props.addUserDefinedFunction(),\n                                });\n                            } else {\n                                props.addUserDefinedFunction();\n                            }\n                        }}><FiSave /></Button>\n                    </OverlayTrigger>\n\n                </ButtonGroup>\n\n            </Row >\n            {props.children}\n        </>\n    )\n}\n\nfunction HelpText(props) {\n    return (\n        <OverlayTrigger\n            container={props.expertRef}\n            overlay={<Tooltip id={props.id}>{props.text}</Tooltip>}\n            placement=\"right\"\n        >\n            <BsQuestionCircle />\n        </OverlayTrigger>\n    );\n}\n\nexport default WorkspaceCard;\n","/**\n * MIST is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\n// +-------+------------------------------------------------------------------------\n// | Notes |\n// +-------+\n/*\n * This file contains important global constants for our Expert UI.\n * These are MIST_builtin_functions for default-builtin MIST functions and  \n * MIST_builtin_values for default-builtin MIST values.\n */\n\nexport const MIST_builtin_functions = {\n    \"abs\": {\n        \"class\": \"MIST.FunInfo\",\n        \"name\": \"abs\",\n        \"display\": \"abs\",\n        \"about\": \"The absolute value of i\",\n        \"params\": \"i\",\n        \"minarity\": 1,\n        \"maxarity\": 1,\n        \"type\": \"GENERAL\"\n    },\n    \"avg\": {\n        \"class\": \"MIST.FunInfo\",\n        \"name\": \"average\",\n        \"display\": \"avg\",\n        \"about\": \"Average 2 or more values\",\n        \"params\": \"...\",\n        \"minarity\": 2,\n        \"maxarity\": 20,\n        \"type\": \"GENERAL\"\n    },\n    \"cos\": {\n        \"class\": \"MIST.FunInfo\",\n        \"name\": \"cosine\",\n        \"display\": \"cos\",\n        \"about\": \"The cosine of pi*a\",\n        \"params\": \"a\",\n        \"minarity\": 1,\n        \"maxarity\": 1,\n        \"type\": \"GENERAL\"\n    },\n    \"mult\": {\n        \"class\": \"MIST.FunInfo\",\n        \"name\": \"multiply\",\n        \"display\": \"mult\",\n        \"about\": \"Multiply 2 or more values\",\n        \"params\": \"...\",\n        \"minarity\": 2,\n        \"maxarity\": 20,\n        \"type\": \"GENERAL\"\n    },\n    \"neg\": {\n        \"class\": \"MIST.FunInfo\",\n        \"name\": \"negate\",\n        \"display\": \"neg\",\n        \"about\": \"negates value\",\n        \"params\": \"a\",\n    },\n    \"rgb\": {\n        \"class\": \"MIST.FunInfo\",\n        \"name\": \"rgb\",\n        \"display\": \"rgb\",\n        \"about\": \"Generate an RGB color from red, green, and blue components\",\n        \"params\": \"r,g,b\",\n        \"minarity\": 3,\n        \"maxarity\": 3,\n        \"type\": \"RGB\"\n    },\n    \"sign\": {\n        \"class\": \"MIST.FunInfo\",\n        \"name\": \"sign\",\n        \"display\": \"sign\",\n        \"about\": \"If i < 0, returns -1; if i >- 0, returns 1\",\n        \"params\": \"i\",\n        \"minarity\": 1,\n        \"maxarity\": 1,\n        \"type\": \"GENERAL\"\n    },\n    \"signz\": {\n        \"class\": \"MIST.FunInfo\",\n        \"name\": \"signz\",\n        \"display\": \"signz\",\n        \"about\": \"If i < 0, returns -1; if i > 0, returns 1; if i is 0, returns 1.\",\n        \"params\": \"i\",\n        \"minarity\": 1,\n        \"maxarity\": 1,\n        \"type\": \"GENERAL\"\n    },\n    \"sin\": {\n        \"class\": \"MIST.FunInfo\",\n        \"name\": \"sine\",\n        \"display\": \"sin\",\n        \"about\": \"The sine of pi*a\",\n        \"params\": \"a\",\n        \"minarity\": 1,\n        \"maxarity\": 1,\n        \"type\": \"GENERAL\"\n    },\n    \"square\": {\n        \"class\": \"MIST.FunInfo\",\n        \"name\": \"square\",\n        \"display\": \"square\",\n        \"about\": \"Square i\",\n        \"params\": \"i\",\n        \"minarity\": 1,\n        \"maxarity\": 1,\n        \"type\": \"GENERAL\"\n    },\n    \"sum\": {\n        \"class\": \"MIST.FunInfo\",\n        \"name\": \"sum\",\n        \"display\": \"sum\",\n        \"about\": \"Sum 2 or more values.  If the sum would exceed 1, has the value 1.  If the sum would be less than -1, has the value -1\",\n        \"params\": \"...\",\n        \"minarity\": 2,\n        \"maxarity\": 20,\n        \"type\": \"GENERAL\"\n    },\n    \"wsum\": {\n        \"class\": \"MIST.FunInfo\",\n        \"name\": \"wrapsum\",\n        \"display\": \"wsum\",\n        \"about\": \"Sum 2 or more values, wrapping around from 1 to -1 (or vice versa) if the sum is too large or too small\",\n        \"params\": \"...\",\n        \"minarity\": 2,\n        \"maxarity\": 20,\n        \"type\": \"GENERAL\"\n    },\n    \"mistif\": {\n        \"class\": \"MIST.FunInfo\",\n        \"name\": \"mistif\",\n        \"display\": \"mistif\",\n        \"about\": \"if test is greater than or equal to zero, return pos, if test is less than zero, return neg\",\n        \"params\": \"test, pos, neg\",\n        \"minarity\": 3,\n        \"maxarity\": 3,\n        \"type\": \"GENERAL\"\n    },\n}\n\n\nexport const MIST_builtin_values = {\n    \"x\": {\n        \"name\": \"x\",\n        \"about\": \"ranges from -1 to 1 basesd on the x-value\"\n    },\n    \"y\": {\n        \"name\": \"y\",\n        \"about\": \"ranges from -1 to 1 basesd on the y-value\"\n    },\n    \"second\": {\n        \"name\": \"t.s\",\n        \"about\": \"goes through values -1 to 1 every second\"\n    },\n    \"minute\": {\n        \"name\": \"t.m\",\n        \"about\": \"goes through values -1 to 1 every minute\"\n    },\n    \"hour\": {\n        \"name\": \"t.h\",\n        \"about\": \"goes through values -1 to 1 every hour\"\n    },\n    \"day\": {\n        \"name\": \"t.d\",\n        \"about\": \"goes through values -1 to 1 every day\"\n    },\n    \"mouseX\": {\n        \"name\": \"m.x\",\n        \"about\": \"takes the x-value of the position of the mouse on the image\"\n    },\n    \"mouseY\": {\n        \"name\": \"m.y\",\n        \"about\": \"takes the y-value of the position of the mouse on the image\"\n    },\n    \"constant\": {\n        \"name\": \"#\",\n        \"about\": \"enter your own number\"\n    },\n};\n","/**\n * MIST is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\n// +--------------------------------------------------------------------------------\n// | Notes |\n// +-------+\n/*\n * SidePanelCard.js\n * SidePanelCard is a React functional component. It builds the Side Panel of the \n * MIST Expert GUI. It contains the user-defined functions as well as the MIST\n * built-in functions. We rely on a parent component to manage the user-defined \n * functions.\n */\n\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport {\n    Draggable,\n    DragDropContext,\n    Droppable\n} from 'react-beautiful-dnd';\nimport {\n    Button,\n    Card,\n    Col,\n    Container,\n    OverlayTrigger,\n    Row,\n    Tooltip,\n} from 'react-bootstrap';\nimport { IconContext } from \"react-icons\";\nimport {\n    FaPen,\n    FaRegTrashAlt,\n} from 'react-icons/fa';\nimport {\n    MIST_builtin_functions,\n    MIST_builtin_values,\n} from '../expertGlobals';\n\nfunction SidePanelCard(props) {\n\n    /**\n     * Makes a component draggable. Generates a key using the obj passed as well as\n     * and the function createKeyFromObj and an index using a index passed. \n     * If no function is passed, no key will be generated. \n     * \n     * @param {React component} component \n     * @param {Object} obj \n     * @param {Object} param3\n     */\n    const make_draggable = (component, obj,\n        { createKeyFromObj = () => null,\n            index = 0,\n        }) => (\n            <Draggable\n                draggableId={createKeyFromObj(obj)}\n                index={index}\n                key={createKeyFromObj(obj)}\n            >\n                {(provided) =>\n                    (<div\n                        {...provided.draggableProps}\n                        {...provided.dragHandleProps}\n                        ref={provided.innerRef}\n                    >\n                        {component}\n                    </div>)\n                }\n            </Draggable>\n        ) // make_draggable(Object,Object,Object)\n\n    /**\n     * Wraps a component in a Row react-bootstrap component. Generates a \n     * key using the obj passed and the function {createKeyFromObj}.\n     * If no function is passed, no key will be generated. \n     * \n     * @param {React component} component \n     * @param {Object} obj \n     * @param {Object} param3 \n     */\n    const wrap_in_row = (component, obj, { createKeyFromObj }) => (\n        <Row\n            key={createKeyFromObj(obj)}\n            style={{\n                justifyContent: \"space-between\",\n                marginBottom: '6px'\n            }}>\n            {component}\n        </Row>\n    ) // wrap_in_row(Object,Object,Object)\n\n    /**\n     * Adds an Overlay to a React Component. Creates the overlay using a\n     * createOverlayFromObj function and the obj passed. Also creates a \n     * key using a createKeyFromObj function and the obj passed. And\n     * determines placement using placement field passed.\n     * \n     * @param {React component} component \n     * @param {Object} obj \n     * @param {Object} param3 \n     */\n    const wrap_button_in_overlay = (component, obj, {\n        createKeyFromObj = () => null,\n        createOverlayFromObj = () => <Tooltip></Tooltip> },\n    ) => (\n            <OverlayTrigger\n                container={props.expertRef}\n                key={createKeyFromObj(obj)}\n                placement='right'\n                overlay={(createOverlayFromObj(obj))}>\n                {component}\n            </OverlayTrigger>\n        )\n    // modify button function\n    const wrap_custom_icons = (button, obj) => {\n        const _warningMessage = 'You are about to delete the saved function ' + obj.name + '. Are you sure you want to continue?';\n        return (\n            <>\n                <Col>\n                    <IconContext.Provider\n                        value={{ style: { color: 'white', cursor: 'pointer' } }}\n                    >\n                        <div>\n                            <FaRegTrashAlt onClick={() => {\n                                props.triggerPopup({\n                                    message: _warningMessage,\n                                    onConfirm: () => props.deleteFunction(obj.name),\n                                });\n                            }} />\n                        </div>\n                    </IconContext.Provider>\n                </Col>\n                <Col xs={6} padding={0}>\n                    {button}\n                </Col>\n                <Col>\n                    <IconContext.Provider\n                        value={{ color: 'white', style: { cursor: 'pointer' } }}\n                    >\n                        <div>\n                            <FaPen onClick={() => props.loadSavedFunction(obj.name)} />\n                        </div>\n                    </IconContext.Provider>\n                </Col>\n            </>)\n    }\n\n    function createButtons(objects, specifiedKeys = null, { button_name, insert_text, wrap_button = (button) => button }) {\n        let keys = specifiedKeys || Object.keys(objects).sort();\n        return (\n            keys.map((obj, idx) => {\n                return wrap_button(\n                    <Button\n                        block\n                        className='insertButton'\n                        variant='dark'\n                        key={idx}\n                        onClick={() => { insertText(insert_text(objects[obj])) }}>\n                        {button_name(objects[obj])}\n                    </Button>,\n                    objects[obj],\n                    idx\n                )\n            }))\n    }\n\n    /**\n    * Insert text into the code field.\n    */\n    function insertText(text) {\n        // Code based on\n        //   http://stackoverflow.com/questions/1064089/inserting-a-text-where-cursor-is-using-javascript-jquery\n        const code = document.getElementById('code-editor');\n        if (document.selection) {\n            code.focus();\n            var sel = document.selection.createRange();\n            sel.text = text;\n            code.focus();\n        }\n        else if (code.selectionStart || code.selectionStart === 0) {\n            var startPos = code.selectionStart;\n            var endPos = code.selectionEnd;\n            var scrollTop = code.scrollTop;\n            code.value = code.value.substring(0, startPos) + text + code.value.substring(endPos, code.value.length);\n            code.focus();\n            code.selectionStart = startPos + text.length;\n            code.selectionEnd = startPos + text.length;\n            code.scrollTop = scrollTop;\n            // update state\n            props.setCode(code.value);\n        }\n        else {\n            code.value += text;\n            code.focus();\n            // update state\n            props.setCode(code.value);\n        }\n    } // insertText(txt)\n\n    const onDragEnd = result => {\n        const { destination, source, draggableId } = result;\n        if (destination && source.droppableId === 'user_defined_functions') {\n            const new_index = result.destination.index;\n            const old_index = result.source.index;\n            const old_order = props.getFunctions();\n            const new_order = Array.from(old_order);\n            new_order.splice(old_index, 1);\n            new_order.splice(new_index, 0, draggableId);\n            props.setFunctionsOrder(new_order);\n        }\n    }\n    return (\n        <Card className='scroll panel'>\n            {console.log('rendering sidepanelcard')}\n            <Card.Body>\n                <Card.Title style={{ color: 'white' }}>WS Functions</Card.Title>\n                <DragDropContext onDragEnd={onDragEnd}>\n                    <Droppable\n                        droppableId='user_defined_functions'\n                    >\n                        {(provided) => (\n                            <Container ref={provided.innerRef}\n                                {...provided.droppableProps}>\n                                {\n                                    createButtons(props.getStateFunctions(), props.getFunctions(), {\n                                        button_name: object => object.name,\n                                        insert_text: object => (object.name + ((object.params.length === 0) ? '' : '(' + object.params + ')')),\n                                        wrap_button: (button, object, idx) => (\n                                            make_draggable(wrap_in_row(\n                                                wrap_custom_icons(\n                                                    wrap_button_in_overlay(button, object,\n                                                        {\n                                                            createKeyFromObj: object => object.name,\n                                                            createOverlayFromObj: object => (<Tooltip>{object.about}<hr />{(object.name + '(' + object.params + ')')}</Tooltip>)\n                                                        }),\n                                                    object),\n                                                object,\n                                                { createKeyFromObj: object => object.name }\n                                            ), object, {\n                                                createKeyFromObj: object => object.name,\n                                                index: idx\n                                            })\n                                        )\n                                    })\n                                }\n                                {provided.placeholder}\n                            </Container>\n                        )}\n                    </Droppable>\n                    <hr style={{ backgroundColor: 'white' }} />\n                    <Container>\n                        {\n                            createButtons(MIST_builtin_functions, null, {\n                                button_name: object => object.display,\n                                insert_text: object => (object.display + '(' + object.params + ')'),\n                                wrap_button: (button, object, idx) => (\n                                    wrap_in_row(\n                                        wrap_button_in_overlay(button, object,\n                                            {\n                                                createKeyFromObj: object => object.name,\n                                                createOverlayFromObj: object => (<Tooltip>{object.about}<hr />{(object.display + '(' + object.params + ')')}</Tooltip>)\n                                            }),\n                                        object,\n                                        { createKeyFromObj: object => object.name }\n                                    )\n                                )\n                            })\n                        }\n                    </Container>\n                    <hr style={{ backgroundColor: 'white' }} />\n                    <Container>\n                        {\n                            createButtons(MIST_builtin_values, null, {\n                                button_name: object => object.name,\n                                insert_text: object => object.name,\n                                wrap_button: (button, object, idx) => (\n                                    wrap_in_row(\n                                        wrap_button_in_overlay(button, object,\n                                            {\n                                                createKeyFromObj: object => object.name,\n                                                createOverlayFromObj: object => (<Tooltip>{object.about}</Tooltip>)\n                                            }),\n                                        object,\n                                        { createKeyFromObj: object => object.name }\n                                    )\n                                )\n                            })\n                        }\n                    </Container>\n                </DragDropContext>\n            </Card.Body>\n        </Card>\n    )\n}\n\nSidePanelCard.propTypes = {\n    getFormState: PropTypes.func.isRequired,\n    getStateFunctions: PropTypes.func.isRequired,\n    getFunctions: PropTypes.func.isRequired,\n}\n\nexport default SidePanelCard;","/**\n * MIST is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\n// +-------+------------------------------------------------------------------------\n// | Notes |\n// +-------+\n/**\n * 2020-07-24 Version 1.0\n * \n * Here we have two constants where we store the initial state of the function form\n * and the initial state of the Popup Modal. These objects should be readOnly. Thus,\n * we only export getter functions which return objects with the same key-value\n * assignments.\n */\n\n/**\n * The initial state of the function form\n */\nconst initialForm = {\n    code: \"\",\n    default_params: \"\",\n    description: \"\",\n    message: \"\",\n    name: \"\",\n    params: \"\",\n}\n\nconst initialMacros = {\n    _order: [],\n}\n\n/** \n * The initial state of the Popup\n */\nconst initialPopup = {\n    isOpen: false,\n    message: 'STUB',\n    onConfirm: () => { console.log('STUB') },\n}\n\n\n/**\n * The returns an object identical to initialForm\n */\nexport function getInitialForm() {\n    return {\n        ...initialForm\n    }\n} // getInitialForm()\n\n/**\n * This returns an object identical to initialMacros\n */\nexport function getInitialMacros() {\n    return {\n        ...initialMacros\n    }\n}\n\n/**\n * This returns an object identical to initialPopup\n */\nexport function getInitialPopup() {\n    return {\n        ...initialPopup,\n    }\n}\n\n/**\n * The returns an object identical that represents the intended initial state of\n * the Expert Component.\n */\nexport function getInitialState() {\n    return {\n        form: {\n            ...initialForm,\n        },\n        functions: {\n            _order: [],\n        },\n        popup: {\n            ...initialPopup,\n        }\n    }\n} // getInitialState()\n","/**\n * MIST is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\n// +-------+------------------------------------------------------------------------\n// | Notes |\n// +-------+\n/**\n * 2020-07-24 Version 1.0\n *\n * index.js\n * This is the main file used to create the MIST expert page located at the /expert\n * route. \n * \n * Basic Layout: \n * \n * Working Definitions: \n * 1. Function\n * \n * 2. Workspace\n * \n * Here we build the Expert component which manages the state of the form on\n * the expert page as well as the function-macros defined by the user. We divide the\n * page into the React Components: Menu, SidePanelCard, WorkspaceCard, CanvasCard;\n * whose corresponding files are located in './components'. We go into more detail\n * of each Component in the list below as well as in the Notes Headers of the respective\n * files.\n * \n * 1. Menu\n * \n * 2. SidePanelCard\n * \n * 3. WorkspaceCard\n * \n * 4. CanvasCard\n * \n * \n * We also rely on a Popup Component, whose contents will be modified at\n * shown whenever a popup is needed via the triggerPopup() function.\n * \n * The initialState of th Expert Component is stored under './initial-state.js\n * \n * We handle macros using the expand_macros function from the './macros' module.\n * \n * We keep track of following states using React hooks:\n * popup, form, macros, rendering_code\n * \n * We define a workspace to be both the contents of the form wherein we allow the \n * users to write their functions or write code that renders into an image. Thus,\n * it is the object { form: object, functions: object} where the object corresponding\n * to 'form' is the hook 'form' and the object corresponding 'functions' is the hook macros.\n * \n * Our definition of workspace had changed overtime, at first it only meant the contents\n * of the 'function form' which is why the central panel is named WorksapceCard; we should\n * rename this file and component in the future. \n * \n */\n\nimport '../design/styleSheets/expert.css';\nimport CanvasCard from './components/CanvasCard';\nimport Menu from './components/Menu';\nimport Popup from './components/Popup';\nimport WorkspaceCard from './components/WorkspaceCard';\nimport SidePanelCard from './components/SidePanelCard';\nimport { getInitialForm, getInitialMacros, getInitialPopup, } from './initial-state';\nimport expand_macros from './macros';\nimport React, { createRef, useEffect, useState } from 'react';\nimport ResizablePanels from \"resizable-panels-react\";\n\n// +---------------------------------\n// | Expert |\n// +--------+\nfunction Expert(props) {\n    const codeRef = createRef(\"code\");\n    const expertRef = createRef(\"expert\");\n\n    // +-------+------------------------------------------------------------------------\n    // | Popup |\n    // +-------+\n    const [popup, setPopup] = useState(getInitialPopup());\n\n    /**\n     * Opens and Closes the current Popup \n     * */\n    const togglePopup = () => {\n        setPopup({\n            ...popup,\n            isOpen: !popup.isOpen,\n        })\n    }\n\n    /**\n     * Opens a popup with the given message and a specific confirmation action\n     * @param {*} param0 \n     */\n    const triggerPopup = ({ footer = true, message, onConfirm, title = 'Warning' }) => {\n        setPopup({\n            ...popup,\n            footer: footer,\n            isOpen: !popup.isOpen,\n            message: message,\n            title: title,\n            onConfirm: onConfirm,\n        })\n    }\n\n    // +------+------------------------------------------------------------------------\n    // | Form |\n    // +------+\n    const [form, setForm] = useState(getInitialForm());\n    // For when we have a Link to the Expert UI from the GUI ready\n    useEffect(() => {\n        if (props.location && props.location.state && props.location.state.code) {\n            setForm({\n                ...getInitialForm(),\n                code: props.location.state.code,\n            })\n        }\n    }, [props.location])\n    /**\n     * Resets the form to the initial state\n     */\n    const resetForm = () => {\n        setForm(getInitialForm);\n    }\n\n    /** \n     * Returns true if the form is in use, false otherwise\n     */\n    const isFormInUse = () => {\n        const initialForm = getInitialForm();\n        let inUse = false;\n        Object.keys(form).forEach(field => {\n            if (form[field] !== initialForm[field]) {\n                inUse = true;\n                return;\n            }\n        })\n        return inUse;\n    }\n\n\n    /**\n     * Loads the object (functionToLoad) into the form\n     */\n    const loadFunctionToForm = (functionToLoad) => {\n        const fun = { ...functionToLoad };\n        if (Array.isArray(fun.params)) {\n            fun.params = fun.params.toString();\n        }\n        setForm(fun);\n    }\n\n    /**\n     * Returns a value from the form corresponding to the key str\n     */\n    const getFormValue = (str) => {\n        return form[str]\n    }\n\n    /**\n     * Sets a field in the form\n     */\n    const setFormValue = (key, to) => {\n        setForm({\n            ...form,\n            [key]: to,\n        })\n    }\n\n    // +--------+------------------------------------------------------------------------\n    // | Macros |\n    // +--------+\n    const [macros, setMacros] = useState(getInitialMacros());\n\n    /**\n     * Saves a user defined function to be resused in the workspace\n     * @param {Object} new_function \n     */\n    const addFunctionToState = (new_function) => {\n        const new_function_name = Object.keys(new_function)[0];\n        const new_order = [...macros._order.filter(name => name !== new_function_name), new_function_name];\n        const new_macros = Object.assign({}, macros, { _order: new_order }, new_function);\n        setMacros(new_macros);\n    } // addFunctionToState(Object)\n\n    /**\n     * Wrapper that adds checks before saving a user definde function \n     */\n    const addUserDefinedFunction = () => {\n        const funct = form;\n        const name = funct.name;\n        const code = funct.code;\n\n        if (name && code) {\n            let params;\n            if (funct.params)\n                params = funct.params.replace(/\\s/g, \"\").split(\",\");\n            else\n                params = [];\n            try {\n                // try expanding the code\n                expand_macros(code, macros);\n                // if no error then...\n                const about = funct.description;\n                const new_function =\n                {\n                    name: name,\n                    about: about,\n                    params: params,\n                    code: code,\n                };\n\n                addFunctionToState({ [name]: new_function });\n            }\n            catch (error) {\n                setFormValue('message', error);\n            }\n\n        } else {\n            alert('We need both name and code filled out!')\n        }\n    } // addUserDefinedFunction()\n\n    /**\n     * Reorders the macros\n     * @param {Array} order \n     */\n    const setFunctionsOrder = (order) => {\n        setMacros({\n            ...macros,\n            _order: order,\n        })\n    }\n\n    /**\n     * Removes the user defined function by the name fun_name\n     */\n    const deleteFunction = (fun_name) => {\n        const new_macros = { ...macros, _order: macros._order.filter((name) => name !== fun_name) }\n        delete macros[fun_name];\n        setMacros(new_macros)\n    }\n    // +-----------+------------------------------------------------------------------------\n    // | Workspace |\n    // +-----------+\n\n    /**\n     * Saves a workspace to the authenticated user's account \n     */\n    const _save = (workspace) => {\n        fetch('api/', {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json',\n            },\n            body: JSON.stringify({ action: 'saveexpertws', workspace: (workspace) })\n        })\n            .then(response => response.json())\n            .then(data => {\n                if (data.success) {\n                    alert('Expert-Workspace ' + workspace.name + ' has been successfully saved!');\n                } else {\n                    alert('We failed to save because of ' + data.message);\n                }\n            })\n            .catch(error => alert('We failed to save because of Error: ' + error))\n    }\n\n    /**\n     * Wrapper that checks the if the user already has an expert workspace\n     * of the given name and triggers a popup that asks for confirmation\n     * for overwrite.\n     * \n     * @param {String} name \n     */\n    const saveWSToUser = (name) => {\n        // build the expert_workspace to save\n        const workspace = { functions: macros, form: form, name: name };\n        console.log(form)\n        console.log(macros)\n        console.log(getCurrentWorkspace())\n        // build the url\n        let url = \"api/?action=expertwsexists&name=\" + name;\n        fetch(url)\n            .then((res) => res.json())\n            .then((data) => {\n                if (data.success) {\n                    if (data.hasWorkspace) {\n                        triggerPopup({\n                            message: 'You are about to overwrite the workspace: ' + name + '. Click confirm to continue.',\n                            onConfirm: () => { _save(workspace) }\n                        })\n                    } else {\n                        _save(workspace);\n                    }\n                } else {\n                    alert(data.message);\n                }\n            })\n            .catch(error => { alert('Failed due to ' + error); console.log(error) })\n\n    }\n\n    /**\n     * Delete a workspace\n     */\n    const _deleteExpertWorkspace = (name) => {\n        fetch('api/', {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json',\n            },\n            body: JSON.stringify({ action: 'deleteexpertws', name: name })\n        })\n            .then(response => response.json())\n            .then(data => {\n                if (data.success) {\n                    alert('Expert-Workspace ' + name + ' has been successfully deleted!');\n                } else {\n                    alert('We failed to delete because of ' + data.message);\n                }\n            })\n            .catch(error => alert('We failed to delete because of Error: ' + error))\n    }\n\n    /** \n     * Loads a user's expert workspaces\n     */\n    const getUserExpertWS = async () => {\n        return (\n            fetch('/api?action=getUserExpertWS')\n                .then(res => res.json())\n                .then(data => data)\n                .catch(error => { alert('Failed due to ' + error); console.log(error) }))\n    }\n\n    /**\n     * Loads the stored user-saved functions (while preserving order) and the stored form\n     * values stored in workspaceToLoad.\n     * \n     * @param {Object} workspaceToLoad, whose keys matches the initialState object found in\n     * './initial-state.js' \n     */\n    const loadWorkspace = (workspaceToLoad) => {\n        setForm(workspaceToLoad.form);\n        setMacros(workspaceToLoad.functions);\n    } // loadWorkspace(Object)\n\n    /**\n     * Resets the workspace to initial values\n     */\n    const resetWorkspace = () => {\n        setForm(getInitialForm());\n        setMacros(getInitialMacros());\n    }\n\n    /**\n     * Return true if the workspace is in use, false otherwise.\n     */\n    const isWorkspaceInUse = () => {\n        return isFormInUse() || (macros._order.length !== 0);\n    }\n\n    /**\n     * Returns the current workspace\n     */\n    const getCurrentWorkspace = () => {\n        return ({\n            functions: macros,\n            form: form,\n        })\n    }\n\n    /**\n     * Rendering code: This should always contain valid MIST Code\n     */\n    const [rendering_code, setRenderingCode] = useState('');\n\n    return (\n        <div id='expert' ref={expertRef} >\n            {console.log('rendering expert')}\n            <Popup\n                {...popup}\n                onClose={togglePopup}\n            />\n            <Menu\n            \n                getCurrentWorkspace={getCurrentWorkspace}\n                getUserExpertWS={getUserExpertWS}\n                isWorkspaceInUse={isWorkspaceInUse}\n                loadWorkspace={loadWorkspace}\n                resetWorkspace={resetWorkspace}\n\n                requestFullscreen={() => {\n                    expertRef.current.requestFullscreen()\n                }}\n                exitFullscreen={() => document.exitFullscreen()}\n\n                deleteWorkspace={_deleteExpertWorkspace}\n                saveWorkspace={saveWSToUser}\n\n                togglePopup={togglePopup}\n                triggerPopup={triggerPopup}\n\n                rendering_code={rendering_code}\n            />\n\n            <ResizablePanels\n                bkcolor=\"#353b48\"\n                displayDirection=\"row\"\n                width=\"100%\"\n                height=\"100vh\"\n                panelsSize={[15, 43, 42]}\n                sizeUnitMeasure=\"%\"\n                resizerSize=\"10px\"\n            >\n                <SidePanelCard\n                    deleteFunction={deleteFunction}\n                    expertRef={expertRef}\n                    getFormState={() => form}\n                    getStateFunctions={() => macros}\n                    getFunctions={() => macros._order}\n                    loadSavedFunction={(fun_name) => loadFunctionToForm(macros[fun_name])}\n                    setCode={txt => { setFormValue('code', txt) }}\n                    setFunctionsOrder={order => setFunctionsOrder(order)}\n\n                    triggerPopup={triggerPopup}\n                />\n\n                <WorkspaceCard\n\n                    addUserDefinedFunction={addUserDefinedFunction}\n                    doesFunctionExist={(fun_name) => (fun_name in macros)}\n\n                    clearFunction={resetForm}\n                    getCurrentWorkspace={getCurrentWorkspace}\n                    loadFunction={loadFunctionToForm}\n                    functions={macros._order}\n\n                    code={getFormValue('code')}\n                    codeRef={codeRef}\n                    description={getFormValue('description')}\n                    expertRef={expertRef}\n                    name={getFormValue('name')}\n                    message={getFormValue('message')}\n                    params={getFormValue('params')}\n                    default_params={getFormValue('default_params')}\n                    setCode={(code) => setFormValue(\"code\", code)}\n                    setDescription={(description) => setFormValue(\"description\", description)}\n                    setDefaultParams={(default_params) => setFormValue(\"default_params\", default_params)}\n\n                    setName={(name) => setFormValue(\"name\", name)}\n                    setParams={(params) => setFormValue(\"params\", params)}\n\n                    triggerPopup={triggerPopup}\n                />\n                <CanvasCard\n                    code={getFormValue('code')}\n                    default_params={getFormValue('default_params')}\n                    expertRef={expertRef}\n                    getFormState={() => form}\n                    getStateFunctions={() => macros}\n                    params={getFormValue('params')}\n                    setMessage={(message) => setFormValue(\"message\", message)}\n                    setRenderingCode={setRenderingCode}\n                />\n            </ResizablePanels>\n\n        </div>)\n}\nexport default Expert;","// +-------+------------------------------------------------------------------------\n// | Notes |\n// +-------+\n/*\n * faq.js\n * \n * This exports the FAQ (frequently asked questions) page.\n\n * Copyright (c) 2020 Samuel A. Rebelsky and the people who did the work.\n * This work is licenced under a LGLP 3.0 or later .....\n */\n// +-------------------+----------------------------------------------------------------------\n// | IMPORTS           |\n// +-------------------+\n\nimport React from 'react';\nimport \"./../design/styleSheets/styles.css\";\nimport \"./../design/styleSheets/about.css\";\nimport { Container } from 'react-bootstrap';\n\n//FAQ about MIST; with links to forms to report bugs, \n//request features, and how to reach MIST admin\nconst Faq = () => {\n    return (\n        <Container fluid className=\"clear:left;\">\n        <h2>FAQ</h2>\n        <dl>\n          <dt>\n            What can I do on this site?\n          </dt>\n          <dd>\n            <ul>\n              <li>Browse interesting images in the galleries.</li>\n              <li>Create interesting images yourself using the gui. </li>\n              <li>Challenge yourself to figure out how to make the images that appear in the challenges section.</li>\n            </ul>\n          </dd>\n          <dt>\n            Where can I find the bug report form?\n          </dt>\n          <dd>\n            Here's <a href=\"https://docs.google.com/forms/d/1TrMg8uoYFa1JJYR4qRAxX396gGW46UazTnU_Z23eQm8/viewform\">the bug report form</a>.\n          </dd>\n          <dt>\n            Where can I find the feature request form?\n          </dt>\n          <dd>\n            Here's <a href=\"https://docs.google.com/forms/d/1vWQcSE6oU-yiM0CWk-q55aBj6Ec8zTRTepUlKdbPdog/viewform\">the feature request form</a> .\n          </dd>\n          <dt>\n            What should I do if I have other questions?\n          </dt>\n          <dd>\n            Send us mail at <a href='mailto:MIST@grinnell.edu'>MIST@grinnell.edu</a>!\n          </dd>\n          <dt>\n            Why are you using a self-signed certificate for https?\n          </dt>\n          <dd>\n            We haven't had time to get a reasonable certificate.\n          </dd>\n        </dl>\n      </Container>\n    );\n}\n \nexport default Faq;\n","// +-------+------------------------------------------------------------------------\n// | Notes |\n// +-------+\n\n/******************************************************************************\n* displayImages.js provides Gallery, ImageView, and ModalView settings\n* for viewing images. We expect to call use these settings on both the\n* Gallery page and on the Profile/Images page.\n* \n* TABLE OF CONTENTS:\n*   1.  Imports:\n*          --react, react-dom-router, react-bootstrap, react-icon, images\n*   2.  Router & Switches:\n*          --displayImages.js pulls up the page to match the URL:\n*               (a) the Gallery\n*               (b) ImageView, a new page based on the image's ID\n*               (c) ImageModal, the overlay modal based on the image's ID * \n*   3.  Main Gallery (Gallery)\n*   4.  New Page Modal (ImageView)\n*   5.  Overlay Modal (ImageModal)\n*   6.  Additional components (icons, comments)\n*********************************************************************************/\n\n// +---------+----------------------------------------------------------------------\n// | Imports |\n// +---------+\n\nimport MISTImage from \"./MISTImageGallery\"\nimport React, { useState, useRef, useEffect } from \"react\";\nimport {\n  Card, Button, Pagination, Container, Row,\n  Col, Nav, NavDropdown, Popover, Overlay, Form,\n  Modal, OverlayTrigger, Dropdown\n} from \"react-bootstrap\";\nimport { AiOutlineStar } from \"react-icons/ai\";\nimport { BsClock } from \"react-icons/bs\";\nimport {\n  FaRegShareSquare, FaRegComments, FaFacebook,\n  FaSnapchat\n} from \"react-icons/fa\";\nimport { FiSave, FiCode, FiSend, FiMoreHorizontal } from \"react-icons/fi\";\nimport { TiSocialInstagram } from \"react-icons/ti\";\nimport {\n  BrowserRouter as Router, Switch, Route, Link,\n  useHistory, useLocation, useParams\n} from \"react-router-dom\";\nimport \"../../design/styleSheets/gallery.css\";\nimport TimeAgo from 'javascript-time-ago'\nimport en from 'javascript-time-ago/locale/en'\nTimeAgo.addLocale(en)\n\n/* Note: We'll eventually need to add BsViewStacked\nand BsLayout Split as imports. They will \nallow users to change views on the overlay modal. */\n\n// +---------+----------------------------------------------------------------------\n// | Routers |\n// +---------+\n\n/** DisplayImages returns the router and ModalSwitch.\n *  Note: We should keep DisplayImages() and ModalSwitch() as \n *  two separate functions. Combining them creates issues\n *  with transitioning between the Gallery and Modal View.\n*/\nexport default function DisplayImages(props) {\n  return (\n    <Router>\n      <ModalSwitch cards={props.cards} />\n    </Router>\n  );\n}\n\n/** ModalSwitch calls the relevant page based on the URL */\nfunction ModalSwitch(props) {\n  let location = useLocation();\n\n  /* This piece of state is set when one of the gallery links is clicked.\n  // The `background` state is the location that we were at when one of\n  // the gallery links was clicked. If it's there, use it as the location\n  // for the <Switch> so we show the gallery in the background. */\n  let background = location.state && location.state.background;\n\n  return (\n    <div>\n      <Switch location={background || location}>\n        <Route path=\"/gallery\" children={<Gallery cards={props.cards} />} />\n        <Route path=\"/gallery/random\" children={<Gallery cards={props.cards} />} />\n        <Route path=\"/gallery/featured\" children={<Gallery cards={props.cards} />} />\n        <Route path=\"/gallery/top-rated\" children={<Gallery cards={props.cards} />} />\n        <Route path=\"/gallery/recent\" children={<Gallery cards={props.cards} />} />\n        <Route path=\"/profile\" children={<Gallery cards={props.cards} />} />\n        <Route path=\"/img/:id\" children={<ImageView cards={props.cards} />} />\n      </Switch>\n\n      {/* Show the modal when a background page is set. */}\n      {background && <Route path=\"/img/:id\" children={<ImageModal cards={props.cards} />} />}\n    </div>\n  );\n}\n\n// +---------+----------------------------------------------------------------------\n// | Gallery |\n// +---------+\n\n/**\n * The Gallery returns a set of cards and the pagination\n *    -- normally, gallery is displayed when displayImages is called.\n *  \n * It takes in the cards array, \n * and calls it on the header, image, and body component of the card\n */\nfunction Gallery(props) {\n  let cards = props.cards;\n  let location = useLocation();\n\n  return (\n    /* styling helps with footer */\n    <Container style={{ marginTop: \"2vh\", marginBottom: \"0\", paddingBottom: \"7.5rem\" }}>\n      <Row style={{ justifyContent: \"space-between\" }}>\n        {/* maps each array in the cards array */}\n        {cards.map((card) => (\n          <Card style={{ padding: \"1em\", width: \"30%\", margin: \"1em\" }}>\n            <CardHeader card={card} />\n            <CardImage card={card} />\n            <CardBody card={card} />\n          </Card>\n        ))}\n        {/* pagination */}\n        <PageCounter style={{ margin: \"auto\" }} />\n      </Row>\n    </Container>\n  );\n}\n\n/**\n * Displays the header of the card\n *    | title\n *    | clock sign (if animated)\n *    | More Icon for Report and Hide\n * \n * takes in the information of one card\n */\nfunction CardHeader(props) {\n  return (\n    <Card.Header>\n      <Card.Title style={{ margin: \"auto\" }}>\n        <Row style={{ justifyContent: \"space-between\", alignItems: \"center\" }}>\n          {/* Title + Clock sign */}\n          <Col>\n            <p1>\n              {props.card.title}\n              {props.card.isAnimated ? (\n                <BsClock size={15} style={{ margin: \"1vh\" }} />\n              ) : (\"\")}\n            </p1>\n          </Col>\n          <MoreIcon />\n        </Row>\n\n      </Card.Title>\n    </Card.Header>\n  );\n}\n\n/**\n * Returns the MISTImage of a card\n * \n * Takes in the information of one card.\n */\nfunction CardImage(props) {\n  let location = useLocation();\n\n  return (\n    /* Setting up the pathname and background for overlay */\n    <Link\n      to={{\n        pathname: `/img/${props.card._id}`,\n        state: { background: location },\n      }}\n    >\n      <div variant=\"top\" >\n        <Row style={{ justifyContent: \"center\", marginTop: \"1em\" }}>\n          <MISTImage code={props.card.code} resolution=\"250\" />\n        </Row>\n      </div>\n    </Link>\n  );\n}\n\n/**\n * Returns the Body of a card\n *    | Username + Description\n *    | Icons\n *    | Write a Comment\n * \n * Takes in the information of one card.\n */\nfunction CardBody(props) {\n  let card = props.card;\n  return (\n    <Card.Body style={{ justifyContent: \"space-between\" }}>\n      <Col>\n\n        {/* Row 1: Username & Description */}\n        <Row style={{ justifyContent: \"space-between\" }}>\n          {/* USERNAME + description*/}\n          <div>\n            <Button variant=\"light\" href=\"/user\">\n              {card.userId.username}\n            </Button>\n            {card.caption}\n          </div>\n        </Row>\n\n        {/* Row 2: Icons */}\n        <Row style={{ justifyContent: \"space-between\", marginTop: \"1em\", }}>\n          <Nav.Link style={{ color: \"black\", display: \"inline-block\" }}>\n            <AiOutlineStar />\n            {card.ratings}\n          </Nav.Link>\n          <CodeIcon code={card.code} />\n          <SaveIcon />\n          <CommentIcon id={card._id} />\n          <ShareIcon />\n\n        </Row>\n\n        {/* Row 3: Comment Box */}\n        <MakeComment imageId={card._id} />\n      </Col>\n    </Card.Body>\n  );\n}\n\n/**\n * Returns the page counter\n */\nfunction PageCounter() {\n  return (\n    <Pagination className=\"pagination-style\">\n      <Pagination.First />\n      <Pagination.Prev />\n      <Pagination.Item active>{1}</Pagination.Item>\n      <Pagination.Ellipsis />\n\n      <Pagination.Item>{10}</Pagination.Item>\n      <Pagination.Item>{11}</Pagination.Item>\n      <Pagination.Item>{12}</Pagination.Item>\n      <Pagination.Item>{13}</Pagination.Item>\n\n      <Pagination.Ellipsis />\n      <Pagination.Item>{20}</Pagination.Item>\n      <Pagination.Next />\n      <Pagination.Last />\n    </Pagination>\n  );\n}\n\n// +---------+---------+------------------------------------------------------------\n// | Single Image Page |\n// +---------+---------+\n/**\n * This is being called when someone accesses an image through its URL\n * and not by clicking on a smaller version of it on a card\n * \n * Takes in the cards array.\n * \n * Col 1:\n *  | Row 1: title + image\n *  | Row 2: username\n *  | Row 3: Range to change resolution\n * \n * Col 2:\n *  | Comments\n */\nfunction ImageView(props) {\n  let { id } = useParams();\n  let card = props.cards.find(elem => elem._id === id);\n  if (!card) return <div>Image not found</div>;\n\n  return (\n    <Container style={{ width: \"65%\", justifyContent: \"center\", marginTop: \"1em\" }}>\n      <Col>\n        <Row>\n          <Col xs=\"4\">\n            <h1 style={{ fontSize: \"150%\", textAlign: \"left\" }} >{card.title}</h1>\n            <MISTImage code={card.code} resolution=\"300\" />\n            <Row>\n              <Button variant=\"light\" href=\"/user\">\n                {<b>{card.userId.username}</b>}\n              </Button>\n            </Row>\n            {/* change resolution */}\n            <Form>\n              <Form.Control type=\"range\" custom style={{ marginTop: \"1em\", width: \"100%\" }} />\n            </Form>\n          </Col>\n          {/* Comments */}\n          <Col xs=\"8\">\n            <ModalComments card={card} />\n          </Col>\n        </Row>\n      </Col>\n    </Container>\n  );\n}\n\n// +-------------+-----------------------------------------------------------\n// | Image Modal |\n// +-------------+\n\n/**\n * ImageModal is a overlay image view. \n * It appears when the image is clicked from the gallery.\n * \n * It takes in the array of cards\n */\n\n\nfunction ImageModal(props) {\n  let history = useHistory();\n  let { id } = useParams();\n  let card = props.cards.find(elem => elem._id === id);\n  const [modalShow] = React.useState(true);\n\n  if (!card) return null;\n  return (\n    <MyVerticallyCenteredModal\n      show={modalShow}\n      onHide={() => history.goBack()}\n      card={card}\n    />\n  );\n}\n\n/**\n * MyVerticallyCenteredModal returns the display portion of ImageModal.\n * \n * It takes in one card, show state, and onHide function\n */\n\nfunction MyVerticallyCenteredModal(props) {\n\n  let card = props.card;\n\n  return (\n    <Modal\n      {...props}\n      size=\"lg\"\n      aria-labelledby=\"contained-modal-title-vcenter\"\n      centered\n      style={{\n        width: \"100%\",\n      }}\n    >\n       {/* Modal Header: title + close button */}\n      <Modal.Header>\n        <Container>\n          <Modal.Title>{card.title}</Modal.Title>\n        </Container>\n        <Link to={{ pathname: \"/gallery\" }}>Close</Link>\n      </Modal.Header>\n\n      {/* Modal Body */}\n      <Container>\n        <SideView card={card} />\n      </Container>\n\n      {/* Modal Footer */}\n      <Modal.Footer style={{ minHeight: \"3em\" }}></Modal.Footer>\n    </Modal>\n  );\n}\n\n\n/**\n * SideView returns the main body of the modal view.\n * It places the image side by side with the comments.\n * \n * Takes in the information of a card\n */\nfunction SideView(props) {\n  let card = props.card;\n\n  return (\n    <Modal.Body>\n      <Row >\n        {/* Col 1: usernamame, image, caption, range*/}\n        <Col>\n          {/* username */}\n          <Button variant=\"light\" href=\"/user\">\n            {card.userId.username}\n          </Button>\n\n          {/* image */}\n          <Row style={{ justifyContent: \"center\", marginTop: \"1em\" }}>\n            <MISTImage code={card.code} resolution=\"250\" />\n          </Row>\n\n          {/* caption */}\n          <Row>\n            {card.caption}\n          </Row>\n\n          {/* range for resolution */}\n          <Form>\n            <Form.Control type=\"range\" custom style={{ marginTop: \"1em\" }} />\n          </Form>\n        </Col>\n\n        {/* Col 2: Comments*/}\n        <Col style={{ width: \"50%\" }}>\n          <div style={{ paddingLeft: \"1em\" }}></div>\n          <ModalComments card={card} />\n        </Col>\n\n      </Row>\n    </Modal.Body>\n  );\n}\n\n// +----------------+-----------------------------------------------------------\n// | Modal Comments |\n// +----------------+\n\n\nfunction ModalComments(props) {\n\n  const [comments, setComments] = useState([])\n\n  // fetch the comments for this image \n  useEffect(() => {\n    fetch('/api?action=getImageComments&id=' + props.card._id)\n      .then(req => req.json())\n      .then(comments => { setComments(comments); });\n  }, [comments])\n\n\n  return (\n    <Col>\n      <Form.Group >\n        {/* All existing comments */}\n        <Container style={{ overflowY: \"scroll\", height: \"40vh\" }}>\n          {comments.map((comment) => { return (\n            <Comment username={comment.userId.username} comment={comment.body} date={comment.createdAt} />\n          )})}\n        </Container>\n\n        {/* Horizontal Line */}\n        <hr />\n        {/* Icons and to make a comment field */}\n        <ModalIcons card={props.card} />\n        <MakeComment imageId={props.card._id} />\n\n      </Form.Group>\n    </Col>\n\n  );\n}\n\n/**\n * Allows users to write and submit comments.\n */\nfunction MakeComment(props) {\n  const [comment, setComment] = useState(\"\");\n\n  //Update the comment (state) as the user types it\n  const handleChange = (event) => {\n    const comment = event.target.value;\n    setComment(comment);\n  };\n\n  // When the user submits the comment, post to database\n  const handleSubmit = (event) => {\n    // prevent the page from refreshing \n    event.preventDefault();\n\n    // grab user information\n    fetch('/api?action=getUser', {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      credentials: 'include'\n    })\n      .then(res => res.json())\n      .then(user => {\n        if (user) {\n\n          console.log(\"user: \", user);\n          // build full comment\n          let fullcomment = {\n            \"active\": true,\n            \"flags\": [],\n            \"userId\": user._id,\n            \"body\": comment,\n            \"imageId\": props.imageId\n          };\n\n          //post comment\n          fetch('/api', {\n            method: 'POST',\n            headers: {\n              'Content-Type': 'application/json',\n            },\n            body: JSON.stringify({action:'postComment',...fullcomment})\n          })\n            //reset comment state\n            .then(setComment(\"\"))\n        }\n        else\n          alert(\"You must be logged in to make comments\")\n      })\n  };\n\n  return (\n    <Form onSubmit={handleSubmit}>\n      <Form.Row style={{\n        justifyContent: \"space-between\",\n        marginTop: \"1em\",\n      }}>\n        {/* Box to type comment in */}\n        <Col xs={10}>\n          <Form.Control\n            name=\"comment\"\n            as=\"textarea\"\n            rows=\"1\"\n            placeholder=\"Type comment here\"\n            value={comment}\n            onChange={handleChange}\n          />\n        </Col>\n\n        {/* Send message button */}\n        <Col>\n          <Button variant=\"light\" type=\"submit\">\n            <FiSend style={{ color: \"black\" }} />\n          </Button>\n        </Col>\n\n      </Form.Row>\n    </Form>\n  );\n}\n\n/* Example comment */\nexport function Comment(props) {\n\n  function convertTime(date) {\n    const timeAgo = new TimeAgo('en-US')\n    if (typeof date === 'string')\n      date = parseInt(date);\n    return timeAgo.format(date);\n  }\n\n  return (\n\n    <Row>\n      <Card style={{ width: \"100%\", margin: \"0.5vh\" }}>\n        <Card.Body style={{\n          display: \"flex\",\n          flexFlow: \"row nowrap\",\n          justifyContent: \"space-around\",\n          alignItems: \"center\",\n        }}>\n          <div style={{\n            display: \"flex\",\n            flexFlow: \"column nowrap\",\n            justifyContent: \"flex-start\"\n          }}>\n            <Button size=\"sm\" variant=\"light\" href=\"/user\" style={{ alignSelf: \"flex-start\" }}>\n              {props.username}\n            </Button>\n            <div style={{ fontSize: \"15px\" }}>\n              {convertTime(props.date)}\n            </div>\n          </div>\n          <div style={{ flexGrow: \"2\", paddingLeft: \"15px\", fontSize: \"18px\" }}>\n            {props.comment}\n          </div>\n          <MoreIcon />\n        </Card.Body>\n      </Card>\n    </Row>\n  );\n}\n\n// +-------------+-----------------------------------------------------------\n// | Icons       |\n// +-------------+\n\nfunction ModalIcons(props) {\n\n  let card = props.card;\n\n  return (\n    <Row style={{ justifyContent: \"flex-start\" }}>\n      {/* Rating */}\n      {/** need to add that onClick,\n       *      if signed in, the star changes to a filled version of it,\n       *      else, alerts that \"please sign in\" and a sign in option in */}\n\n      <Nav.Link style={{ color: \"black\", display: \"inline-block\" }}>\n        <AiOutlineStar />\n        {card.ratings}\n      </Nav.Link>\n\n      <CodeIcon code={card.code} />\n      <SaveIcon />\n      <ShareIcon />\n      <MoreIcon />\n    </Row>\n  );\n}\n\n/* Code Icon */\nfunction CodeIcon(props) {\n  const [show, setShow] = useState(false);\n  const [target, setTarget] = useState(null);\n  const ref = useRef(null);\n\n  const handleClick = (event) => {\n    setShow(!show);\n    setTarget(event.target);\n  };\n\n  return (\n    <div ref={ref}>\n      <Nav.Link onClick={handleClick} style={{ color: \"black\", paddingLeft: \"0\", paddingRight: \"0\" }}>\n        <FiCode />\n      </Nav.Link>\n      <Overlay\n        show={show}\n        target={target}\n        placement=\"bottom\"\n        container={ref.current}\n        containerPadding={20}\n      >\n        <Popover id=\"popover-contained\">\n          <Popover.Title as=\"h3\" title={\"<FiCode/>\"}></Popover.Title>\n          <Popover.Content>\n            <Container>{props.code}</Container>\n            <Row style={{ justifyContent: \"flex-end\" }}>\n              <Nav.Link style={{ color: \"black\" }} > Copy</Nav.Link>\n            </Row>\n          </Popover.Content>\n        </Popover>\n      </Overlay>\n    </div>\n  );\n}\n\n/* Comment Icon */\nfunction CommentIcon(props) {\n  let location = useLocation();\n  return (\n    <Link\n      to={{\n        pathname: `/img/${props.id}`,\n        // This is the trick! This link sets\n        // the `background` in location state.\n        state: { background: location },\n      }}\n      style={{ paddingTop: \"0.5em\" }}\n    >\n\n      <FaRegComments\n        style={{ color: \"black\", display: \"inline-block\" }}\n      />\n\n    </Link>\n  )\n}\n\n/* More Icon */\n//... = hide, block, report\nfunction MoreIcon() {\n\n  function hide() {\n    alert(\"You have hidden this content and will no longer see it again.\")\n  }\n\n  let hidePopover = (\n    <Popover id=\"popover-basic\">\n      <Popover.Content>\n        This content will be hidden from you.\n    </Popover.Content>\n    </Popover>\n  );\n\n  let reportPopover = (\n    <Popover id=\"popover-basic\">\n      <Popover.Content>\n        Report this content.\n    </Popover.Content>\n    </Popover>\n  );\n\n  return (\n    <Dropdown>\n      <Dropdown.Toggle variant=\"light\" >\n        {<FiMoreHorizontal />}\n      </Dropdown.Toggle>\n      <Dropdown.Menu>\n        {/* Hide */}\n        <Dropdown.Item>\n          <OverlayTrigger trigger=\"hover\" placement=\"right\" overlay={hidePopover}>\n            <Button variant=\"light\" onClick={() => hide()}>Hide</Button>\n          </OverlayTrigger>\n        </Dropdown.Item>\n\n        {/* Report */}\n        <Dropdown.Item href=\"/report\">\n          <OverlayTrigger trigger=\"hover\" placement=\"right\" overlay={reportPopover}>\n            <Button variant=\"light\">Report</Button>\n          </OverlayTrigger>\n        </Dropdown.Item>\n      </Dropdown.Menu>\n    </Dropdown>\n  )\n\n}\n\n/* Share Icon */\nfunction ShareIcon() {\n  return (\n    <Nav >\n      <NavDropdown title={<FaRegShareSquare />} id=\"nav-dropdown\">\n        {/* Facebook */}\n        <NavDropdown.Item eventKey=\"4.1\">\n          {\" \"}\n          <FaFacebook /> Facebook\n        </NavDropdown.Item>\n\n        {/* Instagram */}\n        <NavDropdown.Item eventKey=\"4.2\">\n          <TiSocialInstagram /> Instagram\n        </NavDropdown.Item>\n\n        {/* Snapchat */}\n        <NavDropdown.Item eventKey=\"4.3\">\n          {\" \"}\n          <FaSnapchat /> Snapchat\n        </NavDropdown.Item>\n      </NavDropdown>\n    </Nav>\n  );\n}\n\n\n/* Save Icon */\nfunction SaveIcon() {\n  return (\n    <Nav>\n      <NavDropdown title={<FiSave />} id=\"nav-dropdown\">\n        <NavDropdown.Item eventKey=\"4.1\">as image</NavDropdown.Item>\n        <NavDropdown.Item eventKey=\"4.2\"> as video</NavDropdown.Item>\n      </NavDropdown>\n    </Nav>\n  );\n}","// +-------+------------------------------------------------------------------------\n// | Notes |\n// +-------+\n/*\n * gallery.js\n * \n * This exports the gallery pages (featured, random, toprated, recent).\n * It calls displayImages.js in order to display the images and the pagination.\n * Currently no buttons to switch pages, but the code for the pages is there.\n *\n * Copyright (c) 2020 Samuel A. Rebelsky and the people who did the work.\n * This work is licenced under a LGLP 3.0 or later .....\n *\n */\n\n// +-------------+----------------------------------------------------------------------\n// | Imports     |\n// +-------------+\nimport React, { useState, useEffect } from \"react\";\nimport DisplayImages from \"./components/displayImages\";\nimport { Button } from 'react-bootstrap';\n\n\nexport default function Gallery() {\n\n  const [cards, setCards] = useState([]);\n  const [cardsLoaded, setCardsLoaded] = useState(false);\n\n  // grab the category based on which page they are\n  // this grabs the word after the last slash in the url\n  const category = (window.location.href).split('/').slice(-1)[0];\n\n  // fetch the images, depending on what category is selected\n  useEffect(() => {\n    switch (category) {\n      case 'recent':\n        fetch('/api?action=getRecentImages')\n          .then(req => req.json())\n          .then(cards => { setCards(cards); setCardsLoaded(true) });\n        break;\n      case 'top-rated':\n        fetch('/api?action=getTopImages')\n          .then(req => req.json())\n          .then(cards => { setCards(cards); setCardsLoaded(true) });\n        break;\n      case 'featured':\n        fetch('/api?action=getFeaturedImages')\n          .then(req => req.json())\n          .then(cards => { setCards(cards); setCardsLoaded(true) });\n        break;\n      default:\n        fetch('/api?action=getRandomImages')\n          .then(req => req.json())\n          .then(cards => { setCards(cards); setCardsLoaded(true) });\n    }\n  }, [category])\n\n  return (\n    <div style={{ marginTop: \"2vh\", marginBottom: \"0\", paddingBottom: \"7.5rem\" }}>\n      <h1>Gallery</h1>\n      <p>Get Inspired by others!</p>\n      < div style={{ display: \"flex\", justifyContent: \"center\", alignItems: \"center\" }}>\n        <Button variant=\"outline-dark\" href=\"/gallery/recent\">\n          Recent\n        </Button> &nbsp;&nbsp;&nbsp;\n        <Button variant=\"outline-dark\" href=\"/gallery/featured\">\n          Featured\n        </Button> &nbsp;&nbsp;&nbsp;\n        <Button variant=\"outline-dark\" href=\"/gallery/top-rated\">\n          Top Rated\n        </Button> &nbsp;&nbsp;&nbsp;\n        <Button variant=\"outline-dark\" href=\"/gallery/random\">\n          Random\n        </Button>\n      </div>\n      <DisplayImages cards={cards} cardsLoaded={cardsLoaded} />\n    </div>\n  );\n}","//This allows the buttons on the homepage to link to the create, tutorial, and other sections\n\n// file: /components/LinkButton.jsx\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { withRouter } from \"react-router\";\n\nconst LinkButton = (props) => {\n  const {\n    history,\n    location,\n    match,\n    staticContext,\n    to,\n    onClick,\n    // ⬆ filtering out props that `button` doesn’t know what to do with.\n    ...rest\n  } = props;\n  return (\n    <button\n      {...rest} // `children` is just another prop!\n      onClick={(event) => {\n        onClick && onClick(event);\n        history.push(to);\n      }}\n    />\n  );\n};\n\nLinkButton.propTypes = {\n  to: PropTypes.string.isRequired,\n  children: PropTypes.node.isRequired,\n};\n\nexport default withRouter(LinkButton);\n","// +-------+------------------------------------------------------------------------\n// | Notes |\n// +-------+\n/*\n * home.js\n * \n * This exports the home page\n *\n * Copyright (c) 2020 Samuel A. Rebelsky and the people who did the work.\n * This work is licenced under a LGLP 3.0 or later .....\n *\n */\n\n// +----------------+-----------------------------------------------------------------------\n// | Design Issues  |\n// +----------------+\n\n/**\n * The page is made up of the following parts:\n *    --Intro\n *        | logo\n *        | title + slogan\n * \n *    --ButtonContainer\n *        | tutorial + create + gallery buttons\n * \n *    --BottomText\n *        |  public beta notice + warning\n * \n *    --FeaturedImages\n *        | this is the featured image container in the bottom of the page\n */\n\n// +-------------+----------------------------------------------------------------------\n// | Imports     |\n// +-------------+\n\n/* react imports */\nimport React, { Component } from \"react\";\nimport { Button, Col, Container, Row,  } from \"react-bootstrap\";\nimport { NavLink } from \"react-router-dom\";\n/* imports stylesheet, logo */\nimport \"./../design/styleSheets/home.css\";\nimport MistLogo from \"./../design/Logos/logoFinal.png\";\n/* imports icons */\nimport { AiOutlineStar } from \"react-icons/ai\";\nimport { BsClock } from \"react-icons/bs\";\n/* MISTImage and LinkButton */\nimport MISTImage from \"./components/MISTImageGallery\"\nimport LinkButton from \"./components/LinkButton\";\n\n// +-------------+----------------------------------------------------------------------\n// | Home.js     |\n// +-------------+\n\n/**\n *  home returns the whole page\n */\nconst home = () => {\n  return <PageContent />;\n};\n\n/**\n * PageContent combines all content to be featured on the page, including \n * the Intro, ButtonContainer, BottomText, and Featured Images.\n */\nclass PageContent extends React.Component {\n  render() {\n    return (\n      <Container fluid style={{ marginTop: \"2vh\", marginBottom: \"0\", paddingBottom: \"7.5rem\" }}>\n        <Intro />\n        <ButtonContainer />\n        <BottomText />\n        <FeaturedImages />\n      </Container>\n    );\n  }\n}\n\n/**\n * Returns the logo, title, and slogan\n */\nfunction Intro() {\n  return (\n    <Row style={{ justifyContent: \"center\" }}>\n      {/* Left side */}\n      <img src={MistLogo} alt=\"MIST Logo\" />\n\n      {/* Right side */}\n      <p1 style={{ alignItems: \"center\", margin: \"auto 0 auto 5vh\" }}>\n        {/* Title */}\n        <p1 style={{ fontSize: \"200%\" }}>\n          The Mathematical Synthesis Toolkit\n        </p1>\n\n        <p1 style={{ fontSize: \"150%\", color: \"grey\" }}>\n          {/* vertical line */}\n          <hr />\n          {/* slogan */}\n          Create abstract images and animations\n          <br />\n          using simple math functions\n       </p1>\n      </p1>\n    </Row>\n  );\n}\n\n/**\n * ButtonContainer returns the buttons to Tutorials, Create, and Gallery.\n */\nfunction ButtonContainer() {\n  return (\n    /* it is in a row */\n    <Row id=\"homeButtons\" style={{ justifyContent: \"center\" }}>\n      {/* Tutorial */}\n      <LinkButton to=\"/tutorial\" className=\"linkButton\">\n        <b>Tutorials</b>\n      </LinkButton>\n\n      {/* Create workspace */}\n      <LinkButton to=\"/createWorkspace\" className=\"linkButton\" id=\"middleButton\">\n        Create\n      </LinkButton>\n\n      {/* Gallery */}\n      <LinkButton to=\"/gallery\" className=\"linkButton\">\n        Gallery\n      </LinkButton>\n    </Row>\n  );\n}\n\n/**\n * BottomText retuns text that is featured on the bottom of the page. \n * This text includes the \"public beta\" notice and the warning.\n */\nfunction BottomText() {\n  return (\n    <Container>\n      {/* public beta notice */}\n      <p>\n        MIST is in public beta. Look <NavLink to=\"/about\">here</NavLink> for\n        more information.\n      </p>\n\n      {/* warning */}\n      <p>\n        <b>WARNING: </b>\n        Some of the images rendered on this site may feature flashing animations\n        and patterns.\n        <br />\n        For those with a history of epilepsy, viewer discretion is advised.\n      </p>\n    </Container>\n  );\n}\n\n/*\n  FeaturedImages returns a display of images previously created \n  with MIST at the bottom of the screen in a container.\n  */\nclass FeaturedImages extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      featuredImages: []\n    }\n  }\n\n  //Fetch the data on first mount\n  componentDidMount() {\n    this.getFeaturedImages();\n  }\n\n  // Retrieves the images from the database\n  getFeaturedImages = () => {\n    fetch('/api?action=getHomeImages')\n      .then(res => res.json())\n      .then(featuredImages => this.setState({ featuredImages }));\n  }\n\n  render() {\n    const featuredImages = this.state.featuredImages;\n    return (\n      <Container>\n        <Col className=\"featuredImagesContainer\"\n          style={{\n            /* border */\n            border: \"solid\",\n            borderWidth: \"1px\",\n            borderRadius: \"10px\",\n\n            /* dimensions */\n            width: \"80%\",\n\n            /* margin */\n            marginLeft: \"auto\",\n            marginRight: \"auto\",\n            marginTop: \"1vh\",\n            marginBottom: \"1vh\",\n\n            /* padding */\n            paddingTop: \"2vh\",\n            paddingBottom: \"2vh\",\n            paddingLeft: \"5vh\",\n            paddingRight: \"5vh\"\n          }}>\n\n          {/* Text + Button */}\n          <Row style={{ justifyContent: \"space-between\" }}>\n            {/* Title and subtext */}\n            <div>\n              <h2 style={{ fontSize: \"150%\" }}>\n                Featured Images:\n              </h2>\n              <p1>\n                Images with <BsClock /> will animate when you hover over them\n              </p1>\n            </div>\n\n            {/* Button to Gallery */}\n            <div>\n              <Button variant=\"outline-dark\" href=\"/gallery\"> See More </Button>\n            </div>\n          </Row>\n\n          {/* Featured Images */}\n          <Row className=\"featuredImagesFlex\">\n            {featuredImages.length ? (\n              <Row >\n                {featuredImages.map((featuredImage) => {\n                  return (\n                    <Col>\n                      {/* the two lines below are placeholders, we need to pass in MIST images instead */}\n                      <MISTImage code={featuredImage.code} resolution=\"150\" />\n                      {/*<p> {featuredImage.code}</p>*/}\n                    </Col>\n                  );\n                })}\n              </Row>\n            ) \n            : \n            (\n              <h2> No Image Found </h2>\n            )\n            }\n          </Row>\n        </Col>\n      </Container>\n    );\n  }\n}\n\nexport default home;","// +-------+------------------------------------------------------------------------\n// | Notes |\n// +-------+\n/*\n * license.js\n * \n * This exports the license page, which is not yet developed.\n *\n * Copyright (c) 2020 Samuel A. Rebelsky and the people who did the work.\n * This work is licenced under a LGLP 3.0 or later .....\n */\n// +-------------------+----------------------------------------------------------------------\n// | IMPORTS           |\n// +-------------------+\nimport React from 'react';\nimport {Container} from 'react-bootstrap';\n\nfunction License() {\n    return (\n        <Container fluid style={{marginTop: \"2vh\", marginBottom: \"0\", paddingBottom: \"7.5rem\"}}> \n        license info\n        </Container>\n    )\n}\n\nexport default License;","// +-------+------------------------------------------------------------------------\n// | Notes |\n// +-------+\n/*\n * privacy.js\n * \n * This exports the privacy policy page, which is not yet completed.\n *\n * Copyright (c) 2020 Samuel A. Rebelsky and the people who did the work.\n * This work is licenced under a LGLP 3.0 or later .....\n */\n// +-------------------+----------------------------------------------------------------------\n// | IMPORTS           |\n// +-------------------+\nimport React from \"react\";\nimport { Container } from \"react-bootstrap\";\n\n//full page\nfunction Privacy() {\n  return (\n    <Container fluid style={{marginTop: \"2vh\", marginBottom: \"0\", paddingBottom: \"7.5rem\"}}>\n      <h1>Privacy Policy </h1>\n      <div>\n        We at Glimmer Labs take your privacy very seriously. We believe that\n        you, the user, should understand exactly what information we are keeping\n        track of on our end, and be made aware of the steps you can take to\n        control that information. This privacy policy will detail the following\n        things, as well as the settings you have access to that can adjust these\n        things:\n        <ul>\n          <li> The information we track while you are navigating our site.</li>\n          <li> The information we store in our database.</li>\n        </ul>\n      </div>\n    </Container>\n    // OLD PRIVACY POLICY BELOW\n    /* \n        <Container className=\"center\">\n            <div id=\"pageTitleGeneral\">\n                <h1> Privacy Policy</h1>\n            </div>\n            <div id='policy-content'>\n                <p>We at Glimmer Labs take your privacy very seriously. \n                We believe that you, the user, should understand exactly\n                what information we are keeping track of on our end, and\n                be made aware of the steps you can take to control that information. \n                This privacy policy will detail the following things, as well as \n                the settings you have access to that can adjust these things:\n                </p>\n                <ul>\n                    <li> The information we track while you are navigating our site.</li>\n                    <li> The information we store in our database.</li>\n                </ul>\n                <h2> Information from Cookies</h2>\n                    <p>The MIST website uses Google Analytics to\n                    track how you navigate the site. We use this\n                    to better understand what our users want and\n                    how they respond to the content on the site--\n                    most importantly, where users leave the site--\n                    which allows us to better focus our efforts to\n                    keep you engaged. Google Analytics records a large\n                    amount of data, so we recommend looking at Google’s\n                    Privacy Policy\n                    <a href=\"http://www.google.com/intl/en/policies/privacy/#infocollect\">here</a>. \n                    We understand if you feel uncomfortable with\n                    this data being recorded, and as such provide the link to\n                    <a href=\"https://tools.google.com/dlpage/gaoptout\"> disable google analytics</a>\n                    for your web browser.</p>\n                <h2> Information Stored by Us</h2>\n                    <p>One of the features we provide as content\n                    creating website is the ability to share the\n                    images you create with other users. As such,\n                    any image that you create and save to your\n                    account is stored on our server as the code\n                    that rendered it. You own the image under the \n                    <a href=\"http://creativecommons.org/licenses/by-sa/4.0/legalcode\">\n                    Creative Commons Attribution-ShareAlike 4.0 International</a>,\n                    and you are free to create additional contracts with\n                    third parties in relation to your own work. \n                    We are free to display your image, along with \n                    the code used to render it, on our website and to\n                    use it in additional educational materials related to our project. </p>\n                <p>Glimmer Labs will not sell, rent, or exchange\n                 the email address or other account information ​of our users.\n                In the future, we plan to use email addresses for the following purposes:</p>\n                 <ul>\n                    <li> To verify user accounts on account creation.</li>\n                    <li> To provide account recovery services to users.</li>\n                    </ul>\n             </div>\n        </Container>\n        \n       }*/\n  );\n}\n\nexport default Privacy;\n","// +-------+------------------------------------------------------------------------\n// | Notes |\n// +-------+\n/*\n * report.js\n * \n * This exports the report form page.\n * To be developed:\n    * submit button submits form into database \n    * could use some styling\n    \n * Copyright (c) 2020 Samuel A. Rebelsky and the people who did the work.\n * This work is licenced under a LGLP 3.0 or later .....\n */\n// +-------------------+----------------------------------------------------------------------\n// | IMPORTS           |\n// +-------------------+\nimport React from 'react';\nimport { Button, Container, Form } from 'react-bootstrap';\n\n// +-------------------+----------------------------------------------------------------------\n// | report.js        |\n// +-------------------+\n// will need to be styled\nfunction ReportForm() {\n    return (\n        <Container className=\"reportForm\">\n            <h1>Report Form </h1>\n            <p style={{ textAlign: \"left\" }}> To see the community guidelines click <a href=\"/community\">here</a> </p>\n            <Form className=\"form\">\n                {/* Radio buttons + text box */}\n                <Form.Group required=\"required\" controlId=\"formBasicCheckbox\">\n                    <Form.Label>Please select the reason for reporting: </Form.Label>\n                    <Form.Check name=\"reason\" type=\"radio\" label=\"Spam\" />\n                    <Form.Check name=\"reason\" type=\"radio\" label=\"Personal Attack/Harassment\" />\n                    <Form.Check name=\"reason\" type=\"radio\" label=\"Illegal Activites\" />\n                    <Form.Check name=\"reason\" type=\"radio\" label=\"Explicit Material\" />\n                    <Form.Check name=\"reason\" type=\"radio\" label=\"Offensive Content\" />\n                    <Form.Check name=\"reason\" type=\"radio\" label=\"Discrimination\" />\n                    <Form.Check name=\"reason\" type=\"radio\" label=\"Trolling\" />\n                    <Form.Group>\n                        <Form.Check name=\"reason\" type=\"radio\" label=\"Other\" />\n                        <Form.Control as=\"textarea\" rows=\"3\" type=\"other\" placeholder=\"If none of the above, please explain here\" />\n                    </Form.Group>\n                </Form.Group>\n\n                {/* Additional Comments */}\n                <Form.Group>\n                    <Form.Label>Additonal Comment (Optional) </Form.Label>\n                    <Form.Control as=\"textarea\" rows=\"3\" type=\"comment\" placeholder=\"\" />\n                </Form.Group>\n\n                {/* Submit Button */}\n                <Form.Group>\n                    <Button variant=\"outline-dark\" type=\"submit\" id=\"submitButton\">\n                        Submit </Button>\n                </Form.Group>\n\n            </Form>\n        </Container>\n    );\n}\n\nexport default ReportForm;","// +-------+------------------------------------------------------------------------\n// | Notes |\n// +-------+\n/*\n * settings.js\n *\n * This exports the settings page.\n * To be developed:\n * changing user info updates database\n * accessibility options work\n * unhiding/blocking content\n *   commented out is the interface for doing this, but it\n *   has not been incorporated into the refactored settings yet\n *\n * Copyright (c) 2020 Samuel A. Rebelsky and the people who did the work.\n * This work is licenced under a LGLP 3.0 or later .....\n */\n// +-------------------+----------------------------------------------------------------------\n// | IMPORTS           |\n// +-------------------+\nimport React, { useState, useEffect } from \"react\";\nimport \"./../design/styleSheets/tutorial.css\";\n\nimport {\n  Accordion,\n  Button,\n  ButtonGroup,\n  Card,\n  Container,\n  Form,\n  OverlayTrigger,\n  Popover,\n} from \"react-bootstrap\";\n\nimport \"bootstrap/dist/css/bootstrap.css\";\n\n// +-------------------+----------------------------------------------------------------------\n// | settings.js        |\n// +-------------------+\n//Page Header\nfunction Settings() {\n  return (\n    <Container\n      fluid\n      style={{ marginTop: \"2vh\", marginBottom: \"0\", paddingBottom: \"7.5rem\" }}\n    >\n      {/* Title */}\n      <Container>\n        <h1>Account Settings</h1>\n      </Container>\n      {/* settings */}\n      <Container>\n        <SettingsTable />\n      </Container>\n    </Container>\n  );\n}\n\n//Tables with all setting options\nfunction SettingsTable() {\n  const [newEmail, setNewEmail] = useState(\"\");\n  const [newUsername, setNewUsername] = useState(\"\");\n  const [currentPassword, setCurrentPassword] = useState(\"\");\n  const [newPassword, setNewPassword] = useState(\"\");\n  const [user, setUser] = useState(null);\n\n  useEffect(() => {\n    fetch(\"/api?action=getUser\", {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      credentials: \"include\",\n    })\n      .then((res) => res.json())\n      .then((user) => {\n        if (user) {\n          setUser(user);\n        }\n      });\n  }, [user]);\n\n  function changeEmail(e) {\n    e.preventDefault();\n    fetch(\"/api\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      credentials: \"include\",\n      body: JSON.stringify({\n        action: \"changeEmail\",\n        newEmail: newEmail,\n        ...user,\n      }),\n    })\n      .then((res) => res.json())\n      .then((message) => alert(message));\n  }\n\n  function changeUsername(e) {\n    e.preventDefault();\n    fetch(\"/api\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      credentials: \"include\",\n      body: JSON.stringify({\n        action: \"changeUsername\",\n        newUsername: newUsername,\n        ...user,\n      }),\n    })\n      .then((res) => res.json())\n      .then((message) => alert(message));\n  }\n\n  function changePassword(e) {\n    e.preventDefault();\n    fetch(\"/api\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      credentials: \"include\",\n      body: JSON.stringify({\n        action: \"changePassword\",\n        currentPassword: currentPassword,\n        newPassword: newPassword,\n        ...user,\n      }),\n    })\n      .then((res) => res.json())\n      .then((message) => alert(message));\n  }\n\n  const popover = (\n    <Popover id=\"popover-basic\">\n      <Popover.Title as=\"h3\"> Change Email</Popover.Title>\n\n      <Popover.Content>\n        <Form onSubmit={changeEmail}>\n          <Form.Group controlId=\"formBasicEmail\">\n            <Form.Control\n              type=\"email\"\n              placeholder=\"Enter new email\"\n              onChange={(e) => setNewEmail(e.target.value)}\n            />\n            <Form.Text className=\"text-muted\"></Form.Text>\n          </Form.Group>\n        </Form>\n      </Popover.Content>\n    </Popover>\n  );\n\n  const usernamePopover = (\n    <Popover id=\"popover-basic\">\n      <Popover.Title as=\"h3\"> Change Username</Popover.Title>\n\n      <Popover.Content>\n        <Form>\n          <Form.Group controlId=\"formBasicEmail\">\n            <Form.Control\n              type=\"username\"\n              placeholder=\"Enter new username\"\n              onChange={(e) => setNewUsername(e.target.value)}\n            />\n            <Form.Text className=\"text-muted\"></Form.Text>\n            <Button onClick = {changeUsername}>Confirm Changes</Button>\n          </Form.Group>\n        </Form>\n      </Popover.Content>\n    </Popover>\n  );\n\n  const password = (\n    <Popover id=\"popover-basic\">\n      <Popover.Title as=\"h3\"> Change Password</Popover.Title>\n      <Popover.Content>\n        <Form onSubmit = {changePassword}>\n          <Form.Group controlId=\"formBasicPassword\">\n            <Form.Control\n              type=\"password\"\n              placeholder=\"Enter old password\"\n              onChange={(e) => setCurrentPassword(e.target.value)}\n            />\n            <Form.Control\n              type=\"password\"\n              placeholder=\"Enter new password\"\n              onChange={(e) => setNewPassword(e.target.value)}\n            />\n            <Form.Text className=\"text-muted\"></Form.Text>\n            <Button onClick = {changePassword}>Confirm Changes</Button>\n          </Form.Group>\n        </Form>\n      </Popover.Content>\n    </Popover>\n  );\n\n  return (\n    <Accordion defaultActiveKey=\"0\">\n      <Card>\n        {/* User Settings */}\n        <Accordion.Toggle as={Card.Header} eventKey=\"0\">\n          User Settings\n        </Accordion.Toggle>\n        <Accordion.Collapse eventKey=\"0\">\n          <Card.Body>\n            <ButtonGroup vertical>\n              {/* Privacy */}\n              <Button>Privacy</Button>\n\n              <OverlayTrigger\n                trigger=\"click\"\n                placement=\"right\"\n                overlay={popover}\n              >\n                <Button>Change Email</Button>\n              </OverlayTrigger>\n\n              <OverlayTrigger\n                trigger=\"click\"\n                placement=\"right\"\n                overlay={password}\n              >\n                <Button>Change Password</Button>\n              </OverlayTrigger>\n\n              <OverlayTrigger\n                trigger=\"click\"\n                placement=\"right\"\n                overlay={usernamePopover}\n              >\n                <Button>Change Username</Button>\n              </OverlayTrigger>\n\n              <Button>Blocked Content</Button>\n            </ButtonGroup>\n          </Card.Body>\n        </Accordion.Collapse>\n      </Card>\n\n      {/* Accessibility */}\n      <Card>\n        <Accordion.Toggle as={Card.Header} eventKey=\"1\">\n          Accessibility\n        </Accordion.Toggle>\n        <Accordion.Collapse eventKey=\"1\">\n          <Card.Body>\n            <ButtonGroup vertical>\n              <Button>Text Size </Button>\n              <Button>Magnifier </Button>\n              <Button>Animations </Button>\n            </ButtonGroup>\n          </Card.Body>\n        </Accordion.Collapse>\n      </Card>\n\n      {/* Message Settings */}\n      <Card>\n        <Accordion.Toggle as={Card.Header} eventKey=\"2\">\n          Message Settings\n        </Accordion.Toggle>\n        <Accordion.Collapse eventKey=\"2\">\n          <Card.Body>\n            {\" \"}\n            Recieve Messages From:\n            <Form>\n              {[\"radio\"].map((type) => (\n                <div key={`default-${type}`} className=\"mb-3\">\n                  <Form.Check\n                    name=\"radio\"\n                    type={type}\n                    id={`default-${type}`}\n                    label={`Anyone`}\n                  />\n\n                  <Form.Check\n                    name=\"radio\"\n                    type={type}\n                    id={`default-${type}`}\n                    label={`Friends`}\n                  />\n\n                  <Form.Check\n                    name=\"radio\"\n                    type={type}\n                    id={`default-${type}`}\n                    label={`No Messages`}\n                  />\n                </div>\n              ))}\n            </Form>\n          </Card.Body>\n        </Accordion.Collapse>\n      </Card>\n\n      {/* Notifications */}\n      <Card>\n        <Accordion.Toggle as={Card.Header} eventKey=\"3\">\n          Notifications\n        </Accordion.Toggle>\n        <Accordion.Collapse eventKey=\"3\">\n          <Card.Body>\n            Recieve Notifications for:\n            <Form>\n              {[\"checkbox\"].map((type) => (\n                <div key={`default-${type}`} className=\"mb-3\">\n                  <Form.Check\n                    type={type}\n                    id={`default-${type}`}\n                    label={`Someone Liking Your Image`}\n                    defaultChecked\n                  />\n\n                  <Form.Check\n                    type={type}\n                    id={`default-${type}`}\n                    label={`New Badge`}\n                    defaultChecked\n                  />\n\n                  <Form.Check\n                    type={type}\n                    id={`default-${type}`}\n                    label={`New Follower`}\n                    defaultChecked\n                  />\n\n                  <Form.Check\n                    type={type}\n                    id={`default-${type}`}\n                    label={`Someone You Follow Made a New Image`}\n                    defaultChecked\n                  />\n\n                  <Form.Check\n                    type={type}\n                    id={`inline`}\n                    label={`New MIST Updates`}\n                    defaultChecked\n                  />\n                </div>\n              ))}\n            </Form>\n          </Card.Body>\n        </Accordion.Collapse>\n      </Card>\n    </Accordion>\n  );\n}\n\n//Popover bubble to change email\n\n\n/*const popover = (\n  <Popover id=\"popover-basic\">\n    <Popover.Title as=\"h3\">Popover right</Popover.Title>\n    <Popover.Content>\n      <Form>\n        <Form.Group controlId=\"formBasicEmail\">\n          <Form.Label>Email address</Form.Label>\n          <Form.Control type=\"email\" placeholder=\"Enter new email\" />\n          <Form.Text className=\"text-muted\"></Form.Text>\n        </Form.Group>\n      </Form>\n    </Popover.Content>\n  </Popover>\n);*/\n\n/*\nconst Email = () => (\n  <OverlayTrigger trigger=\"click\" placement=\"right\" overlay={popover}>\n    <Button variant=\"success\">Change Email</Button>\n  </OverlayTrigger>\n); */\n\n//render(<Email />);\n\n/*\n//These tabs are the main setting categories\nfunction SettingOptions() {\n  return (\n    <Tab.Container id=\"left-tabs-example\" defaultActiveKey=\"first\">\n      <Row>\n        <Col sm={3}>\n          <Nav variant=\"pills\" className=\"flex-column\">\n            <Nav.Item>\n              <Nav.Link eventKey=\"first\">User Settings</Nav.Link>\n            </Nav.Item>\n            <Nav.Item>\n              <Nav.Link eventKey=\"second\">Accessibility</Nav.Link>\n            </Nav.Item>\n            <Nav.Item>\n              <Nav.Link eventKey=\"third\">Notifications</Nav.Link>\n            </Nav.Item>\n            <Nav.Item>\n              <Nav.Link eventKey=\"fourth\">Message Settings</Nav.Link>\n            </Nav.Item>\n          </Nav>\n        </Col>\n        <Col sm={9}>\n          <Tab.Content>\n            <Tab.Pane eventKey=\"first\">\n              <OptionOne />\n            </Tab.Pane>\n            <Tab.Pane eventKey=\"second\">\n              <OptionTwo />\n            </Tab.Pane>\n            <Tab.Pane eventKey=\"third\">\n              <OptionThree />\n            </Tab.Pane>\n            <Tab.Pane eventKey=\"fourth\">\n              <OptionFour />\n            </Tab.Pane>\n          </Tab.Content>\n        </Col>\n      </Row>\n    </Tab.Container>\n  );\n}\n//Options below allow users to made these changes to their accounts\nfunction OptionOne() {\n  return (\n    <Container>\n      <p> Privacy, Email, Password, Send Updates </p>\n    </Container>\n  );\n}\nfunction OptionTwo() {\n  return (\n    <Container>\n      <p>\n        {\" \"}\n        Text Size, Image Magnifier, Site Colors (for users with epilepsy and\n        related disablities){\" \"}\n      </p>\n    </Container>\n  );\n}\nfunction OptionThree() {\n  return (\n    <Container>\n      <p>\n        {\" \"}\n        Receive notifications for: Someone liking your Image New Badge Someone\n        you follow made a new image{\" \"}\n      </p>\n    </Container>\n  );\n}\nfunction OptionFour() {\n  return (\n    <Container>\n      <Button\n        variant=\"outline-dark\"\n        onClick={() => sethiddenImages(!hiddenImages)}\n        aria-controls=\"hiddenImages\"\n        aria-expanded={hiddenImages}\n        style={{\n          marginTop: \"1em\",\n          marginBottom: \"1em\"\n        }}\n        size=\"sm\"\n      >\n        Hidden Images\n      </Button>\n      <Collapse in={hiddenImages}>\n        <div id=\"hiddenImages\">\n          {exampleListOfImages.map((image) => (\n            <div>\n              <img src={image} alt=\"example\" style={{ padding: \"10px\" }}/> <br/>\n              <BlockAndHideButton name=\"hide\" />\n            </div>\n          ))}\n        </div>\n      </Collapse>\n      <br />\n      <Button\n        variant=\"outline-dark\"\n        onClick={() => sethiddenAlbums(!hiddenAlbums)}\n        aria-controls=\"hiddenAlbums\"\n        aria-expanded={hiddenAlbums}\n        style={{\n          marginBottom: \"1em\"\n        }}\n        size=\"sm\"\n      >\n        Hidden Albums\n      </Button>\n      <Collapse in={hiddenAlbums}>\n        <div id=\"hiddenAlbums\">\n          {exampleListOfAlbums.map((album) => (\n            <Row style={{ padding: \"10px\" }}>\n              <text style={{ padding: \"10px\" }}>{album}</text>\n              <BlockAndHideButton name=\"hide\" />\n            </Row>\n          ))}\n        </div>\n      </Collapse>\n      <br />\n      <Button\n        variant=\"outline-dark\"\n        onClick={() => sethiddenComments(!hiddenComments)}\n        aria-controls=\"hiddenComments\"\n        aria-expanded={hiddenComments}\n        style={{\n          marginBottom: \"1em\"\n        }}\n        size=\"sm\"\n      >\n        Hidden Comments\n      </Button>\n      <Collapse in={hiddenComments}>\n        <div id=\"hiddenComments\">\n          {exampleListOfComments.map((comment) => (\n            <Row style={{ padding: \"10px\" }}>\n              <text style={{ padding: \"10px\" }}>{comment}</text>\n              <BlockAndHideButton name=\"hide\" />\n            </Row>\n          ))}\n        </div>\n      </Collapse>\n      <p>\n        {\" \"}\n        People who I follow can send messages People who follow me can send\n        messages Anyone can send me a message{\" \"}\n      </p>\n    </Container>\n  );\n}\n*/\n\nexport default Settings;\n","// +-------+------------------------------------------------------------------------\n// | Notes |\n// +-------+\n/*\n * signIn.js\n * \n * This exports the sign in page.\n *\n * Copyright (c) 2020 Samuel A. Rebelsky and the people who did the work.\n * This work is licenced under a LGLP 3.0 or later .....\n */\n// +-------------------+----------------------------------------------------------------------\n// | IMPORTS           |\n// +-------------------+\nimport 'bootstrap/dist/css/bootstrap.css';\nimport FacebookIcon from './../design/icons/icons8-facebook-30.png';\nimport GoogleIcon from './../design/icons/icons8-google-48.png';\nimport React, { useState } from 'react';\nimport { Form, Button, Container } from 'react-bootstrap';\nimport './../design/styleSheets/signInUp.css';\n\n// +-------------------+----------------------------------------------------------------------\n// | signIn.js         |\n// +-------------------+\nconst SignIn = () => {\n\n  const [loginUsername, setLoginUsername] = useState(\"\");\n  const [loginPassword, setLoginPassword] = useState(\"\");\n\n  const login = (e) => {\n\n    // prevents the page from refreshing on submit\n    e.preventDefault();\n\n    let user = {\n      username: loginUsername,\n      password: loginPassword,\n    };\n\n    fetch('/api', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      credentials: 'include',\n      body: JSON.stringify({action: 'signIn', ...user})\n    })\n      //redirect user to home page\n      .then(res => res.json())\n      .then(message => {\n        console.log(\"message = \" + message);\n        if (message === \"Success\") window.location.href = \"/\";\n      })\n  }\n\n  return (\n    <Container className=\"signIn-center\">\n      <h1 >Sign In</h1>\n      <Form className=\"form\" >\n\n        {/* username */}\n        <Form.Group controlId=\"formBasicUsername\" >\n          <Form.Label>Username</Form.Label>\n          <Form.Control\n            type=\"username\"\n            placeholder=\"Enter username\"\n            onChange={(e) => setLoginUsername(e.target.value)}\n          />\n        </Form.Group>\n\n        {/* password */}\n        <Form.Group controlId=\"formBasicPassword\">\n          <Form.Label>Password</Form.Label>\n          <Form.Control\n            type=\"password\"\n            placeholder=\"Password\"\n            onChange={(e) => setLoginPassword(e.target.value)}\n          />\n        </Form.Group>\n\n        {/* Remember Me */}\n        <Form.Group controlId=\"formBasicCheckbox\">\n          <Form.Check type=\"checkbox\" label=\"Remember Me\" />\n        </Form.Group>\n\n        {/* Sign In button */}\n        <Button onClick={login} variant=\"outline-dark\" type=\"submit\" id=\"submitButton\" style={{ margin: \"auto\" }}>\n          Sign In\n            </Button>\n\n        {/* Icons */}\n        <div className=\"icons\"> <img src={GoogleIcon} alt=\"Google Logo\" className=\"icon\"></img>\n          <img src={FacebookIcon} alt=\"Facebook Logo\" className=\"icon\"></img></div>\n      </Form>\n    </Container>\n  )\n}\n\n\nexport default SignIn;","// +-------+------------------------------------------------------------------------\n// | Notes |\n// +-------+\n/*\n * signUp.js\n *\n * This exports the sign up page.\n * To be developed:\n * \"re-enter password\" checks that the passwords are equal\n * passwords have criteria (ex: 8 characters long)\n *\n * Copyright (c) 2020 Samuel A. Rebelsky and the people who did the work.\n * This work is licenced under a LGLP 3.0 or later .....\n */\n// +-------------------+----------------------------------------------------------------------\n// | IMPORTS           |\n// +-------------------+\nimport \"bootstrap/dist/css/bootstrap.css\";\nimport FacebookIcon from \"./../design/icons/icons8-facebook-30.png\";\nimport GoogleIcon from \"./../design/icons/icons8-google-48.png\";\nimport React, { useState } from \"react\";\nimport { Form, Button, Container } from \"react-bootstrap\";\nimport \"./../design/styleSheets/signInUp.css\";\nimport HelpIcon from \"@material-ui/icons/Help\";\n\n// +-------------------+----------------------------------------------------------------------\n// | signUp.js         |\n// +-------------------+\nconst SignUp = () => {\n  const [username, setUsername] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [firstname, setFirstname] = useState(\"\");\n  const [lastname, setLastname] = useState(\"\");\n  const [email, setEmail] = useState(\"\");\n  const [passwordInfo, setPasswordInfo] = useState(false);\n\n  //Updates the state as the user types\n  const handleChange = (event) => {\n    let value = event.target.value;\n    let name = event.target.name;\n\n    switch (name) {\n      case \"username\":\n        setUsername(value);\n        break;\n      case \"password\":\n        setPassword(value);\n        break;\n      case \"firstname\":\n        setFirstname(value);\n        break;\n      case \"lastname\":\n        setLastname(value);\n        break;\n      case \"email\":\n        setEmail(value);\n        break;\n      default:\n        break;\n    }\n  };\n\n  // when the user submits the form, post to database\n  const handleSubmit = (event) => {\n    // prevent the page from refreshing\n    event.preventDefault();\n\n    // build the user\n    let user = {\n      firstname: firstname,\n      lastname: lastname,\n      username: username,\n      password: password,\n      email: email,\n    };\n\n    //post user to database\n    fetch(\"/api\", {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({ action: \"signUp\", ...user }),\n    })\n      .then((res) => res.json())\n      .then((message) => {\n        if (message !== \"User Created\") {\n          alert(message);\n        } else {\n          window.location.href = \"/\";\n        }\n      });\n\n    // login user\n    fetch(\"/api\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      credentials: \"include\",\n      body: JSON.stringify({ action: \"signIn\", ...user }),\n    })\n      //redirect user to home page\n      .then((res) => res.json())\n      .then((message) => {\n        console.log(\"message = \" + message);\n        if (message === \"Success\") window.location.href = \"/\";\n      });\n  };\n\n  return (\n    <Container\n      fluid\n      style={{ marginTop: \"2vh\", marginBottom: \"0\", paddingBottom: \"7.5rem\" }}\n    >\n      {/* Title and Subtitle */}\n      <h1>Sign Up</h1>\n      <p>\n        {\" \"}\n        Welcome to MIST! <br /> Get started by creating an account.{\" \"}\n      </p>\n\n      {/* Facebook and Google Icons */}\n      <div className=\"icons\">\n        <img src={GoogleIcon} alt=\"Google Logo\" className=\"icon\"></img>\n        <img src={FacebookIcon} alt=\"Facebook Logo\" className=\"icon\"></img>\n      </div>\n      <p>OR</p>\n      {/* Start of the form */}\n      <Form className=\"form\" onSubmit={handleSubmit}>\n        {/* first name */}\n        <Form.Group>\n          <Form.Label>First name</Form.Label>\n          <Form.Control\n            onChange={handleChange}\n            value={firstname}\n            name=\"firstname\"\n            required=\"required\"\n            placeholder=\"Enter first name\"\n          />\n        </Form.Group>\n\n        {/* last name */}\n        <Form.Group>\n          <Form.Label>Last name</Form.Label>\n          <Form.Control\n            onChange={handleChange}\n            v\n            alue={lastname}\n            name=\"lastname\"\n            required=\"required\"\n            placeholder=\"Enter last name\"\n          />\n        </Form.Group>\n\n        {/* username */}\n        <Form.Group>\n          <Form.Label>Username</Form.Label>\n          <Form.Control\n            onChange={handleChange}\n            value={username}\n            name=\"username\"\n            required=\"required\"\n            placeholder=\"@username\"\n          />\n        </Form.Group>\n\n        {/* email */}\n        <Form.Group>\n          <Form.Label>Email address</Form.Label>\n          <Form.Control\n            onChange={handleChange}\n            value={email}\n            name=\"email\"\n            required=\"required\"\n            type=\"email\"\n            placeholder=\"Enter email\"\n          />\n        </Form.Group>\n        <Form.Group>\n          <Form.Text className=\"text-muted\">\n            We'll never share your email with anyone else.\n          </Form.Text>\n        </Form.Group>\n\n        {/* password */}\n        <Form.Group controlId=\"formBasicPassword\">\n          <Form.Label>Password</Form.Label>\n          <Form.Control\n            onChange={handleChange}\n            value={password}\n            name=\"password\"\n            required=\"required\"\n            type=\"password\"\n            placeholder=\"Password\"\n          />\n        </Form.Group>\n        <div className=\"row\">\n          <HelpIcon\n            style={{ fontSize: 30, paddingLeft: 10 }}\n            onMouseOut={() => setPasswordInfo(false)}\n            onMouseOver={() => setPasswordInfo(true)}\n          />\n          {passwordInfo?\n          (<div\n            style={{\n              backgroundColor: \"#e3e296\",\n              borderRadius: 15\n            }}\n            className=\"col-md-3\"\n          ><ul>\n            <li>At least 8 characters</li>\n            <li>At least one digit</li>\n            <li>At least one special character</li>\n          </ul></div>):(<div></div>)}\n        </div>\n\n        {/* commented out until we can check passwords\n          <Form.Group controlId=\"formBasicPassword\">\n            <Form.Label>Re-enter Password</Form.Label>\n            <Form.Control required=\"required\" type=\"password\" placeholder=\"Re-enter password\" />\n          </Form.Group> */}\n\n        {/* checkboxes */}\n        <Form.Group controlId=\"formBasicCheckbox\">\n          <Form.Check\n            type=\"checkbox\"\n            required=\"required\"\n            label=\"By checking this box I confirm that I am 13 years of age or older.\"\n          />\n        </Form.Group>\n        <Form.Group controlId=\"formBasicCheckbox\">\n          <Form.Check\n            required=\"required\"\n            type=\"checkbox\"\n            label={\n              <label>\n                By checking this box I confirm that I have read and accept the{\" \"}\n                <a href=\"/community\">Community Guidelines</a>\n              </label>\n            }\n          />\n        </Form.Group>\n\n        {/* submit */}\n        <Form.Group>\n          <Button variant=\"outline-dark\" type=\"submit\" id=\"submitButton\">\n            Submit\n          </Button>\n        </Form.Group>\n      </Form>\n    </Container>\n  );\n};\n\nexport default SignUp;\n","const width = document.documentElement.clientWidth;\nconst height = document.documentElement.clientHeight - 70;\n\nconst menuHeight = width / 12;\nconst funBarHeight = height / 15;\nconst functionWidth = width / 20;\nconst valueWidth = width / 23;\n\nexport { width, height, menuHeight, funBarHeight, functionWidth, valueWidth };\n\nexport default { menuHeight, funBarHeight}","/**\n * mistgui-globals.js\n *   Global constiables for a MIST gui.  (Eventually, these should be fields\n *   within the object/prototype.)\n */\n\nimport { width, height } from \"./globals\";\n\nconst globalFont = \"Arial\";\nconst functionFont = \"Courier New\";\n\nconst functionStrokeWidth = width / 90;\nconst functionHalfStrokeWidth = functionStrokeWidth / 2;\nconst functionTotalSideLength = width / 20;\nconst functionRectSideLength = functionTotalSideLength - functionStrokeWidth;\nconst functionColor = \"#71d9a9\";\nconst functionColorLight = \"#C6F1ED\";\nconst functionMultColor = \"#C80442\";\nconst functionSingleColor = \"#A10235\";\nconst functionRGBcolor = \"#6E0E2C\";\n\nconst valueSideLength = functionTotalSideLength / 1.8; //1.414;\nconst valueMenuColor = \"#ffa931\";\nconst valueMenuColorLight = \"#FDE6DD\";\nconst valueXYColor = \"#ECDE1B\";\nconst valueTimeColor = \"#E2C520\";\nconst valueMouseColor = \"#DDB822\";\nconst valueConstantColor = \"#D8AB24\";\n\nconst menuFontSize = width / 75; //12 when width = 900\nconst nodeFontSize = width / 56.25; //16 when width = 900\nconst globalScale = width / 900; // for elements that are more difficult to scale (undo/redo)\n\nconst funNames = [\n  \"add\",\n  \"wrapsum\",\n  \"multiply\",\n  \"average\",\n  \"square\",\n  \"negate\",\n  \"sine\",\n  \"cosine\",\n  \"absolute\",\n  \"sign\",\n  \"mistif\",\n  \"rgb\",\n];\nconst functions = {\n  add: { rep: \"sum\", max: 20, min: 2, prefix: \"sum\", color: functionMultColor },\n  multiply: {\n    rep: \"mult\",\n    max: 20,\n    min: 2,\n    prefix: \"mult\",\n    color: functionMultColor,\n  },\n  square: {\n    rep: \"sqr\",\n    max: 1,\n    min: 1,\n    prefix: \"square\",\n    color: functionSingleColor,\n  },\n  negate: {\n    rep: \"neg\",\n    max: 1,\n    min: 1,\n    prefix: \"neg\",\n    color: functionSingleColor,\n  },\n  sine: {\n    rep: \"sin\",\n    max: 1,\n    min: 1,\n    prefix: \"sin\",\n    color: functionSingleColor,\n  },\n  cosine: {\n    rep: \"cos\",\n    max: 1,\n    min: 1,\n    prefix: \"cos\",\n    color: functionSingleColor,\n  },\n  absolute: {\n    rep: \"abs\",\n    max: 1,\n    min: 1,\n    prefix: \"abs\",\n    color: functionSingleColor,\n  },\n  average: {\n    rep: \"avg\",\n    max: 20,\n    min: 2,\n    prefix: \"avg\",\n    color: functionMultColor,\n  },\n  sign: {\n    rep: \"sign\",\n    max: 1,\n    min: 1,\n    prefix: \"sign\",\n    color: functionSingleColor,\n  },\n  wrapsum: {\n    rep: \"wsum\",\n    max: 20,\n    min: 2,\n    prefix: \"wsum\",\n    color: functionMultColor,\n  },\n  rgb: { rep: \"rgb\", max: 3, min: 3, prefix: \"rgb\", color: functionRGBcolor },\n  mistif: {\n    rep: \"if\",\n    max: 3,\n    min: 3,\n    prefix: \"mistif\",\n    color: functionSingleColor,\n  },\n};\n\nconst repToFun = {\n  sum: \"add\",\n  mult: \"multiply\",\n  sqr: \"square\",\n  neg: \"negate\",\n  sin: \"sine\",\n  cos: \"cosine\",\n  abs: \"absolute\",\n  avg: \"average\",\n  sign: \"sign\",\n  wsum: \"wrapsum\",\n  rgb: \"rgb\",\n  if: \"mistif\",\n};\n\nconst repToVal = {\n  x: \"x\",\n  y: \"y\",\n  \"t.s\": \"second\",\n  \"t.m\": \"minute\",\n  \"t.h\": \"hour\",\n  \"t.d\": \"day\",\n  \"#\": \"constant\",\n  \"m.x\": \"mouseX\",\n  \"m.y\": \"mouseY\",\n};\n\nconst valNames = [\n  \"x\",\n  \"y\",\n  \"second\",\n  \"minute\",\n  \"hour\",\n  \"day\",\n  \"mouseX\",\n  \"mouseY\",\n  \"constant\",\n];\nconst values = {\n  x: { rep: \"x\", color: valueXYColor },\n  y: { rep: \"y\", color: valueXYColor },\n  second: { rep: \"t.s\", color: valueTimeColor },\n  minute: { rep: \"t.m\", color: valueTimeColor },\n  hour: { rep: \"t.h\", color: valueTimeColor },\n  day: { rep: \"t.d\", color: valueTimeColor },\n  constant: { rep: \"#\", color: valueConstantColor },\n  mouseX: { rep: \"m.x\", color: valueMouseColor },\n  mouseY: { rep: \"m.y\", color: valueMouseColor },\n};\n\nconst imageBoxSideLength = width / 80;\nconst imageBoxColor = \"white\";\nconst functionImageBoxOffset = width / 300;\nconst valueImageBoxOffset = width / 34;\nconst renderSideLength = width / 18;\n\nconst editableTextWidth = width / 15;\nconst editableTextHeight = width / 30;\nconst editableTextFont = width / 69;\n\nconst constiableColor = { r: 197, g: 231, b: 109, a: 0.5 };\nconst constiableStrokeColor = \"#A1C447\";\nconst constiableRadius = 1.4 * (functionTotalSideLength / 2);\nconst constiableTextColor = \"#62694F\";\nconst constiableWidth = Math.cos(Math.PI / 6) * constiableRadius;\n\nconst outletXOffset = width / 400;\nconst outletYOffset = functionRectSideLength / 3;\nconst outletColor = \"#C4C4C4\";\nconst outletColor2 = \"#808080\";\n\nconst lineStrokeWidth = 2;\n\nconst dragShadowColor = \"black\";\nconst selectedShadowColor = \"blue\";\n\n//SLIDING MENU\nconst menuHeight = width / 12;\nconst menuCornerWidth = width / 6;\nconst buttonWidth = width / 10;\nconst valSpaceWidth = width - menuCornerWidth - 2 * buttonWidth;\nconst numVals = 6; //valNames.length;\nconst valMenuXSpacing =\n  (valSpaceWidth - (numVals * functionTotalSideLength - 4)) / (numVals + 1);\nconst functSpaceWidth = width - menuCornerWidth - 2 * buttonWidth;\nconst numFuncts = 6;\nconst functMenuXSpacing =\n  (functSpaceWidth - numFuncts * functionTotalSideLength) / (numFuncts + 1);\nconst menuYspacing = (width * 11) / 360;\nconst menuFunctsXStart =\n  2 * (buttonWidth - functionRectSideLength) +\n  menuCornerWidth -\n  functionTotalSideLength / 2;\nconst menuFunctsXEnd = width - buttonWidth + functionRectSideLength / 2;\nconst menuValuesXStart = menuCornerWidth + buttonWidth / 2;\nconst menuAnimDuration = 1;\n\n//SCROLLING MENU BUTTONS\nconst arrowWidth = width / 50;\nconst arrowBoxFill = \"gray\";\nconst arrowFill = \"black\";\nconst triX = width / 90;\nconst triY = width / 60;\n\n//CORNER BUTTONS\nconst menuOffset = 10;\nconst menuControlHeight = (menuHeight - 4 * menuOffset) / 3;\nconst menuControlColor = \"#111d5e\";\nconst menuControlSelect = \"#9EBDF0\";\nconst menuControlTextColor = \"black\";\nconst menuTextOffset = menuControlHeight / 5;\n\n//TOOLBOX\nconst toolboxWidth = width / 18;\nconst toolboxHeight = width / 4.1;\nconst toolboxShift = toolboxWidth / 5;\nconst toolboxButtonSize = width / 30;\nconst deleteColor = \"#A30F0F\";\n\n//FUNCTIONBAR\nconst funBarWidth = width;\nconst funBarHeight = height / 15;\nconst funBarBackgroundColor = menuControlColor;\nconst funBarOffset = funBarHeight * 0.17;\nconst funBarTextAreaWidth = funBarWidth * 0.75;\nconst funBarTextAreaHeight = funBarHeight * 0.66;\nconst funBarTextOffset = funBarOffset * 1.5;\nconst funBarDisplayFontSize = width / 40.9;\nconst funBarFontSize = width / 75;\nconst funBarIconOffset = funBarWidth / 16;\nconst funBarIconSideLength = funBarHeight / 4;\nconst funBarIconTextWidth = width / 18;\nconst funBarIconTextY = funBarHeight - funBarOffset * 1.3;\n\n//SAVE SCREEN\nconst popRectColor = \"white\"; //'#e8e8e8';\nconst popRectWidth = width * 0.35;\nconst popRectHeight = height * 0.85;\nconst popSaveGroupX = (width - popRectWidth) / 2;\nconst popSaveGroupY = (height - popRectHeight) / 2;\n\nconst popCanvasSide = popRectWidth * 0.9;\nconst popCanvasResolution = width * (3 / 9);\nconst popCanvasShiftX = popSaveGroupX + (popRectWidth - popCanvasSide) / 2;\nconst popCanvasShiftY = popSaveGroupY + (popRectWidth - popCanvasSide) / 2;\n\nconst popTextShiftX = (popRectWidth - popCanvasSide) / 2;\nconst popTextShiftY = popCanvasShiftY / 1.2 + popCanvasSide;\nconst popTextWidth = popCanvasSide;\nconst popTextFontSize = width / 70;\nconst popTextHeight = 2 * popTextFontSize;\n\nconst nameTextShift = width / 18;\n\nconst popButtonWidth = popCanvasSide / 3.4;\nconst popButtonHeight = popTextHeight / 1.25;\nconst popButtonShiftX = (popCanvasSide - 3 * popButtonWidth) / 2;\nconst popButtonColor = \"#A0A3A3\";\nconst popButtonSelectedColor = \"#B6BABA\";\n\nconst errorColor = \"#A11212\";\n\n// OPEN WS SCREEN\nconst popOpenWsRectWidth = width * 0.4;\nconst popOpenWsRectHeight = height * 0.16;\nconst popOpenWsGroupX = (width - popOpenWsRectWidth) / 2;\nconst popOpenWsGroupY = (height - popOpenWsRectHeight) / 2;\n\nconst popOpenWsButtonShiftX = popTextShiftX; //((popWsRectWidth / 2) - (2 * popWsButtonWidth)) / 3;\nconst popOpenWsButtonWidth =\n  (popOpenWsRectWidth / 2 - 3 * popOpenWsButtonShiftX) / 2;\nconst popOpenWsButtonHeight = popOpenWsRectWidth * 0.06;\n\nconst RGBoutletColors = [\"#C94949\", \"#2D9C2D\", \"#4272DB\"];\n\n// TOOLBOX BOOLEANS\nconst lineToolOn = false;\nconst workToolOn = false;\nconst deleteToolOn = false;\n\n//MENU BOOLEANSF\nconst valueExpanded = false;\nconst functionExpanded = false;\nconst tagsOn = true;\n\n/* constiables to globally reference the most recently used object/line and current state */\nconst dragShape = null;\nconst scaledObj = null;\nconst map = [];\n\n//OTHER BOOLEANS\nconst makingLine = false;\nconst animation = false;\n\n// CONSTANTS\n\n/**\n * The offset in an operation node to the set of offsets.\n */\nconst OUTLET_OFFSET = 3;\nconst bezPoint = width / 50;\n\nexport { width, height };\n\nexport default {\n  width,\n  height,\n  globalFont,\n  functionFont,\n  functionStrokeWidth,\n  functionHalfStrokeWidth,\n  functionTotalSideLength,\n  functionRectSideLength,\n  functionColor,\n  functionColorLight,\n  functionMultColor,\n  functionSingleColor,\n  functionRGBcolor,\n  valueSideLength,\n  valueMenuColor,\n  valueMenuColorLight,\n  valueXYColor,\n  valueTimeColor,\n  valueMouseColor,\n  valueConstantColor,\n  menuFontSize,\n  nodeFontSize,\n  globalScale,\n  funNames,\n  functions,\n  valNames,\n  values,\n  imageBoxSideLength,\n  imageBoxColor,\n  functionImageBoxOffset,\n  valueImageBoxOffset,\n  renderSideLength,\n  editableTextWidth,\n  editableTextHeight,\n  editableTextFont,\n  constiableColor,\n  constiableStrokeColor,\n  constiableRadius,\n  constiableTextColor,\n  constiableWidth,\n  outletXOffset,\n  outletYOffset,\n  outletColor,\n  outletColor2,\n  lineStrokeWidth,\n  dragShadowColor,\n  selectedShadowColor,\n  menuHeight,\n  menuCornerWidth,\n  buttonWidth,\n  valSpaceWidth,\n  numVals,\n  valMenuXSpacing,\n  functSpaceWidth,\n  numFuncts,\n  functMenuXSpacing,\n  menuYspacing,\n  menuFunctsXStart,\n  menuFunctsXEnd,\n  menuValuesXStart,\n  menuAnimDuration,\n  arrowWidth,\n  arrowBoxFill,\n  arrowFill,\n  triX,\n  triY,\n  menuOffset,\n  menuControlHeight,\n  menuControlColor,\n  menuControlSelect,\n  menuControlTextColor,\n  menuTextOffset,\n  toolboxWidth,\n  toolboxHeight,\n  toolboxShift,\n  toolboxButtonSize,\n  deleteColor,\n  funBarWidth,\n  funBarHeight,\n  funBarBackgroundColor,\n  funBarOffset,\n  funBarTextAreaWidth,\n  funBarTextAreaHeight,\n  funBarTextOffset,\n  funBarDisplayFontSize,\n  funBarFontSize,\n  funBarIconOffset,\n  funBarIconSideLength,\n  funBarIconTextWidth,\n  funBarIconTextY,\n  popRectColor,\n  popRectWidth,\n  popRectHeight,\n  popSaveGroupX,\n  popSaveGroupY,\n  popCanvasSide,\n  popCanvasResolution,\n  popCanvasShiftX,\n  popCanvasShiftY,\n  popTextShiftX,\n  popTextShiftY,\n  popTextWidth,\n  popTextFontSize,\n  popTextHeight,\n  nameTextShift,\n  popButtonWidth,\n  popButtonHeight,\n  popButtonShiftX,\n  popButtonColor,\n  popButtonSelectedColor,\n  errorColor,\n  popOpenWsRectWidth,\n  popOpenWsRectHeight,\n  popOpenWsGroupX,\n  popOpenWsGroupY,\n  popOpenWsButtonShiftX,\n  popOpenWsButtonWidth,\n  popOpenWsButtonHeight,\n  RGBoutletColors,\n  lineToolOn,\n  workToolOn,\n  deleteToolOn,\n  valueExpanded,\n  functionExpanded,\n  tagsOn,\n  dragShape,\n  scaledObj,\n  map,\n  makingLine,\n  animation,\n  OUTLET_OFFSET,\n  bezPoint,\n  repToFun,\n  repToVal,\n};\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nexport default class Portal extends React.Component {\n  componentDidMount() {\n    this.renderPortal();\n  }\n\n  componentDidUpdate(props) {\n    this.renderPortal();\n  }\n\n  componentWillUnmount() {\n    ReactDOM.unmountComponentAtNode(this.defaultNode || this.props.node);\n    if (this.defaultNode) {\n      document.body.removeChild(this.defaultNode);\n    }\n    this.defaultNode = null;\n  }\n\n  renderPortal(props) {\n    if (!this.props.node && !this.defaultNode) {\n      this.defaultNode = document.createElement('div');\n      document.body.appendChild(this.defaultNode);\n    }\n\n    let children = this.props.children;\n    if (typeof children.type === 'function') {\n      children = React.cloneElement(children);\n    }\n\n    ReactDOM.render(children, this.props.node || this.defaultNode);\n  }\n\n  render() {\n    return null;\n  }\n}","import {width, height} from './globals';\n\nconst canvasX = width * 5 / 16;\nconst canvasY = height / 15;\nconst canvasWidth = width - 2 * canvasX;\nconst canvasHeight = height - 2 * canvasY;\nconst canvasMargin = width / 30;\n\nconst textfieldX = canvasX + 2 * canvasMargin;\nconst textfieldY = canvasY + canvasHeight / 30;\nconst textfieldWidth = canvasWidth - 4 * canvasMargin;\nconst textfieldHeight = canvasHeight / 20;\n\nconst imageX = canvasX + canvasMargin;\nconst imageY = canvasY + canvasHeight / 10;\nconst imageWidth = canvasWidth - 2 * canvasMargin;\nconst imageHeight = imageWidth;\n\nconst rfTextX = canvasX + canvasMargin;\nconst rfTextY = canvasY + canvasHeight * 8 / 10;\nconst rfTextWidth = canvasWidth - 2 * canvasMargin;\nconst rfTextHeight = canvasHeight / 20;\n\nconst buttonMargin = canvasWidth / 70;\nconst buttonOffset = (canvasWidth - 2 * canvasMargin) / 4;\nconst buttonX = canvasX + canvasMargin; // divide by the number of buttons\nconst buttonY = canvasY + canvasHeight * 9 / 10;\nconst buttonWidth = buttonOffset - 2 * buttonMargin;\nconst buttonHeight = canvasHeight / 20;\n\nexport default {\n    canvasX,\n    canvasY,\n    canvasWidth,\n    canvasHeight,\n    canvasMargin,\n    textfieldX,\n    textfieldY,\n    textfieldWidth,\n    textfieldHeight,\n    imageX,\n    imageY,\n    imageWidth,\n    imageHeight,\n    buttonMargin,\n    buttonOffset,\n    buttonX,\n    buttonY,\n    buttonWidth,\n    buttonHeight,\n    rfTextX,\n    rfTextY,\n    rfTextWidth,\n    rfTextHeight\n}","import {MIST} from './mist';\nimport * as mist from './mist';\n/**\n * The MIST UI library.  Available at\n *   http://glimmer.grinnell.edu/js/mistui.js\n *   http://glimmer.grinnell.edu/js/ugly.mistui.js\n *\n * MIST is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n/**\n * mistui-animation.js\n *   Some support for animating/rendering images in MIST.\n */\n\n// +-------+---------------------------------------------------------\n// | Setup |\n// +-------+\n\n// try { MIST: } catch (err) { MIST = {}; }\nif (!MIST.ui) { MIST.ui = {}; }\nMIST.ui.animator = {};\n\n// +-----------+-----------------------------------------------------\n// | Animation |\n// +-----------+\n\n/**\n * The number of frames per second.\n */\nMIST.ui.animator.fps = 30;\n\n/**\n * Are we animating our image?\n */\nMIST.ui.animator.on = true;\n\n/**\n * The increments we use when simulating parameters.\n */\nMIST.ui.animator.increments = [19,23,29,31,37,41,43,47,53,59,61,67,71].map(function (val) { return val/3000; });\n\n/**\n * When was the last time we drew a frame?  (Used primarily when we\n * need to re-render a particular frame.)\n */\nMIST.ui.animator.time = { t:0, m:0 };\n\n/**\n * Stop the animation from running.\n */\nMIST.ui.stopAnimation = function() {\n  MIST.ui.animator.on =false;\n} // stopAnimation\n\n/**\n * Start the animation running.\n */\nMIST.ui.startAnimation = function(exp,params,context,canvas,log)\n{\n  // Set up a hash for the parameters\n  MIST.ui.animator.params = {};\n  if (params !== \"\") {\n    var tmp = params.split(\",\");\n    for (var i = 0; i < tmp.length; i++) {\n      if (params[i] !== \"\") {\n        MIST.ui.animator.params[tmp[i]] = -1;\n      } // if\n    } // for\n  } // if (\n\n  MIST.parse(exp);\n  // Get the remaining info\n  try {\n    MIST.ui.animator.exp = MIST.parse(exp);\n    MIST.ui.animator.on = exp.indexOf(\"t.\") > -1;       // HACK!\n    MIST.ui.animator.context = context;\n    MIST.ui.animator.canvas = canvas;\n    MIST.ui.animator.log = log;\n    MIST.ui.animator.frame();\n  }\n  catch (err) {\n    log(err);\n    throw err;\n  }\n} // startAnimation\n\n/**\n * Do one frame of the animation.\n */\nMIST.ui.animator.frame = function() {\n  // Update the values of the parameters\n  var paramInfo = \"\";\n  var params = MIST.ui.animator.params;\n  var i = 0;\n  for (var p in params) {\n    var newval = MIST.wrapsum(params[p], MIST.ui.animator.increments[i++]);\n    params[p] = newval;\n    MIST.ui.animator.context[p] = newval;\n    paramInfo += p + \": \" + newval + \"\\n\";\n  } // for\n  var context = MIST.ui.animator.context;\n  // Inform the user\n  MIST.ui.animator.log(paramInfo);\n  // Make the frame\n   \n\n\n  if (MIST.ui.animator.on) {\n    console.log(\"MIST.ui.animator.on\");\n    MIST.ui.animator.time = MIST.render(MIST.ui.animator.exp, context,\n        MIST.ui.animator.canvas, 200, 200);   \n  }\n else {\n    MIST.ui.animator.time = MIST.render(MIST.ui.animator.exp, context,\n        MIST.ui.animator.canvas);\n  }\n  // And schedule the next frame\n  if (MIST.ui.animator.on) {\n    setTimeout(MIST.ui.animator.frame, 1000/MIST.ui.animator.fps);\n  }\n} // MIST.ui.animator.frame()\n/**\n * mistui-animator.js\n *   Some support for animating/rendering images in MIST.\n */\n\n// +-------+---------------------------------------------------------\n// | Setup |\n// +-------+\n\n// try { MIST: } catch (err) { MIST = {}; }\nif (!MIST.ui) { MIST.ui = {}; }\n\n// +---------+---------------------------------------------------------\n// | Globals |\n// +---------+\n\n/**\n * The pattern to identify builtins (or lack thereof).  Used for the\n * simple validation strategy.\n */\nvar builtinsPattern = /(?:abs|avg|cos|mult|rgb|sign|neg|signz|sin|square|sum|wsum|null|mistif|t.s|t.m|t.h|t.d|m.x|m.y)|[0-9xy().,]/g\n/**\n * Adding backwards compatibilty for request animation frame.\n */\nwindow.requestAnimationFrame = requestAnimationFrame || /*mozRequestAnimationFrame || webkitRequestAnimationFrame || msRequestAnimationFrame ||*/ function(fun) {\n  setTimeout(fun, 1000 / 30);\n}\n/**\n * The number of animators we've created.\n */\nvar _animatorCount_ = 0;\n\n// +---------+---------------------------------------------------------\n// | Helpers |\n// +---------+\n\n/**\n * Make the mouse handler with a particular animator.\n */\nfunction makeMouseMoveHandler(animator) {\n  return function(evt) {\n    var rect = animator.canvas.getBoundingClientRect();\n    var x = evt.clientX - rect.left - animator.left;\n    var y = evt.clientY - rect.top - animator.top;\n    var scaledX = (x * 2.0/animator.width) - 1;\n    var scaledY = (y * 2.0/animator.height) - 1;\n    if ((scaledX < -1) || (scaledX > 1) || (scaledY < -1) || (scaledY > 1)) {\n      return;\n    }\n    mist.setMouse(scaledX,scaledY);\n  }; // function\n} // makeMouseMoveHandler\n\n// +--------------+--------------------------------------------------\n// | Constructors |\n// +--------------+\n\n/**\n * Create a new animator *without* rendering the frame.\n */\nMIST.ui.Animator = function(exp, params, context, canvas, log) {\n  // Generate an id\n  this.id = ++_animatorCount_;\n\n  // Remember parameters\n  this.exp = exp;\n  this.params = params;\n  this.context = context;\n  this.canvas = canvas;\n  this.log = log || (function(txt) {});\n\n  // The number of frames per second.\n  this.fps = 30;\n\n  // Are we animating the image?\n  this.on = true;\n\n  // The increments used for variables.\n  this.increments = [19,23,29,31,37,41,43,47,53,59,61,67,71].map(function (val) { return val/3000; });\n\n   // When was the last time we drew a frame?  (Used primarily when we\n   // need to re-render a particular frame.)\n  this.time = { t:0, m:0, h:0, d:0 };\n\n  this.simTime = mist.gifTime();\n  \n  // Set up the bounds (which also sets up the render width and height)\n  this.bounds(0, 0, canvas.width, canvas.height);\n\n\n  // Parse the expression\n  try {\n    this.exp = MIST.sanitize(builtinsPattern, this.exp);\n    this.expParsed = MIST.parse(this.exp);\n  }\n  catch (err) {\n    this.log(err);\n    // throw err;\n  }\n} // Constructor\n\n// +---------+-------------------------------------------------------\n// | Methods |\n// +---------+\n\n/**\n * Set the bounds of the animator.\n */\nMIST.ui.Animator.prototype.bounds = function(left,top,width,height) {\n  this.left = left;\n  this.top = top;\n  this.width = width;\n  this.height = height;\n\n  console.log(\"mist ui bounds -- exp:\"+this.exp);\n\n   // Set up the render width and height\n  if (this.exp.indexOf('t.') >= 0) {\n    this.renderWidth = 200;\n    this.renderHeight = 200;\n  }\n  else {\n    this.renderWidth = width;\n    this.renderHeight = height;\n  }\n}; // bounds\n\n/**\n * Show the coordinates\n */\nMIST.ui.Animator.prototype.coords = function() {\n  var context = this.canvas.getContext(\"2d\");\n  context.font=\"15px Helvetica\";\n  context.textAlign=\"end\";\n  context.textBaseline=\"middle\";\n  context.fillText(\"-1\", this.left-5, this.top+(this.height/2));\n  context.textAlign=\"start\";\n  context.textBaseline=\"middle\";\n  context.fillText(\"+1\", this.left+this.width+5, this.top+(this.height/2));\n  context.textAlign=\"center\";\n  context.textBaseline=\"bottom\";\n  context.fillText(\"-1\", this.left+(this.width/2), this.top-5);\n  context.textAlign=\"center\";\n  context.textBaseline=\"top\";\n  context.fillText(\"+1\", this.left+(this.width/2), this.top+this.height+5);\n}; // coords\n\n/**\n *Increment simulated time\n */\n// var incTime = function(t) {\n// t.ms += 33; \n//  if (t.ms >= 1000) {\n//         t.ms = 0;\n//         t.s++;\n//   }\n//   if (t.s > 60) {\n//         t.s = 0;\n//         t.m++;\n//   }\n//   if (t.m > 60) {\n//         t.m = 0;\n//         t.h++\n//   }\n//   if (t.h > 24) {\n//         t.h = 0;\n//         t.d++;\n//   }\n//   if (t.d > 365) {\n//         t.d = 0;\n//         t.y++;\n//   }\n//  return t;\n// }\n\n/**\n * Do one frame of the animation.\n */\nMIST.ui.Animator.prototype.frame = function() {\n  // Update the values of the parameters\n  var paramInfo = \"\";\n  var params = this.parameters;\n  var i = 0;\n  for (var p in params) {\n    var newval = MIST.wrapsum(params[p], this.increments[i++]);\n    params[p] = newval;\n    this.context[p] = newval;\n    paramInfo += p + \": \" + newval + \"\\n\";\n  } // for\n  //var context = this.context;\n\n  // Inform the user\n  if (paramInfo) {\n    this.log(paramInfo);\n  } // if (paramInfo)\n\n\n\n  // Make the frame: if we are recording, we need to simulate time\n  try {\n    /*if ($(\"#recorder\").html() == \"gif\") {\n\n      //var tempTim = incTime(this.simTime);\n\n      this.time = MIST.renderGIF(incTime(this.simTime), this.expParsed, this.context, this.canvas,\n          this.renderWidth, this.renderHeight, this.left, this.top,\n          this.width, this.height);\n\n      console.log(encoder.addFrame(this.canvas.getContext('2d')));   \n    }\n    else {*/\n      this.time = MIST.render(this.expParsed, this.context, this.canvas,\n          this.renderWidth, this.renderHeight, this.left, this.top,\n          this.width, this.height);\n    //}\n  }  \n  catch(err) {\n    this.log(err);\n  }   \n} // frame\n\n/**\n * Create a jpg and switch to that.\n */\nMIST.ui.Animator.prototype.jpg = function() {\n  //var data = this.canvas.toDataURL(\"image/jpeg\");\n  //document.location = data;\n  //$(\"#test\").html(\"hell goats\");\n\n // $(\"#change\").attr(\"content\", \"http://www.cs.grinnell.edu/~hansonse17/main/twit.png\");\n  //$(\"meta[property='og\\\\:image']\").attr(\"content\", \"http://www.cs.grinnell.edu/~hansonse17/main/widescreenbackscodes.png\");\n} // MIST.ui.Animator.prototype.jpg\n\n/**\n * Create a jpeg and put it in the body of the page.\n */\nMIST.ui.Animator.prototype.jpgBody = function() {\n  // Convert the canvas to an image.\n  var data = this.canvas.toDataURL(\"image/jpeg\");\n  var img = document.createElement(\"img\");\n  img.src = data;\n  // Remove the children\n  while (document.body.children.length > 0) {\n    document.body.removeChild(document.body.children[0]);\n  } // while\n  // And add the image\n  document.body.appendChild(img);\n}\n\n/**\n * Run the animation.\n */\nMIST.ui.Animator.prototype.run = function() {\n  var runner = function(animator) {\n    return function() { animator.run(); }\n  };\n\n  // Build one frame\n  this.frame();\n\n  \n  // And schedule the next frame\n  if (this.on) {\n    //var animator = this;\n    // setTimeout(runner(this), 1000/this.fps);\n    window.requestAnimationFrame(runner(this));\n  }\n}; // run\n\n/**\n * Change the fps of the animation.  (Defaults to 30 if unspecified.)\n * DEPRECATED.  We now rely on the browser to set the animation rate.\n */\nMIST.ui.Animator.prototype.setFps = function(fps) {\n  this.fps = fps || 30;\n}; // setFps\n\n/**\n * Set the resolution for rendering.\n */\nMIST.ui.Animator.prototype.setResolution = function(width,height) {\n  this.renderWidth = width;\n  this.renderHeight = height;\n}; // setResolution\n\n/**\n * Stop the animation from running.\n */\nMIST.ui.Animator.prototype.stop = function() {\n  this.on = false;\n  this.canvas.onmousemove = undefined;\n}; // stop\n\n/**\n * Start the animation running.\n */\nMIST.ui.Animator.prototype.start = function()\n{  \n// Set up a hash for the parameters\n  this.parameters = {};\n  if (this.params != \"\") {\n    var tmp = this.params.split(\",\");\n    for (var i = 0; i < tmp.length; i++) {\n      if (this.params[i] !== \"\") {\n        this.parameters[tmp[i]] = -1;\n      } // if\n    } // for\n  } // if (this.params != \"\")\n\n  // Get the remaining info.  // Hack\n  this.on = (this.exp.indexOf(\"t.\") > -1) || (this.exp.indexOf(\"m.\") > -1);\n\n  // Set up a mouse listener for the canvas\n  this.canvas.onmousemove = makeMouseMoveHandler(this);\n  // And go\n  this.run();\n}; // start\n\n/**\n * mistui-dialogs.js\n *   Some simple scripts for dealing with \"dialog\" boxes in MIST.\n */\n\n/**\n * Hide all of the dialogs on the page.\n */\n// function hideAllDialogs()\n// {\n//   var dialogs = document.getElementsByClassName(\"dialog\");\n//   for (var i = 0; i < dialogs.length; i++) {\n//     dialogs[i].style.visibility = \"hidden\";\n//   } // for\n// } // hideAllDialogs\n\n/**\n * Show the dialog with a particular id.\n */\n// function showDialog(id)\n// {\n//   hideAllDialogs();\n//   var dialog = document.getElementById(id);\n//   dialog.style.visibility = \"visible\";\n//   return dialog;\n// } // showDialog\n\n/**\n * Put quotation marks around a string.\n */\n// function quote(contents, mark)\n// {\n//   if (!mark) { mark = \"\\\"\"; }\n//   return mark + contents + mark;\n// } // quote\n\n/**\n * Make a button.\n */\n// function makeButton(id, value, onclick)\n// {\n//   return \"<input type=\\\"button\\\" id=\" + quote(id)\n//          + \" value= \" + quote(value)\n//          + \" onclick= \" + quote(onclick, \"'\") + \"/>\";\n// } // makeButton\n\n/**\n * Create the HTML for a dialog box with a particular body and add\n * it to the page.  Handlers is an object that contains the \n * button/method pairs.\n */\n// function makeDialog(id, content, handlers)\n// {\n//   var dialog = document.createElement(\"div\");\n//   dialog.setAttribute(\"id\", id);\n//   dialog.setAttribute(\"class\", \"dialog\");\n//   var buttons = \"<div class='dialogbuttons'>\\n\";\n//   buttons += makeButton(id, \"Cancel\", \"hideAllDialogs()\");\n//   for (var key in handlers) {\n//     buttons += makeButton(id+\"-\"+\"key\", key, handlers[key]);\n//   } // for\n//   buttons += \"</div>\\n\";\n//   dialog.innerHTML = \"<div class=\\\"innerdialog\\\">\" \n//                    + content\n//                    + buttons\n//                    + \"</div>\\n\";\n//   document.body.appendChild(dialog);\n// } // makeDialog\n/**\n * mistui-help.js\n *   A simple popup help system.\n */\n\n// +-------+---------------------------------------------------------\n// | Usage |\n// +-------+\n\n/*\n   Option 1: Automatic event handling\n   \n   Call MISTui.addHelp(id,helptext).  When we mouse over the\n   element, help text pops up.\n\n   Option 2: Manual event handling\n   \n   a. Call MISTui.showHelp(text, x, y) when you want to show the \n      help text.\n\n   b. Call MISTui.hideHelp() when uyou want to hide\n */\n\n// +-------+---------------------------------------------------------\n// | Setup |\n// +-------+\n\nvar MISTui = {};\n\n// +---------+-------------------------------------------------------\n// | Globals |\n// +---------+\n\n/**\n * The id of the popup help section.\n */\nvar HELP_ID = \"helptext\";\n\n// +-----------+-----------------------------------------------------\n// | Functions |\n// +-----------+\n\n/**\n * Add help to an element with the specified id.\n */\nMISTui.addHelp = function(id,helptext) {\n  //var selector = \"#\" + id;\n  // var showhelp = function(event) {\n  //   var loc = document.getElementById(id).getBoundingClientRect();\n  //   MISTui.showHelp(helptext, loc.right-5, loc.top+3); // Yay magic numbers\n  // };\n  //$(selector).mouseenter(showhelp);\n  //$(selector).mouseover(showhelp);\n  //$(selector).mouseout(MISTui.hideHelp);\n}; // MISTui.addHelp\n\n/**\n * Hide the help text.\n */\nMISTui.hideHelp = function() {\n  var help = document.getElementById(HELP_ID);\n  if (help) {\n    help.style.visibility = \"hidden\";\n  } // if (help)\n} // MISTui.hideHelp\n\n/**\n * Show some help text at (x,y)\n */\nMISTui.showHelp = function(text, x, y) {\n  // Grab the help element.\n  var help = document.getElementById(HELP_ID);\n\n  // If there's no such element, build it.\n  if (!help) {\n    help = document.createElement(\"div\");\n    help.setAttribute(\"id\",HELP_ID);\n    help.setAttribute(\"class\",\"misthelp\");\n    // help.style.position = \"absolute\";\n    document.body.appendChild(help);\n  } // if (!help)\n\n  // Fill in the details\n  help.innerHTML = text;\n  help.style.top = y + \"px\";\n  help.style.left = x + \"px\";\n  help.style.visibility = 'visible';\n} // MISTui.showHelp\n\n/**\n * mistui-menus.js\n *   Some simple code for setting up menus for MIST.\n */\n\n// +-------+---------------------------------------------------------\n// | Usage |\n// +-------+\n\n/*\n   A. Programmatic Creation of Menus\n  \n     1. Create a div for the menus.  This div should have class menubar.\n\n     2. Create new menus with\n\n        MISTui.addMenu(id-of-menubar, id-of-menu, title-of-menu)\n\n     3. Add new items to the menu with\n    \n        MISTui.addMenuItem(id-of-menu, id-of-item, name, helptext, handler)\n\n     4. Add separators to the menu with\n       \n        MISTui.addSeparator(id-of-menu, id-of-separator);\n\n     5. Refresh the menu after adding items and separators with\n\n        MISTui.refreshMenu(id-of-menu)\n\n     6. Remove items with\n\n        MISTui.removeMenuItem(id-of-menu, id-of-item);\n\n   B. Other usage\n \n     * You may find it useful to format an existing menu with\n\n       MISTui.formatMenu(id-of-menu)\n\n       But the programatic creation is suggested.\n */\n\n// +-------+---------------------------------------------------------\n// | Setup |\n// +-------+\n\n\n// +-------------------+---------------------------------------------\n// | Primary Functions |\n// +-------------------+\n\n/**\n * Add a menu with a given id to an element.  \n */\nMISTui.addMenu = function(parent, menuid, menuname) {\n  // Sanity check\n \n  // Special case: Element is identified by a string\n  if (typeof(parent) == \"string\") {\n    var element = document.getElementById(parent);\n    return MISTui.addMenu(element, menuid, menuname);\n  }\n\n  // If there's no name, use the id\n  if (!menuname) {\n    menuname = menuid;\n  }\n\n  // Generate the menu \n  var menu = document.createElement(\"li\");\n  var label = document.createElement(\"a\");\n  label.innerHTML = menuname;\n  menu.appendChild(label);\n  var items = document.createElement(\"ul\");\n  items.id = menuid+\"-items\";\n  items.className = \"menu\";\n  menu.appendChild(items);\n\n  // Add the menu\n  parent.appendChild(menu);\n\n  // And do the formatting\n  MISTui.formatMenu(menuid);\n} // MISTui.addMenu\n\n/**\n * Add an item to a menu.\n */\nMISTui.addMenuItem = function(menu, id, name, help, handler) {\n  var items = document.getElementById(menu + \"-items\");\n  if (!items) {\n    console.log( \"Cannot find menu \" + menu);\n  }\n\n  var wrapHandler = function(menu,handler) {\n    return function(evt) {\n      // Disable the menu temporarily so that it disappears\n      var li = document.getElementById(menu + \"-items\").parentNode;\n      li.className = \"disabled\";\n      setTimeout(function() { li.className = \"\"; }, 500);\n      // Get rid of the help\n      MISTui.hideHelp();\n      // And do the real handling.\n      handler(evt);\n    }\n  } // wrapHandler\n\n  // Build the item\n  var item = document.createElement(\"li\");\n  item.id = id;\n  item.innerHTML = \"<a href='#'>\" + name + \"</a>\";\n\n  // Add the handler\n  if (handler) {\n    item.onclick = wrapHandler(menu,handler);\n  }\n  else {  \n    item.onclick = wrapHandler(menu, function(evt) { });\n  }\n\n  // Add the item to the list of items\n  items.appendChild(item);\n \n  // Add help handler if appropriate\n  if (help && MISTui.addHelp) {\n    MISTui.addHelp(id, help);\n  }\n}; // MISTui.addMenuItem\n\n/**\n * Add a separator to a menu.\n */\nMISTui.addMenuSeparator = function(menu,id) {\n  var items = document.getElementById(menu + \"-items\");\n  if (!items) {\n    console.log( \"Cannot find menu \" + menu);\n  }\n\n  // Build the item\n  var item = document.createElement(\"li\");\n  item.id = id;\n  item.className = \"separator\";\n\n  // Add the item to the list of items\n  items.appendChild(item);\n} // addMenuSeparator(menu,id)\n\n/**\n * Clear all of the elements of a menu.\n */\nMISTui.clearMenu = function(menu) {\n  var items = document.getElementById(menu + \"-items\");\n  if (!items) {\n    console.log( \"Cannot find menu \" + menu);\n  }\n  items.innerHTML = \"\";\n} // clearMenu\n  \n/**\n * Format the menu appropriately.\n */\nMISTui.formatMenu = function(menuid) {\n} // formatMenu\n\n/**\n * Refresh an existing menu (e.g., after adding or removing an element).\n */\nMISTui.refreshMenu = function(menuid) {\n}; // MISTui.refreshMenu\n\n/**\n * Remove a menu item.\n */\nMISTui.removeMenuItem = function(menuid, itemid) {\n  var parent = document.getElementById(menuid + \"-items\");\n  var item = document.getElementById(itemid);\n  if (!parent) {\n    console.log( \"No such menu: \" + menuid);\n  }\n  if (!item) {\n    console.log( \"No such item: \" + itemid);\n  } \n  parent.removeChild(item);\n} // removeMenuItem\n\nexport default MIST;","import React, { useEffect, useState } from \"react\";\nimport MIST from \"./mistui.js\";\n\n/* MISTImage props\n *   resolution: the resolution used to render the image (may be smaller than\n *     the actual canvas)\n *   code: the MIST code used to render the image\n *   width: (optional, defaults to resolution) the width of the canvas\n *   height: (optional, defaults to resolution) the height of the canvas\n */\nexport default function MISTImage(props) {\n  const [canvas] = useState(React.createRef());\n  const [animator, setAnimator] = useState(null);\n\n  useEffect(() => {\n    if (animator) {\n      animator.stop();\n    }\n    const new_animator = new MIST.ui.Animator(\n      props.renderFunction,\n      [],\n      {},\n      canvas.current\n    );\n    new_animator.setResolution((props.width < 150) ? props.width : 150,\n        (props.height < 150) ? props.height : 150);\n    new_animator.frame();\n    if(props.automated) {\n        new_animator.start();\n    }\n    setAnimator(new_animator);\n    return () => {\n      if (animator) {\n        animator.stop();\n      }\n    };\n  }, [props.renderFunction, canvas, setAnimator]);\n\n  useEffect(() => {\n    if (animator) {\n      animator.setResolution((props.width < 150) ? props.width : 150,\n      (props.height < 150) ? props.height : 150);\n      animator.frame();\n    }\n  }, [animator, props.width, props.height]);\n\n  return (\n    <canvas\n      className=\"mist-image\"\n      width={props.width}\n      height={props.height}\n      style={{\n        position: \"absolute\",\n        top: props.y,\n        left: props.x,\n        width: props.width,\n        height: props.height,\n      }}\n      onMouseOut={() => {\n        if (!props.automated) {\n          if (animator) {\n            animator.stop();\n          }\n        }\n      }}\n      onMouseOver={() => {\n        if (!props.automated) {\n          if (animator) {\n            animator.stop();\n            animator.start();\n          }\n        }\n      }}\n      onClick={props.onClick}\n      ref={canvas}\n    />\n  );\n}\n","import React, { useState } from \"react\";\nimport Portal from \"./Portal\";\nimport { Rect, Group, Text } from \"react-konva\";\nimport gui from \"./mistgui-globals.js\";\nimport { width, height } from \"./globals\";\nimport popupDimensions from \"./globals-popup_canvas-dimensions\";\nimport MISTImage from \"./MISTImage\";\nimport \"./../design/styleSheets/FunBar.css\";\n\nfunction PopupCanvas(props) {\n  const [imageName, setImageName] = useState(\"\");\n\n  return (\n    <>\n      <Background {...props} />\n      <Portal>\n        <PortalTextBox {...props} setImageName={setImageName} />\n        <PortalImage {...props} />\n        <PortalFunction {...props} />\n      </Portal>\n      <PortalButtons {...props} imageName={imageName} />\n    </>\n  );\n}\n\nfunction Background(props) {\n  return (\n    <Group x={props.x} y={props.y}>\n      <Rect\n        width={width}\n        height={height}\n        fill={\"black\"}\n        opacity={0.7}\n      />\n      <Rect\n        x={popupDimensions.canvasX}\n        y={popupDimensions.canvasY}\n        width={popupDimensions.canvasWidth}\n        height={popupDimensions.canvasHeight}\n        fill={\"white\"}\n        cornerRadius={30}\n        opacity={0.8}\n      />\n    </Group>\n  );\n}\n\nfunction PortalTextBox(props) {\n  return (\n    <div // Text box: \"Enter Name of Image\"\n      style={{\n        position: \"absolute\",\n        top: props.top + popupDimensions.textfieldY,\n        left: props.left + popupDimensions.textfieldX,\n        fontSize: gui.popTextFontSize,\n        fontFamily: gui.functionFont,\n        width: popupDimensions.textfieldWidth,\n        height: popupDimensions.textfieldHeight,\n        textAlign: \"center\",\n        alignItems: \"center\",\n      }}\n    >\n      <input\n        type={\"text\"}\n        placeholder={\"Enter Name Of Image\"}\n        style={{\n          width: popupDimensions.textfieldWidth,\n          height: popupDimensions.textfieldHeight,\n          border: \"2px solid #008CBA\",\n          textAlign: \"center\",\n        }}\n        onChange={(e) => props.setImageName(e.target.value)}\n      />\n    </div>\n  );\n}\n\nfunction PortalImage(props) {\n  return (\n    <MISTImage\n      x={props.left + popupDimensions.imageX}\n      y={props.top + popupDimensions.imageY}\n      width={popupDimensions.imageWidth}\n      height={popupDimensions.imageHeight}\n      //renderFunction={\"x\"}\n      renderFunction={props.renderFunction.renderFunction}\n      automated={true}\n    />\n  );\n}\n\nfunction PortalFunction(props) {\n  return (\n    <div\n      style={{\n        position: \"absolute\",\n        top: props.top + popupDimensions.rfTextY,\n        left: props.left + popupDimensions.rfTextX,\n        fontSize: 20,\n        textAlign: \"center\",\n        width: popupDimensions.rfTextWidth,\n        height: popupDimensions.rfTextHeight,\n        overflow: \"auto\",\n      }}\n    >\n      <p style={{\n        width: popupDimensions.rfTextWidth,\n        height: popupDimensions.rfTextHeight,\n        fill: 'red'\n      }}>{props.renderFunction.renderFunction}</p>\n    </div>\n  );\n}\n\nfunction PortalButtons(props) {\n  return (\n    <Group\n      x={props.x + popupDimensions.buttonX}\n      y={props.y + popupDimensions.buttonY}\n    >\n      {[\"Cancel\", \"Download\"].map((u, i) => {\n        return (\n          <Group\n            x={popupDimensions.buttonMargin + i * popupDimensions.buttonOffset}\n            onClick={() => {\n              if (u === \"Cancel\") {\n                props.closePortal();\n              }\n            }}\n          >\n            <Rect\n              fill={\"white\"}\n              stroke={\"#008CBA\"}\n              strokeWidth={2}\n              width={popupDimensions.buttonWidth}\n              height={popupDimensions.buttonHeight}\n            />\n            <Text\n              fontSize={15}\n              text={u}\n              width={popupDimensions.buttonWidth}\n              height={popupDimensions.buttonHeight}\n              align={\"center\"}\n              verticalAlign={\"middle\"}\n            />\n          </Group>\n        );\n      })}\n      <SaveButton {...props} index={2} />\n      <ExpertButton {...props} index={3} />\n    </Group>\n  );\n}\n\nfunction SaveButton(props) {\n\n  function SaveImage() {\n\n    let title = removeOuterWhiteSpace(props.imageName)\n\n    // check that the user has given a title\n    if (title === \"\")\n      alert(\"Please type a valid name\")\n    else {\n\n      // check if the user already has an image with that title\n      // or if the user is not logged in \n      let url = \"api?action=imageexists&title=\" + title;\n      fetch(url)\n        .then((req) => req.json())\n        .then((response) => {\n          if (response === \"logged out\")\n            alert(\"Please log in to save images.\")\n          if (response === \"image exists\")\n            alert(\"You already have an image with this name; please name it something else.\")\n          if (response === \"image does not exist\") {\n\n            let image = {\n              action: \"saveimage\",\n              title: title,\n              code: props.renderFunction.renderFunction\n            }\n\n            // save the image\n            fetch(\"api\", {\n              method: 'POST',\n              headers: {\n                'Content-Type': 'application/json',\n              },\n              credentials: 'include',\n              body: JSON.stringify(image)\n            }).then(props.closePortal())\n              .then(alert(\"Image Saved!\"))\n          }\n        });\n    }\n  }\n\n  return (\n    <Group\n      x={\n        popupDimensions.buttonMargin +\n        props.index * popupDimensions.buttonOffset\n      }\n      onClick={() => SaveImage()}\n    >\n      <Rect\n        fill={\"white\"}\n        stroke={\"#008CBA\"}\n        strokeWidth={2}\n        width={popupDimensions.buttonWidth}\n        height={popupDimensions.buttonHeight}\n      />\n      <Text\n        fontSize={15}\n        text={\"Save\"}\n        width={popupDimensions.buttonWidth}\n        height={popupDimensions.buttonHeight}\n        align={\"center\"}\n        verticalAlign={\"middle\"}\n      />\n    </Group>\n  );\n}\n\n\nfunction ExpertButton(props) {\n  return (\n    <Group\n      x={\n        popupDimensions.buttonMargin +\n        props.index * popupDimensions.buttonOffset\n      }\n    >\n      <Rect\n        fill={\"white\"}\n        stroke={\"#008CBA\"}\n        strokeWidth={2}\n        width={popupDimensions.buttonWidth}\n        height={popupDimensions.buttonHeight}\n      />\n      <Text\n        fontSize={15}\n        text={\"Expert\"}\n        width={popupDimensions.buttonWidth}\n        height={popupDimensions.buttonHeight}\n        align={\"center\"}\n        verticalAlign={\"middle\"}\n      />\n    </Group>\n  );\n}\n\n/**\n * removeOuterWhiteSpace takes a string and removes white space at the beginning and end\n * of the string, but not the white space in the middle of the string.\n * returns a string\n */\nvar removeOuterWhiteSpace = function (string) {\n  string = string.replace(/^ */, \"\");\n  string = string.replace(/ *$/, \"\");\n  return string;\n};\n\nexport default PopupCanvas;\n","import {width, height, funBarHeight} from './globals';\n\nconst funbarY = height - funBarHeight;\n\nconst margin = funBarHeight * 0.2;\n\nconst rfTextAreaHeight = funBarHeight - 2 * margin;\n\nconst functionButtonX = width * 0.85;\nconst functionButtonWidth = width * 0.06;\nconst functionButtonHeight = funBarHeight - 2 * margin;\n\nconst imageButtonX = width * 0.92;\nconst imageButtonWidth = width * 0.06;\nconst imageButtonHeight = funBarHeight - 2 * margin;\n\nexport default {\n    funbarY,\n    margin,\n    rfTextAreaHeight,\n    functionButtonX,\n    functionButtonWidth,\n    functionButtonHeight,\n    imageButtonX,\n    imageButtonWidth,\n    imageButtonHeight\n}","import { width} from \"./globals\";\n\n// +--------------+--------------------------------------------------\n// | FunBar Fonts |\n// +--------------+\n\nconst funBarFontSize = width / 75;\n\n\nexport default {\n    funBarFontSize,\n}","import React, { useState } from \"react\";\nimport { Rect, Group, Text } from \"react-konva\";\nimport gui from \"./mistgui-globals.js\";\nimport \"../design/styleSheets/FunBar.css\";\nimport { Spring, animated } from \"react-spring/renderprops-konva\";\nimport PopupCanvas from \"./PopupCanvas\";\nimport funbarDimensions from \"./globals-funbar-dimensions\";\nimport fontGlobals from './globals-fonts';\nimport { width, height, funBarHeight } from \"./globals.js\";\n\nfunction FunBar(props) {\n  return (\n    <Group y={funbarDimensions.funbarY}>\n      <BarBase {...props} />\n      <FunctionButton {...props} />\n      <ImageButton {...props} />\n    </Group>\n  );\n}\n\nfunction BarBase(props) {\n  return (\n    <Group>\n      <Rect // Blue bar at bottom of workspace\n        x={0}\n        y={0}\n        width={width}\n        height={funBarHeight}\n        fill={props.bg}\n      />\n      <Rect // Render function white background\n        x={funbarDimensions.margin}\n        y={funbarDimensions.margin}\n        width={gui.funBarTextAreaWidth}\n        height={funbarDimensions.rfTextAreaHeight}\n        fill={props.functionBoxBg}\n      />\n      <Text // Render function text display\n        text={props.renderFunction.renderFunction}\n        x={gui.funBarTextOffset}\n        y={gui.funBarTextOffset}\n        width={gui.funBarTextAreaWidth - gui.funBarTextOffset}\n        height={funbarDimensions.rfTextAreaHeight}\n        verticalAlign={'middle'}\n        fill={props.functionTextColor}\n        fontFamily={\"Courier New\"}\n        fontSize={gui.funBarDisplayFontSize}\n      />\n      <Text // \"Save as...\" display in blue bar\n        text={\"Save as...\"}\n        x={gui.funBarTextAreaWidth + 2 * gui.funBarOffset}\n        y={gui.funBarHeight / 2 - gui.funBarFontSize / 2}\n        width={gui.funBarWidth * (3 / 25)}\n        fill={\"white\"}\n        fontSize={fontGlobals.funBarFontSize}\n      />\n    </Group>\n  );\n}\n\nfunction FunctionButton(props) {\n  const [functionButtonHovered, setFunctionButtonHovered] = useState(false);\n\n  return (\n    <Group // Function Button on blue bar\n      x={funbarDimensions.functionButtonX}\n      y={funbarDimensions.margin}\n    >\n      <Spring // animates function button fill\n        native\n        from={{\n          fill: props.renderFunction.isRenderable ? \"orange\" : \"#f79f6a\",\n        }}\n        to={{\n          fill: props.renderFunction.isRenderable\n            ? functionButtonHovered\n              ? \"white\"\n              : \"orange\"\n            : \"#f79f6a\",\n        }}\n      >\n        {(props) => (\n          <animated.Rect // function button\n            {...props}\n            x={0}\n            y={0}\n            width={funbarDimensions.functionButtonWidth}\n            height={funbarDimensions.functionButtonHeight}\n            stroke={\"#424874\"}\n            cornerRadius={8}\n          />\n        )}\n      </Spring>\n      <Text // function button\n        text={\"Function\"}\n        x={0}\n        width={funbarDimensions.functionButtonWidth}\n        height={funbarDimensions.functionButtonHeight}\n        align={\"center\"}\n        verticalAlign={'middle'}\n        fill={!functionButtonHovered ? \"white\" : \"grey\"}\n        fontSize={fontGlobals.funBarFontSize}\n        onMouseOver={() => {\n          setFunctionButtonHovered(true);\n        }}\n        onMouseOut={() => {\n          setFunctionButtonHovered(false);\n        }}\n      />\n    </Group>\n  );\n}\n\nfunction ImageButton(props) {\n  const [imageButtonClicked, setImageButtonClicked] = useState(false);\n  const [imageButtonHovered, setImageButtonHovered] = useState(false);\n\n  function closePortal() {\n    setImageButtonClicked(false);\n  }\n\n  return (\n    <Group // Image Button on blue bar\n      x={funbarDimensions.imageButtonX}\n      y={funbarDimensions.margin}\n    >\n      <Spring // animates image button fill\n        native\n        from={{\n          fill: props.renderFunction.isRenderable ? \"orange\" : \"#f79f6a\",\n        }}\n        to={{\n          fill: props.renderFunction.isRenderable\n            ? imageButtonHovered\n              ? \"white\"\n              : \"orange\"\n            : \"#f79f6a\",\n        }}\n      >\n        {(props) => (\n          <animated.Rect // function button\n            {...props}\n            width={funbarDimensions.imageButtonWidth}\n            height={funbarDimensions.imageButtonHeight}\n            stroke={\"#424874\"}\n            cornerRadius={8}\n          />\n        )}\n      </Spring>\n      <Text\n        text={\"Image\"}\n        width={funbarDimensions.imageButtonWidth}\n        height={funbarDimensions.imageButtonHeight}\n        align={\"center\"}\n        verticalAlign={'middle'}\n        fill={imageButtonHovered ? \"gray\" : \"white\"}\n        fontSize={fontGlobals.funBarFontSize}\n        onClick={() => {\n          if (props.renderFunction.isRenderable) {\n            setImageButtonClicked(true);\n            setImageButtonHovered(false);\n          }\n        }}\n        onMouseOver={() => {\n          setImageButtonHovered(true);\n        }}\n        onMouseOut={() => {\n          setImageButtonHovered(false);\n        }}\n      />\n      {imageButtonClicked && (\n        <PopupCanvas\n          {...props}\n          x={-funbarDimensions.imageButtonX}\n          y={-(height - funBarHeight - funbarDimensions.margin)}\n          closePortal={closePortal}\n        />\n      )}\n    </Group>\n  );\n}\n\nexport default FunBar;\n","import { width, functionWidth, valueWidth } from \"./globals\";\n\n// +----------------+------------------------------------------------\n// | Function Nodes |\n// +----------------+\n\nconst functionTrashX = functionWidth * 4 / 5;\n\nconst functionTrashY = - functionWidth * 1 / 20;\n\n// Horizontal offset of an outlet\nconst outletXOffset = functionWidth / 20;\n\n// Vertical space between outlets\nconst outletYOffset = functionWidth / 4;\n\n// Offset of the first outlet in relation to a node group\nconst outletStartY = (functionWidth - 2 * outletYOffset) / 2;\n\n// Offset of the image render box in relation to the function group (Konva <Group/>).\nconst functionImageBoxOffset = functionWidth * 6 / 7;\n\n// +-------------+---------------------------------------------------\n// | Value Nodes |\n// +-------------+\n\nconst valueOffset = valueWidth / 2;\n\nconst valueSideLength = valueOffset * 1.414; // 1.414 === √2\n\nconst valueTrashX = valueWidth * 1 / 6;\n\nconst valueTrashY = valueWidth * 1 / 7;\n\n// Offset of the image render box in relation to the value group.\nconst valueImageBoxOffset = valueWidth * 2 / 3;\n\n// +-----------+-----------------------------------------------------\n// | All Nodes |\n// +-----------+\n\n// side length of the image render box when not expanded\nconst imageBoxSideLength = width / 80;\n\n// side length of the image render box when expanded\nconst renderSideLength = width / 18;\n\n// +---------+-------------------------------------------------------\n// | Exports |\n// +---------+\n\nexport default {\n  // function nodes\n  functionWidth,\n  outletXOffset,\n  outletYOffset,\n  outletStartY,\n  functionTrashX,\n  functionTrashY,\n  functionImageBoxOffset,\n  // value nodes\n  valueSideLength,\n  valueOffset,\n  valueWidth,\n  valueTrashX,\n  valueTrashY,\n  valueImageBoxOffset,\n  // all nodes\n  imageBoxSideLength,\n  renderSideLength,\n};\n","/**\n * The function nodes in the workspace for MIST.\n *\n * MIST is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\n// +-------+---------------------------------------------------------\n// | Notes |\n// +-------+\n/* 1. The trashcan function creates a trashcan icon on the top left of the function node. The onClick\n      attrribute on that deletes the node from the workspace\n\n   2. Props received from the workspace contain the following:\n   - name : String; name of the node\n   - key : int; unique key attribute \n   - index : int; index of the ndoe\n   - x : int; x coordinate\n   - y : int; y coordinate \n   - offsetX : int; to account for the shift in the x-coordinate \n   - offsetY : int; to account for the shift in the y-coordinate\n   - numInputs : int; number of lines coming into the node\n   - numOutlets : int; number of outlets of the node\n   - renderFunction : String; the expression in the node\n   - updateNodePosition : function; Updates node position in the workspace\n   - updateLinePosition : function; Updates line position in the workspace\n   - funClicked : function; Listens to clicks on the node\n   - outletClicked : function; Listens to clicks on the outlets\n   - dblClickHandler : function; Listens to double clicks on the function for generation of \n                       temporary line \n   - removeNode : function; removes node from the workspace\n   - hoverShadowColor : String; changes hover color based on theme\n\n   3. The dragBoundFunc attribute on the group helps keep the function node within the \n      boundaries of the workspace. \n\n   4. UseStrictMode is a good react-konva practice.\n  \n\n*/\n// +-------+\n// | Notes |\n// +-------+---------------------------------------------------------\n\n\n// +----------------------------+------------------------------------\n// | All dependent files        |\n// +----------------------------+\n\nimport React, { useState, useEffect, useRef } from \"react\";\nimport { Rect, Group, Text, Shape, Image } from \"react-konva\";\nimport Konva from \"konva\";\nimport Portal from \"./Portal\";\nimport gui from \"./mistgui-globals.js\";\nimport MISTImage from \"./MISTImage\";\nimport useImage from \"use-image\";\nimport nodeDimensions from \"./globals-nodes-dimensions.js\";\nimport globals from \"./globals.js\";\n\n// +----------------------------+\n// | All dependent files        |\n// +----------------------------+------------------------------------\n\nfunction FunNode(props) {\n  const name = props.name;\n  const index = props.index;\n  const x = props.x;\n  const y = props.y;\n  const rep = gui.functions[name].rep;\n  const numOutlets = props.numOutlets;\n  const [showImage, setShowImage] = useState(false);\n  const [hovered, setHovered] = useState(false);\n  const [trashHovered, setTrashHovered] = useState(false);\n  const [image] = useImage(require(\"./trash.png\"));\n  const groupRef = useRef(null);\n\n// +----------------------------+------------------------------------\n// | Trashcan                   |\n// +----------------------------+\n\n  function Trashcan() {\n    return (\n      <Image\n        image={image}\n        x={nodeDimensions.functionTrashX}\n        y={nodeDimensions.functionTrashY}\n        width={14}\n        height={14}\n        shadowColor={trashHovered ? \"red\" : \"cyan\"}\n        shadowBlur={5}\n        visible={hovered} //Only visible when hovering over node\n        onMouseEnter={() => {\n          setTrashHovered(true);\n        }}\n        onMouseLeave={() => {\n          setTrashHovered(false);\n          setHovered(false);\n        }}\n        onClick={() => props.removeNode(props.index)} //Removes the node from the workspace\n      />\n    );\n  }\n\n// +----------------------------+\n// | Trashcan                   |\n// +----------------------------+------------------------------------\n\n  useEffect(() => {\n    if (!props.renderFunction) {\n      setShowImage(false);\n    }\n  }, [props.renderFunction]); //Re-renders whenever the render function changes\n\n// +----------------------------------------+------------------------\n// | Entire Function Group                  |\n// +----------------------------------------+\n\n  return (\n    <Group\n      ref={groupRef}\n      x={x}\n      y={y}\n      draggable\n\n      // helps keep the function nodes in the designated workspace area\n      dragBoundFunc={function (pos) {\n        if (pos.x < 0) {\n          pos.x = 0;\n        }\n        if (pos.x > window.innerWidth - nodeDimensions.functionWidth) {\n          pos.x = window.innerWidth - nodeDimensions.functionWidth;\n        }\n        if (pos.y < globals.menuHeight) {\n          pos.y = globals.menuHeight;\n        }\n        if (\n          pos.y >\n          window.innerHeight -\n            globals.funBarHeight -\n            nodeDimensions.functionWidth\n        ) {\n          pos.y =\n            window.innerHeight -\n            globals.funBarHeight -\n            nodeDimensions.functionWidth;\n        }\n        return pos;\n      }}\n\n      onDragStart={(e) => {\n        e.target.setAttrs({\n          duration: 0.5,\n          shadowOffset: {\n            x: 5,\n            y: 5,\n          },\n          shadowBlur: 6,\n          scaleX: 1.1,\n          scaleY: 1.1,\n        });\n      }}\n\n      onDragEnd={(e) => {\n        e.target.to({\n          duration: 0.5,\n          easing: Konva.Easings.ElasticEaseOut,\n          scaleX: 1,\n          scaleY: 1,\n        });\n        // Updates the x & y coordinates once the node has stopped dragging\n        props.updateNodePosition(index, e.currentTarget.x(), e.currentTarget.y());\n      }}\n\n      onDragMove={(e) => {\n        // Updates the line position dynamically while the node is being dragged\n        props.updateLinePosition(index, 'fun', e.currentTarget.x(), e.currentTarget.y());\n      }}\n\n      onClick={(e) => {\n        if (e.target.attrs.name) {\n          props.outletClicked(\n            index,\n            parseInt(e.target.attrs.name.substring(6)) - 1\n          );\n        } else {\n          props.funClicked(index);\n        }\n      }}\n\n      onDblClick={() => {\n        // Generates the temporary line when double clicked\n        props.dblClickHandler(index);\n      }}\n    >\n      <Group\n        onMouseEnter={(e) => {\n          groupRef.current.children.map((u, i) => {\n            u.to({\n              duration: 0.5,\n              easing: Konva.Easings.ElasticEaseOut,\n              scaleX: 1.07,\n              scaleY: 1.07\n            })\n            return 0;\n          })\n          setHovered(true);\n        }}\n\n        onMouseLeave={(e) => {\n          setHovered(false);\n          groupRef.current.children.map((u, i) => {\n            u.to({\n              duration: 0.5,\n              easing: Konva.Easings.ElasticEaseOut,\n              scaleX: 1,\n              scaleY: 1\n            })\n            return 0;\n          })\n        }}\n      >\n        <Rect\n          x={0}\n          y={0}\n          width={nodeDimensions.functionWidth}\n          height={\n            props.numOutlets <= 3\n              ? nodeDimensions.functionWidth\n              : nodeDimensions.functionWidth +\n                (props.numOutlets - 3) * nodeDimensions.outletYOffset\n          }\n          fill={gui.functions[name].color}\n          cornerRadius={10}\n          shadowColor={\n            hovered ? (trashHovered ? \"red\" : props.hoverShadowColor) : \"black\"\n          }\n          shadowOffset={{ x: hovered ? 0 : 1, y: hovered ? 0 : 1 }}\n          shadowBlur={3}\n          _useStrictMode\n        />\n        <Text\n          text={rep}\n          fontFamily={gui.globalFont}\n          fill={\"white\"}\n          fontSize={gui.nodeFontSize}\n          x={0}\n          y={0}\n          width={nodeDimensions.functionWidth}\n          height={\n            props.numOutlets <= 3\n              ? nodeDimensions.functionWidth\n              : nodeDimensions.functionWidth +\n                (props.numOutlets - 3) * nodeDimensions.outletYOffset\n          }\n          align={\"center\"}\n          verticalAlign={\"middle\"}\n          _useStrictMode\n        />\n        <Trashcan />\n      </Group>\n      {showImage ? (\n        <Portal>\n          <MISTImage //Mini image that can be seen at the bottom right of the node\n            onClick={() => setShowImage(false)}\n            x={x + nodeDimensions.functionImageBoxOffset + props.offsetX}\n            y={y + props.offsetY + (props.numOutlets <= 3\n              ? nodeDimensions.functionImageBoxOffset\n              : nodeDimensions.functionImageBoxOffset +\n                (props.numOutlets - 3) * nodeDimensions.outletYOffset)}\n            width={nodeDimensions.renderSideLength}\n            height={nodeDimensions.renderSideLength}\n            renderFunction={props.renderFunction ? props.renderFunction : \"\"}\n            automated={false}\n          />\n        </Portal>\n      ) : (\n        <Rect\n          onClick={() => {\n            console.log(props.renderFunction);\n            if (props.renderFunction) {\n              setShowImage(true);\n            }\n          }}\n          name={\"imageBox\"}\n          x={nodeDimensions.functionImageBoxOffset}\n          y={\n            props.numOutlets <= 3\n              ? nodeDimensions.functionImageBoxOffset\n              : nodeDimensions.functionImageBoxOffset +\n                (props.numOutlets - 3) * nodeDimensions.outletYOffset\n          }\n          width={nodeDimensions.imageBoxSideLength}\n          height={nodeDimensions.imageBoxSideLength}\n          fill={gui.imageBoxColor}\n          shadowColor={\"gray\"}\n          shadowBlur={2}\n          shadowOffsetX={1}\n          shadowOffsetY={1}\n          expanded={false}\n          visible={typeof props.renderFunction === 'string'}\n        />\n      )}\n      {name === \"rgb\"\n        ? [\"red\", \"green\", \"blue\"].map((u, i) => (\n            <Shape\n              sceneFunc={function (context) {\n                context.beginPath();\n                context.moveTo(0, 0);\n                context.bezierCurveTo(\n                  -gui.bezPoint,\n                  -gui.bezPoint,\n                  -gui.bezPoint,\n                  gui.bezPoint,\n                  0,\n                  0\n                );\n                context.closePath();\n                context.fillStrokeShape(this);\n              }}\n              name={\"outlet\" + (i + 1)}\n              key={i} // to silence a warning\n              x={nodeDimensions.outletXOffset}\n              y={i * nodeDimensions.outletYOffset + nodeDimensions.outletStartY}\n              fillRadialGradientStartPoint={{ x: -19, y: -5 }}\n              fillRadialGradientStartRadius={3}\n              fillRadialGradientEndPoint={{ x: -15, y: -5 }}\n              fillRadialGradientEndRadius={15}\n              fillRadialGradientColorStops={[0, u, 1, \"dark\" + u]}\n              onMouseOver={(e) => {\n                e.target.to({\n                  duration: 0.3,\n                  easing: Konva.Easings.ElasticEaseOut,\n                  scaleX: 1.2,\n                  scaleY: 1.2,\n                  shadowOffsetX: 5,\n                  shadowOffsetY: 5,\n                });\n              }}\n              onMouseOut={(e) => {\n                e.target.to({\n                  duration: 0.3,\n                  easing: Konva.Easings.ElasticEaseOut,\n                  scaleX: 1,\n                  scaleY: 1,\n                  shadowOffsetX: 5,\n                  shadowOffsetY: 5,\n                });\n              }}\n            />\n          ))\n        : [...Array(numOutlets)].map((u, i) => (\n            <Shape\n              sceneFunc={function (context) {\n                context.beginPath();\n                context.moveTo(0, 0);\n                context.bezierCurveTo(\n                  -gui.bezPoint,\n                  -gui.bezPoint,\n                  -gui.bezPoint,\n                  gui.bezPoint,\n                  0,\n                  0\n                );\n                context.closePath();\n                context.fillStrokeShape(this);\n              }}\n              name={\"outlet\" + (i + 1)}\n              x={nodeDimensions.outletXOffset}\n              key={i}\n              y={i * nodeDimensions.outletYOffset + nodeDimensions.outletStartY}\n              fillRadialGradientStartPoint={{ x: -19, y: -5 }}\n              fillRadialGradientStartRadius={3}\n              fillRadialGradientEndPoint={{ x: -15, y: -5 }}\n              fillRadialGradientEndRadius={15}\n              fillRadialGradientColorStops={[\n                0,\n                gui.outletColor,\n                1,\n                gui.outletColor2,\n              ]}\n              onMouseOver={(e) => {\n                e.target.to({\n                  duration: 0.3,\n                  easing: Konva.Easings.ElasticEaseOut,\n                  scaleX: 1.2,\n                  scaleY: 1.2,\n                  shadowOffsetX: 5,\n                  shadowOffsetY: 5,\n                });\n              }}\n              onMouseOut={(e) => {\n                e.target.to({\n                  duration: 0.3,\n                  easing: Konva.Easings.ElasticEaseOut,\n                  scaleX: 1,\n                  scaleY: 1,\n                  shadowOffsetX: 5,\n                  shadowOffsetY: 5,\n                });\n              }}\n            />\n          ))}\n    </Group>\n  );\n// +----------------------------------------+\n// | Entire Function Group                  |\n// +----------------------------------------+----------------------\n}\nexport default FunNode;\n","// +------------------+----------------------------------------------\n// | Workspace Colors |\n// +------------------+\n\n// Workspace's background.\nconst workspaceBackground = {\n  classic: \"#FAFBFF\",\n  dusk: \"#f0f5ff\",\n  dark: \"black\",\n};\n\n// +-------------+---------------------------------------------------\n// | Node Colors |\n// +-------------+\n\n// Color of the lines between nodes.\nconst lineFill = {\n  classic: \"black\",\n  dusk: \"black\",\n  dark: \"white\",\n};\n\n// Color of the shadow when you hover over a node.\nconst nodeHoverShadow = {\n    classic: 'cyan',\n    dusk: 'cyan',\n    dark: 'white',\n}\n\n\n\n// +-------------+---------------------------------------------------\n// | Menu Colors |\n// +-------------+\n\n// Menu background color.\nconst menuBackground = {\n    classic: 'white',\n    dusk: '#EEF0FF',\n    dark: '#1c170f',\n}\n\n// FOR NOW: Color of the value node on the menu value button.\nconst valueMenuColor1 = \"#F2937C\";\nconst valueMenuColor2 = \"#ffa931\";\nconst valueMenuColor3 = \"#ffa931\";\n\n// Color of the reset/open/save buttons on the menu.\nconst workspaceButton = {\n    classic: '#7FA7E7',\n    dusk: '#111d5e',\n    dark: '#4d4a45',\n}\n\nconst menuFunTab = {\n  classic: menuBackground.classic, //'#f5bcce',\n  dusk: menuBackground.dusk, // '#401724',\n  dark: menuBackground.dark // '#401724'\n}\n\nconst menuValTab = {\n  classic: menuBackground.classic, //'#fcf7ac',\n  dusk: menuBackground.dusk, // '#5c591e',\n  dark: menuBackground.dark // '#5c591e'\n}\n\nconst menuCustomTab = {\n  classic: menuBackground.classic, //'#bae3ff',\n  dusk: menuBackground.dusk, // '#24465e',\n  dark: menuBackground.dark // '#24465e'\n}\n\nconst menuSavedTab = {\n  classic: menuBackground.classic, //'#cffcdb',\n  dusk: menuBackground.dusk, // '#1b4f2a',\n  dark: menuBackground.dark // '#1b4f2a'\n}\n\n// +---------------+-------------------------------------------------\n// | FunBar Colors |\n// +---------------+\n\n// Function bar's background.\nconst funBarBackground = {\n    classic: '#7FA7E7',\n    dusk: '#111d5e',\n    dark: '#1c170f',\n}\n\n// +---------+-------------------------------------------------------\n// | Exports |\n// +---------+\n\nexport default {\n  workspaceBackground,\n  lineFill,\n  nodeHoverShadow,\n  menuBackground,\n  valueMenuColor1,\n  valueMenuColor2,\n  valueMenuColor3,\n  menuFunTab,\n  menuValTab,\n  menuCustomTab,\n  menuSavedTab,\n  workspaceButton,\n  funBarBackground,\n};\n","import React, { useState } from \"react\";\nimport { Line, Group, Image } from \"react-konva\";\nimport useImage from 'use-image';\n \nfunction DrawArrow(props) {\n \n const [hovered, setHovered] = useState(false);\n const [trashHovered, setTrashHovered] = useState(false);\n const [image] = useImage(require('./trash.png'));\n \n function Trashcan() {\n    return <Image\n        image={image}\n        x={props.sourceX + (props.sinkX - props.sourceX) * (3/5) - 7}\n        y={props.sourceY + (props.sinkY - props.sourceY) * (3/5) - 7}\n        width={14} height={14}\n        shadowColor={trashHovered ? \"red\" : props.hoverShadowColor}\n        shadowBlur={5}\n        visible={hovered}\n        onMouseEnter={() => {\n            setTrashHovered(true);\n        }}\n        onMouseLeave={() => {\n            setTrashHovered(false);\n            setHovered(false);\n        }}\n        onClick={() => props.removeLine(props.index)}\n        />;\n    }\n \n    return (\n        <Group\n        onMouseEnter={(e) => {\n            setHovered(true);\n        }}\n        onMouseLeave={(e) => {\n            setHovered(false);\n        }}\n        >\n        <Line\n        points={[\n            props.sourceX,\n            props.sourceY,\n            props.sinkX,\n            props.sinkY\n        ]}\n        pointerLength={0}\n        pointerWidth={0}\n        stroke={props.fill}\n        shadowColor={trashHovered ? \"red\" : props.hoverShadowColor}\n        shadowBlur={5}\n        shadowEnabled={hovered}\n        strokeWidth={3}\n        />\n        <Trashcan/>\n        </Group>\n        )\n    }\n    export default DrawArrow","/**\n * This file creates the Menu Bar and calls subsequent create nodes files.\n *\n * MIST is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\n// +----------------------------+------------------------------------\n// | All dependent files        |\n// +----------------------------+\n\nimport React, { useState } from \"react\";\nimport { Group, Text } from \"react-konva\";\nimport gui from \"./mistgui-globals.js\";\nimport { Spring, animated } from \"react-spring/renderprops-konva\";\n\n// +----------------------------+\n// | All dependent files        |\n// +----------------------------+------------------------------------\n\n/**\n * Makes one of those \"Reset Workspace\", \"Open Workspace\", and \"Save Workspace\" buttons\n * @param {*} props\n */\nfunction MakeMenuButton(props) {\n  const [hovered, setHover] = useState(false);\n\n  return (\n    <Group\n      x={props.x}\n      y={props.y}\n      onClick={props.handleClick}\n      onMouseOver={() => setHover(true)}\n      onMouseOut={() => setHover(false)}\n    >\n      <Spring // animates the fill color change\n        from={{ fill: props.buttonColor }}\n        to={{ fill: hovered ? \"orange\" : props.buttonColor }}\n      >\n        {(props) => (\n          <animated.Rect // rectangle of the button\n            {...props}\n            x={5}\n            y={0}\n            width={gui.menuCornerWidth - 2 * gui.menuOffset}\n            height={gui.menuControlHeight}\n            shadowColor={\"black\"}\n            shadowEnabled={false}\n            cornerRadius={15}\n          />\n        )}\n      </Spring>\n      <Text\n        x={0}\n        y={gui.menuTextOffset}\n        width={gui.menuCornerWidth - 2 * gui.menuOffset}\n        height={gui.menuControlHeight}\n        text={props.text}\n        align={\"center\"}\n        fill={\"white\"}\n        fontFamily={gui.globalFont}\n        fontSize={gui.menuFontSize}\n      />\n    </Group>\n  );\n}\n\nexport default MakeMenuButton;\n","import { width, menuHeight, functionWidth, valueWidth } from \"./globals\";\nimport gui from './mistgui-globals';\n\n// +------------------+---------------------------------------------\n// | Custom Tab Arrow |\n// +------------------+\n\nconst customTabOffsetX = width * 1 / 15;\n\nconst formX = 5;\n\nconst formY = menuHeight / 5;\n\nconst formHeight = menuHeight * 3 / 5;\n\nconst formWidth = width / 4;\n\nconst customTabPoints = {\n    topLeft: {x: customTabOffsetX - width, y: 0},\n    topRight: {x: customTabOffsetX + 30, y: 0},\n    point: {x: customTabOffsetX, y: menuHeight / 2},\n    bottomRight: {x: customTabOffsetX - 30, y: menuHeight},\n    bottomLeft: {x: customTabOffsetX - width, y: menuHeight}\n}\n\n// +-----------------+-----------------------------------------------\n// | Value Tab Arrow |\n// +-----------------+\n\nconst valueTabOffsetX = width * 2 / 15;\n\nconst valueListStartX = 20 + customTabOffsetX;\n\nconst valueMargin = 5;\n\nconst valueListLength = gui.valNames.length * (valueWidth + valueMargin);\n\nconst valueTabPoints = {\n    topLeft: {x: valueTabOffsetX - width, y: 0},\n    topRight: {x: valueTabOffsetX + 30, y: 0},\n    point: {x: valueTabOffsetX, y: menuHeight / 2},\n    bottomRight: {x: valueTabOffsetX - 30, y: menuHeight},\n    bottomLeft: {x: valueTabOffsetX - width, y: menuHeight}\n}\n\n// +--------------------+--------------------------------------------\n// | Function Tab Arrow |\n// +--------------------+\n\nconst functionTabOffsetX = width * 3 / 15;\n\nconst functionListStartX = 20 + valueTabOffsetX;\n\nconst functionMargin = 5;\n\nconst functionListLength = gui.funNames.length * (functionWidth + functionMargin);\n\nconst functionTabPoints = {\n    topLeft: {x: functionTabOffsetX - width, y: 0},\n    topRight: {x: functionTabOffsetX + 30, y: 0},\n    point: {x: functionTabOffsetX, y: menuHeight / 2},\n    bottomRight: {x: functionTabOffsetX - 30, y: menuHeight},\n    bottomLeft: {x: functionTabOffsetX - width, y: menuHeight}\n}\n\n// +-----------------+-----------------------------------------------\n// | Saved Tab Arrow |\n// +-----------------+\n\nconst savedTabOffsetX = width * 4 / 15;\n\nconst savedTabPoints = {\n    topLeft: {x: savedTabOffsetX - width, y: 0},\n    topRight: {x: savedTabOffsetX + 30, y: 0},\n    point: {x: savedTabOffsetX, y: menuHeight / 2},\n    bottomRight: {x: savedTabOffsetX - 30, y: menuHeight},\n    bottomLeft: {x: savedTabOffsetX - width, y: menuHeight}\n}\n\nexport default {\n    //form\n    formX,\n    formY,\n    formHeight,\n    formWidth,\n    // values\n    valueTabOffsetX,\n    valueListStartX,\n    valueTabPoints,\n    valueMargin,\n    valueListLength,\n    // functions\n    functionTabOffsetX,\n    functionListStartX,\n    functionTabPoints,\n    functionMargin,\n    functionListLength,\n    // custom\n    customTabOffsetX,\n    customTabPoints,\n    // save\n    savedTabOffsetX,\n    savedTabPoints\n}","/**\n * This file creates the Menu Bar and calls subsequent create nodes files.\n *\n * MIST is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\n// +----------------------------+------------------------------------\n// | All dependent files        |\n// +----------------------------+\n\nimport React, { useState, useRef } from \"react\";\nimport { Rect, Group, Text, Shape } from \"react-konva\";\nimport gui from \"./mistgui-globals\";\nimport { MIST } from \"./mist.js\";\nimport Portal from \"./Portal\";\nimport MakeMenuButton from \"./MakeMenuButton\";\nimport { funcGroup } from \"./MakeFunction\";\nimport { valGroup } from \"./MakeValue\";\nimport global, { width, valueWidth, functionWidth } from \"./globals.js\";\nimport menuDimensions from \"./globals-menu-dimensions\";\nimport { Button, Form, Modal } from 'react-bootstrap';\n\n// +----------------------------+\n// | All dependent files        |\n// +----------------------------+------------------------------------\n\nfunction Menu(props) {\n  //keeps track if the menus are open\n\n  // +--------+--------------------------------------------------------\n  // | States |\n  // +--------+\n\n  const [isValueMenuOpen, setIsValueMenuOpen] = useState(true);\n  const [isFunctionMenuOpen, setIsFunctionMenuOpen] = useState(false);\n  const [isCustomMenuOpen, setIsCustomMenuOpen] = useState(false);\n  const [isSavedMenuOpen, setIsSavedMenuOpen] = useState(false);\n  const [key, setKey] = useState(Math.random());\n  const ref = useRef(null);\n  const [formValue, setFormValue] = useState(\"Enter a MIST expression\");\n\n  // Ref for saving the workspace name\n  const wsNameRef = useRef('wsName');\n\n  // Ref for select form value\n  const wsFormRef = useRef('wsForm');\n\n  // create one modal that is for displaying content\n  const [isContentModalOpen, setIsContentModalOpen] = useState(false);\n  const [contentModalInfo, setContentModalInfo] = useState({ title: 'STUB', body: 'STUB' });\n  const [contentModalCallback, setContentModalCallack] = useState(() => () => console.log('STUB'))\n\n  // create another modal that is for double confirmation\n  const [isConfirmationModalOpen, setIsConfirmationModalOpen] = useState(false);\n  const [confirmationModalInfo, setConfirmationModalInfo] = useState({ title: 'STUB', body: 'STUB' });\n  // check that this state callback is actually a function\n  const [confirmationCallback, setConfirmationCallback] = useState(() => () => console.log('STUB'));\n\n  // +--------+\n  // | States |\n  // +--------+--------------------------------------------------------\n\n  /**\n   * This gets called from MakeFunctions and MakeValues to change the group's\n   * key to trigger a re-render (so that the node goes back to the right place\n   * if it's drag-and-dropped into the menu, not the workspace)\n   */\n  function changeKey() {\n    setKey(Math.random());\n  }\n\n  /**\n   * Toggle content modal\n   */\n  function toggleContentModal() {\n    setIsContentModalOpen(prev => !prev);\n  }\n\n  /**\n   * Toggle confirmation modal\n   */\n  function toggleConfirmationModal() {\n    setIsConfirmationModalOpen(prev => !prev);\n  }\n\n  return (\n    <>\n      <Portal>\n        <Modal show={isContentModalOpen} onHide={toggleContentModal} centered>\n          <Modal.Header closeButton>\n            <Modal.Title>{contentModalInfo.title}</Modal.Title>\n          </Modal.Header>\n          <Modal.Body> {contentModalInfo.body}\n          </Modal.Body>\n          <Modal.Footer>\n            <Button\n              onClick={toggleContentModal}\n              variant=\"secondary\">Close</Button>\n            <Button\n              onClick={contentModalCallback}\n              variant=\"primary\">\n              Confirm</Button>\n          </Modal.Footer>\n        </Modal>\n        <Modal show={isConfirmationModalOpen} onHide={toggleConfirmationModal}>\n          <Modal.Header closeButton>\n            <Modal.Title>{confirmationModalInfo.title}</Modal.Title>\n          </Modal.Header>\n          <Modal.Body> {confirmationModalInfo.body}\n          </Modal.Body>\n          <Modal.Footer>\n            <Button\n              onClick={toggleConfirmationModal}\n              variant=\"secondary\">Close</Button>\n            <Button\n              onClick={confirmationCallback}\n              variant=\"primary\">\n              Confirm</Button>\n          </Modal.Footer>\n        </Modal>\n\n      </Portal>\n      <Group width={width} height={global.menuHeight} key={key} ref={ref}>\n        <Rect // Entire menu bar\n          width={width}\n          height={global.menuHeight}\n          fill={props.bgColor}\n          shadowColor={\"black\"}\n          shadowBlur={5}\n        />\n        {[\n          {\n            name: \"Saved\",\n            tabPoints: menuDimensions.savedTabPoints,\n            tabOffsetX: menuDimensions.savedTabOffsetX,\n          },\n          {\n            name: \"Functions\",\n            tabPoints: menuDimensions.functionTabPoints,\n            tabOffsetX: menuDimensions.functionTabOffsetX,\n          },\n          {\n            name: \"Values\",\n            tabPoints: menuDimensions.valueTabPoints,\n            tabOffsetX: menuDimensions.valueTabOffsetX,\n          },\n          {\n            name: \"Custom\",\n            tabPoints: menuDimensions.customTabPoints,\n            tabOffsetX: menuDimensions.customTabOffsetX,\n          },\n        ].map((u, i) => {\n          return (\n            <Group\n              x={\n                (isCustomMenuOpen && menuDimensions.formWidth) ||\n                (isValueMenuOpen && u.name !== \"Custom\"\n                  ? menuDimensions.valueListLength\n                  : 0) ||\n                (isFunctionMenuOpen && u.name !== \"Custom\" && u.name !== \"Values\"\n                  ? menuDimensions.functionListLength\n                  : 0) ||\n                (isSavedMenuOpen && u.name === \"Saved\" ? (width * 8) / 15 : 0)\n              }\n              key={i}\n              onMouseEnter={() => {\n                if (u.name === \"Custom\") {\n                  setIsCustomMenuOpen(true);\n                  setIsValueMenuOpen(false);\n                  setIsFunctionMenuOpen(false);\n                  setIsSavedMenuOpen(false);\n                } else if (u.name === \"Values\") {\n                  setIsValueMenuOpen(true);\n                  setIsFunctionMenuOpen(false);\n                  setIsCustomMenuOpen(false);\n                  setIsSavedMenuOpen(false);\n                } else if (u.name === \"Functions\") {\n                  setIsFunctionMenuOpen(true);\n                  setIsValueMenuOpen(false);\n                  setIsCustomMenuOpen(false);\n                  setIsSavedMenuOpen(false);\n                } else {\n                  setIsSavedMenuOpen(true);\n                  setIsValueMenuOpen(false);\n                  setIsFunctionMenuOpen(false);\n                  setIsCustomMenuOpen(false);\n                }\n              }}\n            >\n              <Shape // saved tab arrow\n                sceneFunc={function (context) {\n                  context.beginPath();\n                  context.moveTo(u.tabPoints.topLeft.x, u.tabPoints.topLeft.y);\n                  context.lineTo(u.tabPoints.topRight.x, u.tabPoints.topRight.y);\n                  context.lineTo(u.tabPoints.point.x, u.tabPoints.point.y);\n                  context.lineTo(\n                    u.tabPoints.bottomRight.x,\n                    u.tabPoints.bottomRight.y\n                  );\n                  context.lineTo(\n                    u.tabPoints.bottomLeft.x,\n                    u.tabPoints.bottomLeft.y\n                  );\n                  context.closePath();\n                  context.fillStrokeShape(this);\n                }}\n                fill={\n                  (u.name === \"Values\" && props.valTabColor) ||\n                  (u.name === \"Functions\" && props.funTabColor) ||\n                  (u.name === \"Custom\" && props.customTabColor) ||\n                  (u.name === \"Saved\" && props.savedTabColor)\n                }\n                strokeWidth={0}\n                shadowOffsetX={1}\n                shadowOffsetY={-2}\n                shadowBlur={5}\n                shadowOpacity={0.7}\n              />\n              <Text\n                text={u.name}\n                x={u.tabOffsetX - 50}\n                y={global.menuHeight * 0.9}\n                width={120}\n                height={20}\n                fill={\"black\"}\n                align={\"left\"}\n                verticalAlign={\"middle\"}\n                fontFamily={\"Impact\"}\n                fontSize={25}\n                rotation={(-Math.atan(global.menuHeight / 60) * 180) / Math.PI}\n              />\n              {u.name === \"Custom\" && (\n                <Portal>\n                  <form\n                    id=\"form\"\n                    style={{\n                      position: \"absolute\",\n                      top: props.top + menuDimensions.formY,\n                      left: isCustomMenuOpen\n                        ? props.left + menuDimensions.formX\n                        : -menuDimensions.formWidth + menuDimensions.formX,\n                    }}\n                    onSubmit={(e) => {\n                      e.preventDefault();\n                      e.stopPropagation();\n                      e.nativeEvent.stopImmediatePropagation();\n                      try {\n                        props.createLayout(MIST.parse(formValue, \"\"));\n                      } catch (err) {\n                        //document.getElementById(\"input\").style.borderColor = \"red\";\n                        console.log(\"invalid function\");\n                      }\n                      return false;\n                    }}\n                  >\n                    <label>\n                      <input\n                        id={\"input\"}\n                        style={{\n                          width: menuDimensions.formWidth,\n                          height: menuDimensions.formHeight,\n                        }}\n                        type=\"text\"\n                        placeholder={formValue}\n                        onChange={(e) => {\n                          setFormValue(e.target.value);\n                        }}\n                      />\n                    </label>\n                  </form>\n                </Portal>\n              )}\n              {u.name === \"Values\" &&\n                Array.from(new Array(gui.valNames.length), (val, index) =>\n                  valGroup(\n                    props.addNode,\n                    gui.valNames[index],\n                    -menuDimensions.valueListLength +\n                    menuDimensions.valueListStartX +\n                    index * (menuDimensions.valueMargin + valueWidth),\n                    gui.menuYspacing - 20,\n                    isValueMenuOpen,\n                    changeKey,\n                    index\n                  )\n                )}\n              {u.name === \"Functions\" &&\n                Array.from(new Array(gui.funNames.length), (val, index) =>\n                  funcGroup(\n                    props.addNode,\n                    gui.funNames[index],\n                    -menuDimensions.functionListLength +\n                    menuDimensions.functionListStartX +\n                    index * (menuDimensions.functionMargin + functionWidth),\n                    gui.menuYspacing - 20,\n                    isFunctionMenuOpen,\n                    changeKey,\n                    index\n                  )\n                )}\n            </Group>\n          );\n        })}\n        <Group visible={true}>\n          {[\n            {\n              name: \"Reset Workspace\", func: props.clearWorkspace,\n            },\n            {\n              name: \"Open Workspace\", func: async () => {\n                try {\n                  const workspaces = await props.getWorkspaces();\n                  const workspacesObj = {};\n                  // we need a scrollable list that we can find the index of an then\n                  // load from workspaces based on the index\n                  setContentModalInfo({\n                    title: 'Pick a workspace to load',\n                    body: (<div>\n                      <Form>\n                        <Form.Group>\n                          <Form.Label>\n                            Select a workspace to load\n                          </Form.Label>\n                          <Form.Control as='select' ref={wsFormRef}>\n                            {workspaces.map(workspace => {\n                              workspacesObj[workspace.name] = workspace.data;\n                              return (<option key={workspace.name}>{workspace.name}</option>);\n                            })}\n                          </Form.Control>\n                        </Form.Group>\n                      </Form>\n                    </div>)\n                  })\n                  setContentModalCallack(() => () => {\n                    props.loadWorkspace(workspacesObj[wsFormRef.current.value]);\n                    toggleContentModal();\n                  })\n                  toggleContentModal();\n                } catch (error) {\n                  alert(error)\n                }\n\n              }\n            },\n            {\n              name: \"Save Workspace\", func: () => {\n                setContentModalInfo({\n                  title: 'Saving Workspace',\n                  body: (<div>\n                    <input placeholder='Name your workspace' ref={wsNameRef} />\n                  </div>)\n                })\n                setContentModalCallack(() => async () => {\n                  try {\n                    const wsName = wsNameRef.current.value;\n                    if (!wsName)\n                      throw ('Please enter a valid name for your workspace')\n                    const exists = await props.checkIfWorkspaceExists(wsName);\n                    if (exists) {\n                      // trigger confirmation popup\n                      setConfirmationModalInfo({\n                        title: 'Overwriting previous workspace',\n                        body: (<div>You are about to overwrite the workspace named {wsName} Click confirm to continue</div>)\n                      })\n                      setConfirmationCallback(() => () => {\n                        props.saveWorkspace(wsName);\n                      })\n                      toggleConfirmationModal();\n                    } else {\n                      props.saveWorkspace(wsName)\n                    }\n                  } catch (error) {\n                    alert(error)\n                  }\n                })\n                toggleContentModal();\n              },\n            },\n            {\n              name: \"Delete Workspace\", func: async () => {\n                try {\n                  const workspaces = await props.getWorkspaces();\n                  const workspacesObj = {};\n                  // we need a scrollable list that we can find the index of an then\n                  // load from workspaces based on the index\n                  setContentModalInfo({\n                    title: 'Pick a workspace to dekete',\n                    body: (<div>\n                      <Form>\n                        <Form.Group>\n                          <Form.Label>\n                            Select a workspace to load\n                          </Form.Label>\n                          <Form.Control as='select' ref={wsFormRef}>\n                            {workspaces.map(workspace => {\n                              workspacesObj[workspace.name] = workspace.data;\n                              return (<option key={workspace.name}>{workspace.name}</option>);\n                            })}\n                          </Form.Control>\n                        </Form.Group>\n                      </Form>\n                    </div>)\n                  })\n                  setContentModalCallack(() => () => {\n                    props.deleteWorkspace(wsFormRef.current.value)\n                    .then(message => {toggleContentModal();alert(message);})\n                    .catch(alert)\n                  })\n                  toggleContentModal();\n                } catch (error) {\n                  alert(error)\n                }\n\n              },\n            }\n          ].map((u, i) => (\n            <MakeMenuButton //Calls MakeMenuButton.js to create the three side buttons\n              key={i}\n              text={u.name}\n              x={0}\n              y={(i + 1) * gui.menuOffset + i * gui.menuControlHeight}\n              handleClick={u.func}\n              buttonColor={props.wsButtonColor}\n            />\n          ))}\n        </Group>\n      </Group >\n    </>\n  );\n}\n\nexport default Menu;\n","/**\n * This file creates the Value Nodes for the Menu bar.\n *\n * MIST is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\n// +-------+---------------------------------------------------------\n// | Notes |\n// +-------+\n/*  1. The parameters required are as follows: \n    - addNode : function; Calls the pushNode in the index.js once node has been dropped in \n                the workspace\n    - valName : String; Name of the value node\n    - x : int; x coordinate\n    - y : int; y coordinate \n    - vis : boolean; condition to either display or not display the function nodes on the menu bar\n    - index : int; index of the node\n    - changeKey : function; This gets called from MakeFunctions and MakeValues to change the group's\n                  key to trigger a re-render (so that the node goes back to the right place\n                  if it's drag-and-dropped into the menu, not the workspace) \n\n    2. React-Spring is the library used to create animations for the on hover attribute in the \n      menu bar for functions. \n\n    3. The dragBoundFunc attribute on the group helps keep the function node within the \n      boundaries of the workspace. \n  \n\n*/\n// +-------+\n// | Notes |\n// +-------+---------------------------------------------------------\n\n// +----------------------------+------------------------------------\n// | All dependent files        |\n// +----------------------------+\n\nimport React from \"react\";\nimport { Group } from \"react-konva\";\nimport Konva from \"konva\";\nimport gui from \"./mistgui-globals\";\nimport { Spring, animated } from \"react-spring/renderprops-konva\";\nimport nodeDimensions from \"./globals-nodes-dimensions.js\";\nimport global, { width, height } from \"./globals.js\";\n\n// +----------------------------+\n// | All dependent files        |\n// +----------------------------+------------------------------------\n\n// +----------------------------------------+------------------------\n// | Entire Value Group                     |\n// +----------------------------------------+\n\nexport const valGroup = function (\n  addNode,\n  valName,\n  x,\n  y,\n  vis,\n  changeKey,\n  index\n) {\n  return (\n    <Group\n      name={valName}\n      key={index}\n      x={x}\n      y={y}\n      draggable\n      onDragStart={(e) => {\n        e.target.setAttrs({\n          duration: 0.5,\n          shadowBlur: 6,\n          scaleX: 1.1,\n          scaleY: 1.1,\n        });\n      }}\n      onDragEnd={(e) => {\n        e.target.to({\n          duration: 0.5,\n          easing: Konva.Easings.ElasticEaseOut,\n          scaleX: 1,\n          scaleY: 1,\n        });\n        if (e.currentTarget.y() > global.menuHeight) {\n          //setTimeout(function () {\n          addNode(\"val\", valName, e.target._lastPos.x, e.target._lastPos.y);\n          changeKey();\n          //}, 200);\n        } else {\n          changeKey();\n        }\n      }}\n      dragBoundFunc={function (pos) {\n        if (pos.x < 0) {\n          pos.x = 0;\n        }\n        if (pos.x > width - nodeDimensions.valueWidth) {\n          pos.x = width - nodeDimensions.valueWidth;\n        }\n        if (pos.y < 0) {\n          pos.y = 0;\n        }\n        if (pos.y > height - global.funBarHeight - nodeDimensions.valueWidth) {\n          pos.y = height - global.funBarHeight - nodeDimensions.valueWidth;\n        }\n        return pos;\n      }}\n    >\n      <Spring\n        native\n        from={{\n          x: vis ? nodeDimensions.valueOffset : -300,\n          scaleX: 1,\n          scaleY: 1,\n        }}\n        to={{\n          x: vis ? nodeDimensions.valueOffset : -300,\n        }}\n      >\n        {(props) => (\n          <animated.Rect\n            {...props}\n            y={0}\n            width={nodeDimensions.valueSideLength}\n            height={nodeDimensions.valueSideLength}\n            fill={gui.values[valName].color}\n            cornerRadius={10}\n            rotation={45}\n          />\n        )}\n      </Spring>\n      <Spring\n        native\n        from={{ x: vis ? 0 : -300, fontSize: gui.nodeFontSize }}\n        to={{\n          x: vis ? 0 : -300,\n        }}\n      >\n        {(props) => (\n          <animated.Text\n            {...props}\n            text={gui.values[valName].rep}\n            fontFamily={gui.globalFont}\n            fill={\"black\"}\n            y={0}\n            width={nodeDimensions.valueWidth}\n            height={nodeDimensions.valueWidth}\n            align={\"center\"}\n            verticalAlign={\"middle\"}\n          />\n        )}\n      </Spring>\n    </Group>\n  );\n  // +----------------------------------------+\n  // | Entire Value Group                     |\n  // +----------------------------------------+----------------------\n};\n","/**\n * This file creates the Function Nodes for the Menu bar.\n *\n * MIST is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\n// +-------+---------------------------------------------------------\n// | Notes |\n// +-------+\n/*  1. The parameters required are as follows: \n    - addNode : function; Calls the pushNode in the index.js once node has been dropped in \n                the workspace\n    - funName : String; Name of the function node\n    - x : int; x coordinate\n    - y : int; y coordinate \n    - vis : boolean; condition to either display or not display the function nodes on the menu bar\n    - index : int; index of the node\n    - changeKey : function; This gets called from MakeFunctions and MakeValues to change the group's\n                  key to trigger a re-render (so that the node goes back to the right place\n                  if it's drag-and-dropped into the menu, not the workspace) \n\n    2. React-Spring is the library used to create animations for the on hover attribute in the \n      menu bar for functions. \n\n    3. The dragBoundFunc attribute on the group helps keep the function node within the \n      boundaries of the workspace. \n  \n\n*/\n// +-------+\n// | Notes |\n// +-------+---------------------------------------------------------\n\n// +----------------------------+------------------------------------\n// | All dependent files        |\n// +----------------------------+\n\nimport React from \"react\";\nimport { Group } from \"react-konva\";\nimport Konva from \"konva\";\nimport gui from \"./mistgui-globals\";\nimport { Spring, animated } from \"react-spring/renderprops-konva\";\nimport nodeDimensions from \"./globals-nodes-dimensions.js\";\nimport global, { width, height } from \"./globals.js\";\n\n// +----------------------------+\n// | All dependent files        |\n// +----------------------------+------------------------------------\n\n// +----------------------------------------+------------------------\n// | Entire Function Group                  |\n// +----------------------------------------+\n\nexport const funcGroup = function makeFunctionGroup(\n  addNode,\n  funName,\n  x,\n  y,\n  vis,\n  changeKey,\n  index\n) {\n  return (\n    <Group\n      name={funName}\n      key={index}\n      x={x}\n      y={y}\n      draggable\n      onDragStart={(e) => {\n        e.target.setAttrs({\n          duration: 0.5,\n          shadowBlur: 6,\n          scaleX: 1.1,\n          scaleY: 1.1,\n        });\n      }}\n      onDragEnd={(e) => {\n        e.target.to({\n          duration: 0.5,\n          easing: Konva.Easings.ElasticEaseOut,\n          scaleX: 1,\n          scaleY: 1,\n        });\n        if (e.currentTarget.y() > global.menuHeight) {\n          //setTimeout(function () {\n          addNode(\"fun\", funName, e.target._lastPos.x, e.target._lastPos.y);\n          changeKey();\n          //}, 200);\n        } else {\n          changeKey();\n        }\n      }}\n      dragBoundFunc={function (pos) {\n        if (pos.x < 0) {\n          pos.x = 0;\n        }\n        if (pos.x > width - nodeDimensions.functionWidth) {\n          pos.x = width - nodeDimensions.functionWidth;\n        }\n        if (pos.y < 0) {\n          pos.y = 0;\n        }\n        if (\n          pos.y >\n          height - global.funBarHeight - nodeDimensions.functionWidth\n        ) {\n          pos.y = height - global.funBarHeight - nodeDimensions.functionWidth;\n        }\n        return pos;\n      }}\n    >\n      <Spring\n        native\n        from={{\n          x: vis ? 0 : -300,\n          scaleX: 1,\n          scaleY: 1,\n        }}\n        to={{\n          x: vis ? 0 : -300,\n        }}\n      >\n        {(props) => (\n          <animated.Rect\n            {...props}\n            y={0}\n            width={nodeDimensions.functionWidth}\n            height={nodeDimensions.functionWidth}\n            fill={gui.functions[funName].color}\n            cornerRadius={10}\n          />\n        )}\n      </Spring>\n      <Spring\n        native\n        from={{ x: vis ? 0 : -300, fontSize: gui.nodeFontSize }}\n        to={{ x: vis ? 0 : -300 }}\n      >\n        {(props) => (\n          <animated.Text\n            {...props}\n            text={gui.functions[funName].rep}\n            fontFamily={gui.globalFont}\n            fill={\"white\"}\n            y={0}\n            width={nodeDimensions.functionWidth}\n            height={nodeDimensions.functionWidth}\n            align={\"center\"}\n            verticalAlign={\"middle\"}\n          />\n        )}\n      </Spring>\n    </Group>\n  );\n  // +----------------------------------------+\n  // | Entire Function Group                  |\n  // +----------------------------------------+----------------------\n};\n","/**\n * The value nodes in the workspace for MIST.\n *\n * MIST is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\n// +-------+---------------------------------------------------------\n// | Notes |\n// +-------+\n/* 1. The trashcan function creates a trashcan icon on the top left of the function node. The onClick\n      attrribute on that deletes the node from the workspace\n\n   2. Props received from the workspace contain the following:\n   - name : String; name of the node\n   - key : int; unique key attribute \n   - index : int; index of the ndoe\n   - x : int; x coordinate\n   - y : int; y coordinate \n   - offsetX : int; to account for the shift in the x-coordinate \n   - offsetY : int; to account for the shift in the y-coordinate\n   - numInputs : int; number of lines coming into the node\n   - numOutlets : int; number of outlets of the node\n   - renderFunction : String; the expression in the node\n   - updateNodePosition : function; Updates node position in the workspace\n   - updateLinePosition : function; Updates line position in the workspace\n   - outletClicked : function; Listens to clicks on the outlets\n   - dblClickHandler : function; Listens to double clicks on the function for generation of \n                       temporary line \n   - removeNode : function; removes node from the workspace\n\n   3. The dragBoundFunc attribute on the group helps keep the value node within the \n      boundaries of the workspace. \n\n   4. UseStrictMode is a good react-konva practice.\n  \n\n*/\n// +-------+\n// | Notes |\n// +-------+---------------------------------------------------------\n\n// +----------------------------+------------------------------------\n// | All dependent files        |\n// +----------------------------+\n\nimport React, { useState, useRef } from \"react\";\nimport { Rect, Group, Text, Image } from \"react-konva\";\nimport Konva from \"konva\";\nimport Portal from \"./Portal\";\nimport gui from \"./mistgui-globals.js\";\nimport MISTImage from \"./MISTImage\";\nimport useImage from \"use-image\";\nimport nodeDimensions from \"./globals-nodes-dimensions.js\";\nimport { width, height, funBarHeight, menuHeight } from \"./globals.js\";\n\n// +----------------------------+\n// | All dependent files        |\n// +----------------------------+------------------------------------\n\nfunction ValNode(props) {\n  const name = props.name;\n  const x = props.x;\n  const y = props.y;\n  const index = props.index;\n  const rep = gui.values[name].rep;\n  const [renderFunction, setRenderFunction] = useState(gui.values[name].rep);\n  const [showImage, setShowImage] = useState(false);\n  const [hovered, setHovered] = useState(false);\n  const [trashHovered, setTrashHovered] = useState(false);\n  const [image] = useImage(require(\"./trash.png\"));\n  const groupRef = useRef(null);\n  const [formValue, setFormValue] = useState(\"\");\n  //const [submitted, setSubmitted] = useState(false);\n\n  // +----------------------------+------------------------------------\n  // | Trashcan                   |\n  // +----------------------------+\n\n  function Trashcan() {\n    return (\n      <Image\n        image={image}\n        x={nodeDimensions.valueTrashX}\n        y={nodeDimensions.valueTrashY}\n        width={14}\n        height={14}\n        shadowColor={trashHovered ? \"red\" : \"cyan\"}\n        shadowBlur={5}\n        visible={hovered}\n        onMouseEnter={() => {\n          setTrashHovered(true);\n        }}\n        onMouseLeave={() => {\n          setTrashHovered(false);\n          setHovered(false);\n        }}\n        onClick={() => props.removeNode(props.index)}\n      />\n    );\n  }\n\n  // +----------------------------+\n  // | Trashcan                   |\n  // +----------------------------+------------------------------------\n\n  // +----------------------------------------+------------------------\n  // | Entire Value Group                     |\n  // +----------------------------------------+\n\n  return (\n    <Group\n      x={x}\n      y={y}\n      ref={groupRef}\n      draggable\n      // helps keep the function nodes in the designated workspace area\n      dragBoundFunc={function (pos) {\n        if (pos.x < 0) {\n          pos.x = 0;\n        }\n        if (pos.x > width - nodeDimensions.valueWidth) {\n          pos.x = width - nodeDimensions.valueWidth;\n        }\n        if (pos.y < menuHeight) {\n          pos.y = menuHeight;\n        }\n        if (pos.y > height - funBarHeight - nodeDimensions.valueWidth) {\n          pos.y = height - funBarHeight - nodeDimensions.valueWidth;\n        }\n        return pos;\n      }}\n      onDragStart={(e) => {\n        e.target.setAttrs({\n          shadowOffset: {\n            x: 15,\n            y: 15,\n          },\n          scaleX: 1.1,\n          scaleY: 1.1,\n        });\n      }}\n      onDragEnd={(e) => {\n        e.target.to({\n          duration: 0.5,\n          easing: Konva.Easings.ElasticEaseOut,\n          scaleX: 1,\n          scaleY: 1,\n          shadowOffsetX: 5,\n          shadowOffsetY: 5,\n        });\n        // Updates the x & y coordinates once the node has stopped dragging\n        props.updateNodePosition(\n          index,\n          e.currentTarget.x(),\n          e.currentTarget.y()\n        );\n      }}\n      onDragMove={(e) => {\n        // Updates the line position dynamically while the node is being dragged\n        props.updateLinePosition(\n          index,\n          \"val\",\n          e.currentTarget.x(),\n          e.currentTarget.y()\n        );\n      }}\n      onClick={(e) => {\n        props.clickHandler(index);\n      }}\n      onDblClick={(e) => {\n        // Generates the temporary line when double clicked\n        props.dblClickHandler(index);\n      }}\n    >\n      <Group\n        onMouseEnter={(e) => {\n          groupRef.current.children.map((u, i) => {\n            u.to({\n              duration: 0.5,\n              easing: Konva.Easings.ElasticEaseOut,\n              scaleX: 1.07,\n              scaleY: 1.07,\n            });\n            return 0;\n          });\n          setHovered(true);\n        }}\n        onMouseLeave={(e) => {\n          setHovered(false);\n          groupRef.current.children.map((u, i) => {\n            u.to({\n              duration: 0.5,\n              easing: Konva.Easings.ElasticEaseOut,\n              scaleX: 1,\n              scaleY: 1,\n            });\n            return 0;\n          });\n        }}\n      >\n        <Rect\n          x={nodeDimensions.valueOffset}\n          y={0}\n          width={nodeDimensions.valueSideLength}\n          height={nodeDimensions.valueSideLength}\n          fill={gui.values[name].color}\n          cornerRadius={10}\n          lineJoin={\"round\"}\n          rotation={45}\n          stroke={gui.values[name].color}\n          strokeWidth={nodeDimensions.functionStrokeWidth}\n          shadowColor={\"gray\"}\n          shadowBlur={2}\n          shadowOffsetX={1}\n          shadowOffsetY={1}\n          _useStrictMode\n        />\n        {rep === \"#\" ?  (\n          <Portal>\n            <form\n              id=\"form#\"\n              style={{\n                position: \"absolute\",\n                left: x + props.offsetX + 20,\n                top: y + props.offsetY + 10,\n              }}\n              onSubmit={(e) => {\n                e.preventDefault();\n                e.stopPropagation();\n                e.nativeEvent.stopImmediatePropagation();\n                if(parseFloat(formValue)!== null) {\n                  setRenderFunction(formValue);\n                  props.updateHashValue(index, formValue);\n                  //setSubmitted(true);\n                } else {\n                  console.log(\"Invalid Number\");\n                }\n                return false;\n              }}\n            >\n              <label>\n                <input\n                  type=\"text\"\n                  placeholder=\"#\"\n                  style={{\n                    width: 0.45 * nodeDimensions.valueWidth,\n                    height: 0.45 * nodeDimensions.valueWidth,\n                    backgroundColor: \"#D8AB24\",\n                    border: \"none\"\n                  }}\n                  onChange={(e) => {\n                    setFormValue(e.target.value);\n                  }}\n                />\n              </label>\n            </form>\n            <div></div>\n          </Portal>\n        ) : (\n          <Text\n            text={renderFunction}\n            fontFamily={gui.globalFont}\n            fill={\"black\"}\n            fontSize={gui.nodeFontSize}\n            x={0}\n            y={0}\n            width={nodeDimensions.valueWidth}\n            height={nodeDimensions.valueWidth}\n            align={\"center\"}\n            verticalAlign={\"middle\"}\n            _useStrictMode\n          />\n        )}\n        <Trashcan />\n      </Group>\n      {showImage ? (\n        <Portal>\n          <MISTImage //Mini image that can be seen at the bottom right of the node\n            onClick={() => setShowImage(!showImage)}\n            x={x + nodeDimensions.valueImageBoxOffset + props.offsetX}\n            y={y + nodeDimensions.valueImageBoxOffset + props.offsetY}\n            width={nodeDimensions.renderSideLength}\n            height={nodeDimensions.renderSideLength}\n            renderFunction={renderFunction}\n            automated={false}\n          />\n        </Portal>\n      ) : (\n        <Rect\n          onClick={() => setShowImage(!showImage)}\n          name={\"imageBox\"}\n          x={nodeDimensions.valueImageBoxOffset}\n          y={nodeDimensions.valueImageBoxOffset}\n          width={nodeDimensions.imageBoxSideLength}\n          height={nodeDimensions.imageBoxSideLength}\n          fill={gui.imageBoxColor}\n          expanded={false}\n          shadowColor={\"gray\"}\n          shadowBlur={2}\n          shadowOffsetX={1}\n          shadowOffsetY={1}\n        />\n      )}\n    </Group>\n  );\n  // +----------------------------------------+\n  // | Entire Value Group                     |\n  // +----------------------------------------+----------------------\n}\n\nexport default ValNode;\n\n","/**\n * The workspace area in MIST.\n *\n * MIST is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\n// +-------+---------------------------------------------------------\n// | Notes |\n// +-------+\n/*\n  1. Nodes and lines are saved in arrays of object literals.\n\n  2. Nodes save the following information:\n  -- name: String\n  -- type: String; 'fun' or 'val'\n  -- x: int\n  -- y: int\n  -- renderFunction: {String, boolean}; {renderFunction: String; isRenderable: boolean}\n  -- lineOut: int[]; array of indices of the lines\n  -- numInputs: int; number of lines coming into the node\n  -- numOutlets: int; number of outlets\n  -- activeOutlets: int[]; each item is a source index if it exists,\n    or false if it doesn't have an incoming line\n\n  3. Lines save the following information:\n  -- sourceIndex: int; index of the source node in the nodes array\n  -- sinkIndex: int; ndex of the sink node in the nodes array\n  -- headPosition: {float, float}; coordinates of the vertex that connects to the source\n  -- tailPosition: {float, float}; coordinates of the vertex that connects to the sink\n  -- outletIndex: int; index of outlet that the line goes into\n\n  4. The indices in redoFromIndices are where re-adjusting the\n     render functions need to start from. The render function\n     gets updated at each index, and renderFunctionRedo gets called\n     recursively to do the same for all of the child nodes.\n\n  5. UseStrictMode is a good react-konva practice.\n\n*/\n// +-------+\n// | Notes |\n// +-------+---------------------------------------------------------\n\n// +----------------------------+------------------------------------\n// | All dependent files        |\n// +----------------------------+\n\nimport FunBar from \"./FunBar\";\nimport FunNode from \"./FunNode\";\nimport colors from \"./globals-themes\";\nimport DrawArrow from \"./line\";\nimport Menu from \"./Menu\";\nimport gui from \"./mistgui-globals\";\nimport {\n  width,\n  height,\n  menuHeight,\n  funBarHeight,\n  functionWidth\n} from \"./globals.js\";\nimport { MIST } from \"./mist.js\";\nimport React, { Component } from \"react\";\nimport { Stage, Layer, Text } from \"react-konva\";\nimport ValNode from \"./ValNode\";\nimport nodeDimensions from \"./globals-nodes-dimensions.js\";\n\n\n// +----------------------------+\n// | All dependent files        |\n// +----------------------------+------------------------------------\n\nclass WorkspaceComponent extends Component {\n  constructor(props) {\n    super(props);\n\n    let layout1 = new MIST.Layout();\n\n    this.themes = [\"classic\", \"dusk\", \"dark\"];\n\n    // the value 72 is kind of a temporary fix\n    this.offsetY = 72;\n    this.offsetX = 0;\n\n    this.footer = 85;\n\n    // +--------+--------------------------------------------------------\n    // | States |\n    // +--------+\n    this.state = {\n      nodes: [],\n      lines: [],\n      redoFromIndices: [],\n      newSource: null,\n      mouseListenerOn: false,\n      mousePosition: { x: null, y: null },\n      tempLine: null,\n      currentNode: null,\n      layouts: [layout1],\n      themeIndex: 1,\n      theme: \"dusk\",\n      pos1: { x: 100, y: 200 },\n      pos2: { x: 0, y: 100 },\n    };\n    // +--------+\n    // | States |\n    // +--------+--------------------------------------------------------\n\n    this.updateLinePosition = this.updateLinePosition.bind(this);\n  }\n\n  componentDidMount() {\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (prevState.nodes !== this.state.nodes) {\n      console.log(\"nodes changed\");\n    }\n    if (prevState.lines !== this.state.lines) {\n      console.log(\"lines changed\");\n    }\n    if (prevState.redoFromIndices !== this.state.redoFromIndices) {\n      for (let i = 0; i < this.state.redoFromIndices.length; i++) {\n        this.findRenderFunction(this.state.redoFromIndices[i]);\n        // TO-DO: call this only on the branches\n        this.renderFunctionRedo(this.state.redoFromIndices[i]);\n      }\n    }\n  }\n\n  // +------------------------+----------------------------------------\n  // | Adding Nodes and Lines |\n  // +------------------------+\n\n  createLayout = (expression) => {\n    let newNodes = [...this.state.nodes];\n    let newLines = [...this.state.lines];\n    let redoIndices = [];\n\n    const sink = newNodes.length;\n\n    if (expression.class === \"MIST.App\") {\n      const name = gui.repToFun[expression.operation];\n      const parentX = Math.random() * (0.8 * width);\n      const parentY = gui.menuHeight +\n        Math.random() * (height - menuHeight - 2 * funBarHeight);\n      const outermost = {\n        // Creating a new node\n        name: name,\n        type: \"fun\",\n        x: parentX,\n        y: parentY,\n        renderFunction: { renderFunction: \"\", isRenderable: false },\n        lineOut: [],\n        numInputs: 0,\n        numOutlets: gui.functions[gui.repToFun[expression.operation]].min,\n        activeOutlets: Array(\n          gui.functions[gui.repToFun[expression.operation]].min\n        ).fill(false),\n        parentNodes: [],\n      };\n      console.log(\"pushed operation \" + outermost.name);\n      evalFrom(sink, expression.operands, parentX, parentY);\n      newNodes.push(outermost);\n    } else {\n      // it's a value\n      if (gui.values[expression.name] === undefined) {\n        return Error();\n      }\n      const val = {\n        name: expression.name,\n        type: \"val\",\n        x: Math.random() * (0.8 * width),\n        y:\n          menuHeight + Math.random() * (height - menuHeight - 2 * funBarHeight),\n        renderFunction: { renderFunction: expression.code, isRenderable: true },\n        lineOut: [],\n        numInputs: null,\n        numOutlets: null,\n        activeOutlets: null,\n        parentNodes: null,\n      };\n      newNodes.push(val);\n    }\n\n    function evalFrom(sinkIndex, operands, parentX, parentY) {\n      if (\n        gui.functions[newNodes[sinkIndex].name].color === gui.functionMultColor\n      ) {\n        if (\n          operands.length < gui.functions[newNodes[sinkIndex].name].min ||\n          operands.length > gui.functions[newNodes[sinkIndex].name].max\n        ) {\n          return Error(\n            newNodes[sinkIndex].name +\n            \" must contain between \" +\n            gui.functions[newNodes[sinkIndex].name].min +\n            \" and \" +\n            gui.functions[newNodes[sinkIndex].name].max +\n            \" parameters\"\n          );\n        }\n      } else {\n        if (operands.length !== gui.functions[newNodes[sinkIndex].name].min) {\n          return Error(\n            this.state.nodes[sinkIndex].name +\n            \" must contain \" +\n            gui.functions[this.state.nodes[sinkIndex].name].min +\n            \" parameters\"\n          );\n        }\n      }\n      for (let i = 0; i < operands.length; i++) {\n        let sourceIndex = newNodes.length;\n        let lineIndex = newLines.length;\n        // checking if the operand is a function\n        if (operands[i].class === \"MIST.App\") {\n          const pX = parentX - 50;\n          const pY = menuHeight +\n            Math.random() * (height - menuHeight - 2 * funBarHeight);\n          const sourceNode = {\n            // Creating a new node\n            name: gui.repToFun[operands[i].operation],\n            type: \"fun\",\n            x: pX,\n            y: pY,\n            renderFunction: { renderFunction: \"\", isRenderable: false },\n            lineOut: [],\n            numInputs: 0,\n            numOutlets: gui.functions[gui.repToFun[operands[i].operation]].min,\n            activeOutlets: Array(\n              gui.functions[gui.repToFun[operands[i].operation]].min\n            ).fill(false),\n            parentNodes: [],\n          };\n          evalFrom(sourceIndex, operands[i].operands, pX, pY);\n          newNodes.push(sourceNode);\n          newLines.push({\n            sourceIndex: sourceIndex,\n            sinkIndex: sinkIndex,\n            headPosition: {\n              x: sourceNode.x + functionWidth / 2,\n              y: sourceNode.y + functionWidth / 2,\n            },\n            tailPosition: {\n              x: newNodes[sinkIndex].x - nodeDimensions.outletXOffset * 2,\n              y:\n                newNodes[sinkIndex].y +\n                nodeDimensions.outletStartY +\n                i * nodeDimensions.outletYOffset, // outletIndex = i\n            },\n            outletIndex: i,\n          });\n          // setting all the dependent node values after pushing a new line\n          newNodes[sourceIndex].lineOut.push(lineIndex); //add line to lineOut array of source node\n          newNodes[sinkIndex].numInputs += 1; // updating the number of inputs for sink node\n          if (\n            newNodes[sinkIndex].numInputs >= newNodes[sinkIndex].numOutlets &&\n            gui.functions[newNodes[sinkIndex].name].color ===\n            gui.functionMultColor\n          ) {\n            // Adding a new outlet once existing outlets are used\n            newNodes[sinkIndex].numOutlets += 1;\n            newNodes[sinkIndex].activeOutlets.push(false);\n          }\n          newNodes[sinkIndex].activeOutlets[i] = lineIndex;\n        } else {\n          // value\n          if (gui.values[operands[i].name] === undefined) {\n            return Error();\n          }\n          const sourceNode = {\n            name: operands[i].name,\n            type: \"val\",\n            x: Math.random() * (0.8 * width),\n            y:\n              menuHeight +\n              Math.random() * (height - menuHeight - 2 * funBarHeight),\n            renderFunction: {\n              renderFunction: operands[i].code,\n              isRenderable: true,\n            },\n            lineOut: [],\n            numInputs: null,\n            numOutlets: null,\n            activeOutlets: null,\n            parentNodes: null,\n          };\n          newNodes.push(sourceNode);\n          newLines.push({\n            sourceIndex: sourceIndex,\n            sinkIndex: sinkIndex,\n            headPosition: {\n              x: sourceNode.x + functionWidth / 2,\n              y: sourceNode.y + functionWidth / 2,\n            },\n            tailPosition: {\n              x: newNodes[sinkIndex].x - nodeDimensions.outletXOffset * 2,\n              y:\n                newNodes[sinkIndex].y +\n                nodeDimensions.outletStartY +\n                i * nodeDimensions.outletYOffset, // outletIndex = i\n            },\n            outletIndex: i,\n          });\n          // setting all the dependent node values after pushing a new line\n          newNodes[sourceIndex].lineOut.push(lineIndex); //add line to lineOut array of source node\n          newNodes[sinkIndex].numInputs += 1; // updating the number of inputs for sink node\n          if (\n            newNodes[sinkIndex].numInputs >= newNodes[sinkIndex].numOutlets &&\n            gui.functions[newNodes[sinkIndex].name].color ===\n            gui.functionMultColor\n          ) {\n            // Adding a new outlet once existing outlets are used\n            newNodes[sinkIndex].numOutlets += 1;\n            newNodes[sinkIndex].activeOutlets.push(false);\n          }\n          newNodes[sinkIndex].activeOutlets[i] = lineIndex;\n        }\n        redoIndices.push(sinkIndex);\n      }\n    }\n    this.setState((state, props) => {\n      return {\n        nodes: newNodes,\n        lines: newLines,\n        redoFromIndices: redoIndices,\n      };\n    });\n  };\n\n  /**\n   * Adds a node to the node array\n   * @param {String} type\n   * @param {String} name\n   * @param {float} x\n   * @param {float} y\n   */\n  pushNode = (type, name, x, y) => {\n    //const newIndex = this.state.nodes.length;\n    let rf = {};\n    switch (type) {\n      case \"fun\":\n        rf = { renderFunction: \"\", isRenderable: false };\n        break;\n      case \"val\":\n        rf = { renderFunction: gui.values[name].rep, isRenderable: true };\n        break;\n      default:\n        Error(\"Error: neither a function or a value node.\");\n        break;\n    }\n    const node = {\n      // Creating a new node\n      name: name,\n      type: type,\n      x: x,\n      y: y,\n      renderFunction: rf,\n      lineOut: [],\n      numInputs: 0,\n      numOutlets: type === \"fun\" ? gui.functions[name].min : 0,\n      activeOutlets:\n        type === \"fun\"\n          ? // e.g. if the function is 'add', this will be [false, false]\n          Array(gui.functions[name].min).fill(false)\n          : null,\n      parentNodes: [],\n    };\n    this.setState((state, props) => {\n      return {\n        nodes: [...state.nodes, node],\n      };\n    });\n  };\n\n  /**\n   * Pushes a new line to 'lines'. Updates information for the sink node.\n   * @param {int} source\n   * @param {int} sink\n   */\n  pushLine = (source, sink, outletIndex) => {\n    // preventing infinite loops\n    if (!this.state.nodes[source].parentNodes.includes(sink)) {\n      let newLines = [...this.state.lines];\n      let lineIndex = newLines.length; // index of the new line about to be pushed\n\n      newLines.push({\n        sourceIndex: source,\n        sinkIndex: sink,\n        headPosition: {\n          x: this.state.nodes[source].x + functionWidth / 2,\n          y: this.state.nodes[source].y + functionWidth / 2,\n        },\n        tailPosition: {\n          x: this.state.nodes[sink].x - nodeDimensions.outletXOffset * 2,\n          y:\n            this.state.nodes[sink].y +\n            nodeDimensions.outletStartY +\n            outletIndex * nodeDimensions.outletYOffset,\n        },\n        outletIndex: outletIndex, // index of the outlet that the line is sinking into\n      });\n      let newNodes = [...this.state.nodes];\n      newNodes[source].lineOut.push(lineIndex); //add line to lineOut array of source node\n      newNodes[sink].numInputs += 1; // updating the number of inputs for sink node\n      if (\n        newNodes[sink].numInputs >= newNodes[sink].numOutlets &&\n        gui.functions[newNodes[sink].name].color === gui.functionMultColor\n      ) {\n        // Adding a new outlet once existing outlets are used\n        newNodes[sink].numOutlets += 1;\n        newNodes[sink].activeOutlets.push(false);\n      }\n      newNodes[sink].activeOutlets[outletIndex] = lineIndex;\n      this.setState({\n        nodes: newNodes,\n        lines: newLines,\n        redoFromIndices: [sink],\n      });\n    }\n  };\n\n  // +------------------------+\n  // | Adding Nodes and Lines |\n  // +------------------------+----------------------------------------\n\n  // +------------------------+----------------------------------------\n  // | Updating Node Position |\n  // +------------------------+\n\n  /**\n   * Updates the position of a node\n   * @param {int} index\n   * @param {float} x\n   * @param {float} y\n   */\n  updateNodePosition = (index, x, y) => {\n    let newLst = [...this.state.nodes];\n    newLst[index].x = x;\n    newLst[index].y = y;\n    this.setState({\n      nodes: newLst,\n    });\n  };\n\n  updateLinePosition = (nodeIndex, end, x, y) => {\n    console.log(\n      \"updateLinePosition \" +\n      this.state.nodes[nodeIndex].numInputs +\n      \" \" +\n      this.state.nodes[nodeIndex].lineOut.length\n    );\n    if (\n      this.state.nodes[nodeIndex].numInputs > 0 ||\n      this.state.nodes[nodeIndex].lineOut.length > 0\n    ) {\n      let newLines = [...this.state.lines];\n      // updating line position for all the incoming lines\n      for (let i = 0; i < this.state.nodes[nodeIndex].numOutlets; i++) {\n        if (typeof this.state.nodes[nodeIndex].activeOutlets[i] === \"number\") {\n          let lineIndex = this.state.nodes[nodeIndex].activeOutlets[i];\n          let line = newLines[lineIndex];\n          newLines[lineIndex].tailPosition = {\n            x: x - nodeDimensions.outletXOffset * 2,\n            y:\n              y +\n              nodeDimensions.outletStartY +\n              line.outletIndex * nodeDimensions.outletYOffset,\n          };\n        }\n      }\n      // updating line position for all the outgoing lines\n      for (let i = 0; i < this.state.nodes[nodeIndex].lineOut.length; i++) {\n        if (typeof this.state.nodes[nodeIndex].lineOut[i] === \"number\") {\n          let lineIndex = this.state.nodes[nodeIndex].lineOut[i];\n          newLines[lineIndex].headPosition = {\n            x: x + functionWidth / 2,\n            y: y + functionWidth / 2,\n          };\n        }\n      }\n      this.setState({\n        lines: newLines,\n      });\n    }\n  };\n\n  // +------------------------+\n  // | Updating Node Position |\n  // +------------------------+----------------------------------------\n\n  // +--------------------------+--------------------------------------\n  // | Removing Nodes and Lines |\n  // +--------------------------+\n\n  /**\n   * Resets the nodes and lines to reflect the deletion of a node at index\n   * @param {index} index\n   */\n  removeNode = (index) => {\n    let newNodes = [...this.state.nodes];\n    let newLines = [...this.state.lines];\n    const node = this.state.nodes[index];\n    // update info for the incoming lines\n    if (node.type === \"fun\") {\n      // updates lines and nodes according to the lines coming out of the node\n      for (let i = 0; i < node.activeOutlets.length; i++) {\n        const lineIndex = node.activeOutlets[i];\n        if (typeof lineIndex === \"number\") {\n          const source = newNodes[newLines[lineIndex].sourceIndex];\n          // finds and sets the line to false\n          newNodes[\n            newLines[lineIndex].sourceIndex // gets the source index of the line\n          ].lineOut[source.lineOut.indexOf(lineIndex)] = false; // gets the source node of the line // gets the index of the line within the source node's lineIndex array\n          newLines[lineIndex] = false;\n        }\n      }\n    }\n    // all the nodes that get directly affected by deleting the node\n    let newRedoIndices = [];\n    // update info for the outgoing lines and sink nodes\n    for (let i = 0; i < node.lineOut.length; i++) {\n      const lineIndex = node.lineOut[i];\n      if (typeof lineIndex === \"number\") {\n        const sinkIndex = newLines[lineIndex].sinkIndex;\n        const outletIndex = newLines[lineIndex].outletIndex;\n        newNodes[sinkIndex].activeOutlets[outletIndex] = false; // updates status of the sink node\n        newNodes[sinkIndex].numInputs -= 1; // updates sink node's number of inputs\n        let numOutlets = newNodes[sinkIndex].numOutlets;\n        // deleting extra outlets at the bottom\n        let j = numOutlets - 1;\n        while (\n          j >= gui.functions[newNodes[sinkIndex].name].min &&\n          !newNodes[sinkIndex].activeOutlets[j]\n        ) {\n          console.log(\"j:\" + j);\n          newNodes[sinkIndex].activeOutlets.pop();\n          newNodes[sinkIndex].numOutlets--;\n          j--;\n        }\n        newRedoIndices.push(sinkIndex);\n        newLines[lineIndex] = false; // removes the line\n      }\n    }\n    newNodes[index] = false;\n    this.setState({\n      nodes: newNodes,\n      lines: newLines,\n      redoFromIndices: newRedoIndices,\n    });\n  }; // removeNode\n\n  /**\n   * Resets the nodes and lines to reflect the deletion of a line at index\n   * @param {int} index\n   */\n  removeLine = (index) => {\n    const sourceIndex = this.state.lines[index].sourceIndex;\n    const sinkIndex = this.state.lines[index].sinkIndex;\n    const outletIndex = this.state.lines[index].outletIndex;\n    let newNodes = [...this.state.nodes];\n    newNodes[sourceIndex].lineOut[\n      // index of the removed line in the source node's lineOut array\n      newNodes[sourceIndex].lineOut.indexOf(index)\n    ] = false;\n    newNodes[sinkIndex].activeOutlets[outletIndex] = false; // updates the sink node's outlet status\n    newNodes[sinkIndex].numInputs -= 1;\n    let numOutlets = newNodes[sinkIndex].numOutlets;\n    let j = numOutlets - 1;\n    while (\n      j >= gui.functions[newNodes[sinkIndex].name].min &&\n      !newNodes[sinkIndex].activeOutlets[j] &&\n      newNodes[sinkIndex].numInputs + 1 < newNodes[sinkIndex].numOutlets\n    ) {\n      console.log(\"j:\" + j);\n      newNodes[sinkIndex].activeOutlets.pop();\n      newNodes[sinkIndex].numOutlets--;\n      j--;\n    }\n    let newLines = [...this.state.lines];\n    newLines[index] = false;\n    this.setState({\n      nodes: newNodes,\n      lines: newLines,\n      redoFromIndices: [sinkIndex],\n    });\n  };\n\n  // +--------------------------+\n  // | Removing Nodes and Lines |\n  // +--------------------------+--------------------------------------\n\n  // +-------------------------------+---------------------------------\n  // | Updating the Render Functions |\n  // +-------------------------------+\n\n  /**\n   * \n   * @param {int} index \n   * @param {float} value \n   * Updates the numeric value in the '#' node\n   */\n  updateHashValue = (index, value) => {\n    this.state.nodes[index].renderFunction.renderFunction = value;\n    const temp = [];\n    for (let i = 0; i < this.state.nodes[index].lineOut.length; i++) {\n      temp.push(this.state.lines[this.state.nodes[index].lineOut[i]].sinkIndex)\n    }\n    this.setState({\n      redoFromIndices: temp\n    })\n  }\n\n  /**\n   * Updates the render function of the node at index as well as all the nodes that branch out of it\n   * @param {int} index\n   */\n  renderFunctionRedo = (index) => {\n    console.log(\"renderFunctionRedo\");\n    let newNodes = [...this.state.nodes];\n    let node = newNodes[index];\n    let rf = \"\";\n    let isRenderable = true;\n    let lineCount = 0;\n    let parentNodes = [];\n    // getting the render function from each outlet (w/o going deeper into the tree)\n    for (let i = 0; i < node.activeOutlets.length; i++) {\n      const lineIndex = node.activeOutlets[i];\n      if (typeof lineIndex === \"number\") {\n        lineCount++;\n        let sourceIndex = this.state.lines[lineIndex].sourceIndex;\n        let sourceNode = this.state.nodes[sourceIndex];\n        // update parentNodes\n        if (sourceNode.type === \"fun\") {\n          parentNodes.push(sourceIndex);\n          parentNodes.push(...sourceNode.parentNodes);\n        }\n        rf += sourceNode.renderFunction.renderFunction;\n        rf += \",\";\n        // checks if any of the child node's render function is invalid;\n        // if so, sets isRenderable to false\n        if (!sourceNode.renderFunction.isRenderable) {\n          isRenderable = false;\n        }\n      }\n    }\n    // runs if the minimum number of inputs isn't met\n    for (\n      let i = 0;\n      i < Math.max(0, gui.functions[node.name].min - lineCount);\n      i++\n    ) {\n      rf += \"__,\";\n      // missing information means the function isn't renderable\n      isRenderable = false;\n    }\n    if (rf !== \"\") {\n      rf = rf.substring(0, rf.length - 1);\n      // puts the function's name and parentheses around the parameters\n      rf = gui.functions[node.name].prefix + \"(\" + rf + \")\";\n    }\n\n    newNodes[index].renderFunction = {\n      renderFunction: rf,\n      isRenderable: isRenderable,\n    };\n    newNodes[index].parentNodes = parentNodes;\n\n    /*for(let j = 0; j < newNodes.length; j++) {\n      console.log(\"hello\");\n      for (let i = 0; i < newNodes[j].parentNodes.length; i++) {\n        console.log(\n          \"parentNode for \" +\n          newNodes[j].name +\n            \": \" +\n            newNodes[j].parentNodes[i]\n        );\n      }\n    }*/\n    this.setState({\n      nodes: newNodes,\n    });\n    // goes through all of the lines coming out of the current node\n    for (let i = 0; i < node.lineOut.length; i++) {\n      const lineIndex = node.lineOut[i];\n      if (typeof lineIndex === \"number\") {\n        // recursively calls this function on its children (?) nodes\n        this.renderFunctionRedo(this.state.lines[lineIndex].sinkIndex);\n      }\n    }\n  };\n\n  /**\n   * Finds and sets the render function of the node of given index.\n   * @param {int} index\n   */\n  findRenderFunction = (index) => {\n    const node = this.state.nodes[index];\n    if (node.type === \"val\") {\n      return node.renderFunction;\n    }\n    let rf = \"\";\n    let isRenderable = node.renderFunction.isRenderable;\n    // checking all the incoming lines\n    let lineCount = 0;\n    for (let i = 0; i < node.activeOutlets.length; i++) {\n      const lineIndex = node.activeOutlets[i];\n      if (typeof lineIndex === \"number\") {\n        lineCount++;\n        rf += this.findRenderFunction(this.state.lines[lineIndex].sourceIndex)\n          .renderFunction;\n        rf += \",\";\n      }\n    }\n    // runs if the minimum number of inputs isn't met\n    for (\n      let i = 0;\n      i < Math.max(0, gui.functions[node.name].min - lineCount);\n      i++\n    ) {\n      rf += \"__,\";\n      // missing information means the function isn't renderable\n      isRenderable = false;\n    }\n    if (rf !== \"\") {\n      rf = rf.substring(0, rf.length - 1);\n    }\n    if (node.type === \"fun\" && rf !== \"\") {\n      // prevent parentheses with nothing in them\n      rf = gui.functions[node.name].prefix + \"(\" + rf + \")\";\n    }\n    let newNodes = [...this.state.nodes];\n    newNodes[index].renderFunction = {\n      renderFunction: rf,\n      isRenderable: isRenderable,\n    };\n    this.setState({\n      nodes: newNodes,\n    });\n    console.log(\n      \"node index:\" + index + \" rf:\" + rf + \" isRenderable: \" + isRenderable\n    );\n    return { renderFunction: rf, isRenderable: isRenderable };\n  };\n\n  // +-------------------------------+\n  // | Updating the Render Functions |\n  // +-------------------------------+---------------------------------\n\n  // +------------------------+----------------------------------------\n  // | Updating the Workspace |\n  // +------------------------+\n\n  /**\n   * Clears all nodes and lines\n   */\n  clearWorkspace = () => {\n    this.setState({\n      nodes: [],\n      lines: [],\n    });\n  };\n\n  // +-----------+----------------------------------------\n  // | Workspace |\n  // +-----------+\n\n  /**\n   * Save your workspace to the server\n   * Pre: User is authenticated and user does not already have a workspace by the given name\n   */\n  _saveWorkspace = (name) => {\n    // build workspace\n    const workspace = {\n      name: name,\n      data: {\n        ...this.state\n      },\n    }\n    // async POST fetch request\n    fetch('api/', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({ action: 'savews', workspace: (workspace) })\n    })\n      .then(res => res.json())\n      .then(data => {\n        if (data.success)\n          alert('Succesfully saved workspace ' + name);\n        else\n          throw (data.message);\n      })\n      .catch(error => { alert(error) })\n  }\n\n  /**\n   * Checks if the workspace exists in the server by the same name\n   * @param {String} name \n   */\n  checkIfWorkspaceExists = async (name) => {\n    const res = await fetch('api/?action=wsexists&name=' + name);\n    if (!res.ok)\n      throw new Error(`HTTP error! status: ${res.status}`);\n    else {\n      return await res.json()\n        .then(data => {\n          if (data === 'logged out')\n            throw new Error('You needed to be logged in!')\n          if (data.success) {\n            return data.exists;\n          }\n          else {\n            throw new Error(data.message);\n          }\n        });\n    }\n  }\n\n  /**\n   * Retrieve a user's workspaces from the server\n   */\n  getWorkspaces = async () => {\n    const res = await fetch('api/?action=getws');\n    if (!res.ok)\n      throw new Error(`HTTP error! status: ${res.status}`);\n    else {\n      return await res.json()\n        .then(data => {\n          if (data === 'logged out')\n            throw new Error('You needed to be logged in!')\n          if (data.success) {\n            return data.workspaces;\n          }\n          else {\n            throw new Error(data.message);\n          }\n        });\n    }\n  }\n\n  /**\n   * Delete a workspace of a name\n   * @param {String} name \n   */\n  deleteWorkspace = async (name) => {\n    // async POST fetch request\n    const res = await fetch('api/', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({ action: 'deletews', name: name })\n    });\n    if(!res.ok)\n      throw new Error(`HTTP error! status: ${res.status}`);\n    else{\n      return await res.json()\n        .then(data => {\n          if (data === 'logged out')\n            throw new Error('You needed to be logged in!')\n          if (data.success) {\n            return 'Successfully deleted workspace';\n          }\n          else {\n            throw new Error(data.message);\n          }\n        });\n    }\n  }\n\n  /**\n   * Load a workspace onto the state\n   */\n  loadWorkspace = (workspaceToLoad) => {\n    this.setState({\n      ...workspaceToLoad\n    })\n  }\n\n  // +------------------------+\n  // | Updating the Workspace |\n  // +------------------------+----------------------------------------\n\n  // +----------------------+------------------------------------------\n  // | Mouse Event Handlers |\n  // +----------------------+\n\n  updateMousePosition = (x, y) => {\n    console.log(\"updateMousePosition\");\n    this.setState({\n      mousePosition: { x: x, y: y },\n    });\n  };\n\n  /**\n   * When a function node gets clicked, its render function gets displayed in FunBar.\n   * @param {int} index\n   */\n  funClicked = (index) => {\n    this.setState({\n      currentNode: index,\n    });\n    // for (let i = 0; i < nodes[index].parentNodes.length; i++) {\n    //   console.log(\n    //     \"parentNode for \" +\n    //       nodes[index].name +\n    //       \": \" +\n    //       nodes[index].parentNodes[i]\n    //   );\n    // }\n  };\n\n  /**\n   * When a value node gets clicked, its name gets displayed in FunBar.\n   * @param {int} index\n   */\n  valClicked = (index) => {\n    this.setState({\n      currentNode: index,\n    });\n  };\n\n  /**\n   * If the connection is valid, clicking the outlet pushes a new line\n   * @param {*} sinkIndex\n   * @param {*} outletIndex\n   */\n  outletClicked = (sinkIndex, outletIndex) => {\n    if (\n      this.state.newSource !== null &&\n      this.state.newSource !== sinkIndex &&\n      this.state.nodes[sinkIndex].activeOutlets[outletIndex] === false &&\n      this.state.nodes[sinkIndex].numInputs <\n      gui.functions[this.state.nodes[sinkIndex].name].max\n    ) {\n      // a line coming out of source\n      this.pushLine(this.state.newSource, sinkIndex, outletIndex);\n    }\n  };\n\n  /**\n   * Called when the background is clicked.\n   */\n  bgClicked = (e) => {\n    this.setState({\n      newSource: null,\n      tempLine: null,\n      mouseListenerOn: false,\n    });\n  };\n\n  /**\n   * When a node is double-clicked, a line comes out of it with the end on the cursor\n   * @param {int} index\n   */\n  dblClicked = (index) => {\n    if (!this.state.tempLine && this.state.nodes[index].name !== \"rgb\") {\n      this.setState({\n        newSource: index,\n        mouseListenerOn: true,\n        mousePosition: {\n          x: this.state.nodes[index].x + gui.functionRectSideLength / 2,\n          y: this.state.nodes[index].y + gui.functionRectSideLength / 2,\n        },\n        tempLine: {\n          sourceX: this.state.nodes[index].x,\n          sourceY: this.state.nodes[index].y,\n        },\n      });\n    }\n  };\n\n  // +----------------------+\n  // | Mouse Event Handlers |\n  // +----------------------+------------------------------------------\n\n  // +--------+--------------------------------------------------------\n  // | RENDER |\n  // +--------+\n\n  render() {\n    return (\n      <div\n        id=\"workspace\"\n        style={{\n          width: width,\n          height: height + this.footer,\n          backgroundColor: colors.workspaceBackground[this.state.theme]\n        }}\n      >\n        <div onClick={()=>this.deleteWorkspaces('a').then(alert).catch(alert)}>Delete ws</div>\n        <Stage\n          width={width}\n          height={height}\n          onClick={() => {\n            this.setState({\n              newSource: null,\n              tempLine: null,\n              mouseListenerOn: false,\n            });\n          }}\n          onMouseMove={(e) => {\n            if (this.state.mouseListenerOn) {\n              this.updateMousePosition(\n                e.evt.clientX -\n                document.getElementById(\"workspace\").getBoundingClientRect()\n                  .x,\n                e.evt.clientY -\n                document.getElementById(\"workspace\").getBoundingClientRect().y\n              );\n            }\n          }}\n        >\n          <Layer>\n            {this.state.tempLine && (\n              <DrawArrow\n                sourceX={this.state.tempLine.sourceX + functionWidth / 2}\n                sourceY={this.state.tempLine.sourceY + functionWidth / 2}\n                sinkX={this.state.mousePosition.x}\n                sinkY={this.state.mousePosition.y}\n                fill={colors.lineFill[this.state.theme]}\n              />\n            )}\n          </Layer>\n          <Layer>\n            {this.state.nodes.length !== 0 &&\n              this.state.lines.map(\n                (line, index) =>\n                  line && (\n                    <DrawArrow\n                      index={index}\n                      key={index}\n                      sourceX={line.headPosition.x}\n                      sourceY={line.headPosition.y}\n                      sinkX={line.tailPosition.x}\n                      sinkY={line.tailPosition.y}\n                      removeLine={this.removeLine.bind(this)}\n                      fill={colors.lineFill[this.state.theme]}\n                      hoverShadowColor={\n                        colors.nodeHoverShadow[this.state.theme]\n                      }\n                    />\n                  )\n              )}\n          </Layer>\n          <Layer>\n            {this.state.nodes.map(\n              (node, index) =>\n                (node && node.type === \"fun\" && (\n                  <FunNode\n                    name={node.name}\n                    key={index} // just to silence a warning message\n                    index={index}\n                    x={node.x}\n                    y={node.y}\n                    offsetX={this.offsetX}\n                    offsetY={this.offsetY}\n                    numInputs={node.numInputs}\n                    numOutlets={node.numOutlets}\n                    renderFunction={\n                      node.renderFunction.isRenderable\n                        ? node.renderFunction.renderFunction\n                        : false\n                    }\n                    updateNodePosition={this.updateNodePosition.bind(this)}\n                    updateLinePosition={this.updateLinePosition.bind(this)}\n                    funClicked={this.funClicked.bind(this)}\n                    outletClicked={this.outletClicked.bind(this)}\n                    dblClickHandler={this.dblClicked.bind(this)}\n                    removeNode={this.removeNode.bind(this)}\n                    hoverShadowColor={colors.nodeHoverShadow[this.state.theme]}\n                  />\n                )) ||\n                (node && node.type === \"val\" && (\n                  <ValNode\n                    name={node.name}\n                    key={index}\n                    index={index}\n                    x={node.x}\n                    y={node.y}\n                    offsetX={this.offsetX}\n                    offsetY={this.offsetY}\n                    renderFunction={\n                      node.renderFunction.isRenderable\n                        ? node.renderFunction.renderFunction\n                        : false\n                    }\n                    updateNodePosition={this.updateNodePosition.bind(this)}\n                    updateLinePosition={this.updateLinePosition.bind(this)}\n                    clickHandler={this.valClicked.bind(this)}\n                    dblClickHandler={this.dblClicked.bind(this)}\n                    removeNode={this.removeNode.bind(this)}\n                    updateHashValue={this.updateHashValue.bind(this)}\n                  />\n                ))\n            )}\n          </Layer>\n          <Layer>\n            {\n              <Menu\n                addNode={this.pushNode.bind(this)}\n                addLine={this.pushLine.bind(this)}\n                clearWorkspace={this.clearWorkspace.bind(this)}\n                createLayout={this.createLayout.bind(this)}\n                bgColor={colors.menuBackground[this.state.theme]}\n                wsButtonColor={colors.workspaceButton[this.state.theme]}\n                valueMenuColor={\n                  (this.state.theme === \"classic\" && colors.valueMenuColor1) ||\n                  (this.state.theme === \"dusk\" && colors.valueMenuColor2) ||\n                  (this.state.theme === \"dark\" && colors.valueMenuColor3)\n                }\n                funTabColor={colors.menuFunTab[this.state.theme]}\n                valTabColor={colors.menuValTab[this.state.theme]}\n                customTabColor={colors.menuCustomTab[this.state.theme]}\n                savedTabColor={colors.menuSavedTab[this.state.theme]}\n                top={this.offsetY}\n                left={this.offsetX}\n\n                checkIfWorkspaceExists={this.checkIfWorkspaceExists.bind(this)}\n                deleteWorkspace={this.deleteWorkspace.bind(this)}\n                getWorkspaces={this.getWorkspaces.bind(this)}\n                loadWorkspace={this.loadWorkspace.bind(this)}\n                saveWorkspace={this._saveWorkspace.bind(this)}\n\n              />\n            }\n          </Layer>\n          <Layer>\n            <FunBar\n              renderFunction={\n                this.state.currentNode !== null &&\n                  this.state.nodes[this.state.currentNode]\n                  ? this.state.nodes[this.state.currentNode].renderFunction\n                  : { renderFunction: \"\", isRenderable: false }\n              }\n              bg={colors.funBarBackground[this.state.theme]}\n              onClick={() => {\n                let i = (this.state.themeIndex + 1) % this.themes.length;\n                this.setState({\n                  themeIndex: i,\n                  theme: this.themes[i],\n                });\n              }}\n              functionBoxBg={this.state.theme === \"dark\" ? \"darkgray\" : \"white\"}\n              functionTextColor={\n                this.state.theme === \"dark\" ? \"black\" : \"black\"\n              }\n              top={this.offsetY}\n              left={this.offsetX}\n            />\n            <Text\n              x={10}\n              y={130}\n              width={200}\n              height={50}\n              text={\"CHANGE THEME\"}\n              fill={this.state.theme === \"dark\" ? \"white\" : \"black\"}\n              fontSize={14}\n              onClick={() => {\n                let i = (this.state.themeIndex + 1) % this.themes.length;\n                this.setState({\n                  themeIndex: i,\n                  theme: this.themes[i],\n                });\n              }}\n            />\n          </Layer>\n        </Stage>\n      </div>\n    );\n  }\n}\n\nexport default WorkspaceComponent;\n","// +----------------------------------------------------------------------------------------------------------\n// | Tutorial.js |\n// +-------------+\n\n/**\n * This is the Tutorials page.\n *\n * Copyright (c) 2020 Samuel A. Rebelsky and the people who did the work.\n * This work is licenced under a LGLP 3.0 or later .....\n *\n */\n\n// +--------------------------------------+-------------------------------------------------------------------\n// | Design Issues  -- The Sections array |\n// +--------------------------------------+\n\n/**\n * All the tutorials page content is in an array called sections[].\n *   Sections are the following as of Summer 2020:\n *       - Getting Started\n *       - Varaibles\n *       - Functions\n *       - Shapes\n *       - Customize\n *       - Interesting Images\n *\n *   Each SECTIONS have the following fields:\n *     - title\n *         | This is the name that is shown on the UI (button)\n *\n *     - subsections\n *         | Subsections are eg. Introduction to Mist, The Workspace, ... , Circle, Rhombus, Triangle, etc.\n *\n *   ----------------------------------------------------------------------------------------------------------\n *   Each SUBSECTIONS have the following fields:\n *     - title\n *        | The title of the subsection (eg. Introduction to MIST)\n *\n *     - id\n *        | The id of the subsection to refer to,\n *        |and is also related to the URL(eg. intro-to-mist)\n *\n *     - keywords\n *        | the keywords of the different subsections\n *        |  Needs to be mapped, not yet connected / called in the code\n *\n *     - final product image\n *        | need to be added in this array, will be a MISTimg probably\n *\n *     - text\n *        | the text tutorial option -- html code content\n *\n *     - video\n *        | The video tutorial option\n *\n *     - final\n *        | mini workspace with the final product layout\n *\n *     - challenges\n *        | an array of challenges\n *        | each challenge has the following fields:\n *        |    - question:  html code question + possible image\n *        |    - hint    :  html code content for hint\n *   ------------------------------------------------------------------------------------------------------------\n */\n\n// +-----------------------------+-------------------------------------------------------------------------------\n// | Design Issues  -- This File |\n// +-----------------------------+\n\n/**\n * 1. Imports\n * 2. Tutorial Code\n *       - Table of Contents\n *       - Tutorials contents\n *           | SubsectionButton\n *                 + Button that has a section name on (eg. text),\n *                 + and goes to that subsection\n *           | Help Modal\n *                 + the overlay modal that comes up when someone needs help in challenges\n *           | Text Tutorial\n *           | Video Tutorial\n *           | Final\n * 3. Sections array\n *\n * Both the *Table of Contents* and the *Tutorials contents*\n * are relying on sections[].\n */\n\n// +---------+--------------------------------------\n// | IMPORTS |\n// +---------+\nimport React from \"react\";\nimport {\n  Nav,\n  Accordion,\n  Card,\n  Button,\n  Container,\n  Row,\n  Col,\n  Jumbotron,\n  Modal,\n  DropdownButton,\n  Dropdown,\n} from \"react-bootstrap\";\n\nimport \"bootstrap/dist/css/bootstrap.css\";\n\nimport { Link } from \"react-router-dom\";\nimport { BsQuestionCircle, BsClock } from \"react-icons/bs\";\nimport { RiMenu2Line } from \"react-icons/ri\";\n\nimport MISTImage from \"./components/MISTImageGallery\";\n\nimport WorkSpace from \"../workspace\";\n\nimport Circle from \"./../TutorialImages/CircleImages/circle.png\";\nimport Circle1 from \"./../TutorialImages/CircleImages/circle1.png\";\nimport Circle2 from \"./../TutorialImages/CircleImages/circle2.png\";\nimport Circle3 from \"./../TutorialImages/CircleImages/circle3.png\";\n\n//Tutorial Header\nfunction Tutorial() {\n  return (\n    <Container fluid \n               style={{\n                 marginTop: \"2vh\",\n                 marginBottom: \"0\", \n                 paddingBottom: \"7.5rem\"\n                }}>\n    <Row\n      style={{\n        marginLeft: \"1em\",\n        marginRight: \"1em\",\n        alignItems: \"flex-start\",\n      }}\n    >\n      <Col xs=\"3\" style={{ position: \"sticky\", top: \"2rem\" }}>\n        {/* Table of Contents */}\n        <TableContents />\n      </Col>\n      <Col xs=\"9\">\n        {/* Tutorials */}\n        <Tutorials />\n      </Col>\n    </Row>\n    </Container>\n  );\n}\n\n// +--------------------+--------------------------------------------\n// | Table of Contents  |\n// +------------------- +\n\nfunction TableContents() {\n  return (\n    <Card>\n      {/* Title -- Table of Contents */}\n      <Card.Header style={{ marginTop: \"2vh\" }}>\n        <h3 style={{fontSize: \"170%\"}}>\n          Table of Contents \n        </h3>\n      </Card.Header>\n      {/* All the sections and subsections */}\n      <Accordion>\n        {/* Maps each sections  */}\n        {sections.map((section, idx) => (\n          <Card>\n            <Card.Header>\n              {/* Displays the title of the section */}\n              <Accordion.Toggle\n                as={Button}\n                variant=\"link\"\n                eventKey={idx + 1}\n                style={{ color: \"black\" }}\n              >\n                {section.title}\n              </Accordion.Toggle>\n            </Card.Header>\n\n            {/* On eventkey, it opens the Buttons with the same eventkey */}\n            <Accordion.Collapse eventKey={idx + 1}>\n              <Card.Body>\n                <Nav className=\"flex-column\">\n                  {/* Maps each subsections */}\n                  {section.subsections.map((subsection) => (\n                    //The button in the Table of Contents with the subsection title\n                    <Button\n                      offset=\"10\"\n                      href={\"#\" + subsection.id}\n                      style={{\n                        color: \"black\",\n                        background: \"none\",\n                        border: \"none\",\n                        textAlign: \"left\",\n                      }}\n                    >\n                      {subsection.title}\n                    </Button>\n                  ))}\n                </Nav>\n              </Card.Body>\n            </Accordion.Collapse>\n          </Card>\n        ))}\n      </Accordion>\n    </Card>\n  );\n}\n\n// +----------------------------+----------------------------------------\n// | Tutorial Contents          |\n// +--------------------------- +\n\nfunction Tutorials() {\n  return (\n    <Container style={{ margin: \"2vh\" }}>\n      {/* Maps each sections */}\n      {sections.map((section, idx) => (\n        <div>\n          {/* Maps each subsections */}\n          {section.subsections.map((subsection, idx) => (\n            //Has correct subsection id\n            <section id={subsection.id}>\n              <Container>\n                {/* The \"header\" of the subsection */}\n                <Jumbotron\n                  fluid\n                  style={{\n                    borderRadius: \"20px\",\n                    border: \"solid\",\n                    borderWidth: \"1px\",\n                    borderColor: \"gray\",\n                  }}\n                >\n                  <Container>\n                    <Row>\n                      <Col sm=\"8\">\n                        <h1 style={{ textAlign: \"left\" }}>\n                          {subsection.title}{\" \"}\n                          <Link\n                            to={\"#\" + subsection.id}\n                            style={{ color: \"gray\" }}\n                          >\n                            #\n                          </Link>\n                        </h1>\n                        <hr />\n\n                        {/* keywords */}\n                        <Row style={{ marginLeft: \"1vh\" }}>\n                          {subsection.keywords.map((keyword) => (\n                            <p1 style={{ margin: \"1vh\" }}>\n                              {\" \"}\n                              {keyword} &#x25CF;\n                            </p1>\n                          ))}\n                        </Row>\n\n                        {/* Buttons for the text, video, final, and challenges sections */}\n                        <Row style={{ marginLeft: \"1em\", paddingTop: \"2vh\" }}>\n                          <SubsectionButton id={subsection.id} type=\"text\" />\n                          <SubsectionButton id={subsection.id} type=\"video\" />\n                          <SubsectionButton id={subsection.id} type=\"final\" />\n                          <SubsectionButton id={subsection.id} type=\"challenges\"/>\n                        </Row>\n                      </Col>\n\n                      {/* The Final Image */}\n                      <Col style={{ justifyContent: \"center\" }}>\n                        <Row style={{ justifyContent: \"center\" }}>\n                          {subsection.image}\n                        </Row>\n                        <Row style={{ justifyContent: \"center\" }}>\n                          {subsection.isAnimated ? (\n                            <p>\n                              <BsClock size={15} style={{ margin: \"1vh\" }} />\n                              Hover over for animation!\n                            </p>\n                          ) : (\n                              \"\"\n                            )}\n                        </Row>\n                      </Col>\n                    </Row>\n                  </Container>\n                </Jumbotron>\n                {/* END OF \"HEADER\" OF SUBSECTION! */}\n\n                {/* Text, Video, Final, Challenges sections */}\n                <Text text={subsection.text} id={subsection.id} />\n                <Video video={subsection.video} id={subsection.id} />\n                <Final final={subsection.final} id={subsection.id} />\n                {subsection.isChallenge ? (\n\n                  <Challenges\n                    challenges={subsection.challenges}\n                    id={subsection.id}\n                  />\n\n                ) : (\n                    \"\"\n                  )}\n\n              </Container>\n            </section>\n          ))}\n        </div>\n      ))}\n    </Container>\n  );\n}\n\n/**\n * Button on the Jumbotron that is the text\n */\nfunction SubsectionButton(props) {\n  return (\n    <Button\n      variant=\"outline-dark\"\n      style={{ marginRight: \"1em\" }}\n      href={\"#\" + props.id + \"-\" + props.type}\n    >\n      {props.type}\n    </Button>\n  );\n}\n\n/**\n * Text section\n */\nfunction Text(props) {\n  return (\n    <Card\n      id={props.id + \"-text\"}\n      style={{\n        borderRadius: \"15px\",\n        backgroundColor: \"white\",\n        borderWidth: \"1px\",\n        margin: \"1vh\",\n      }}\n    >\n      <Card.Body>\n        <Row>\n          <Col xs=\"11\">\n            <Container> Text </Container>\n            {props.text}\n          </Col>\n          <Col xs=\"1\">\n            <SectionMenu id={props.id} />\n          </Col>\n        </Row>\n      </Card.Body>\n    </Card>\n  );\n}\n/**\n * Video section\n */\nfunction Video(props) {\n  return (\n    <Card\n      id={props.id + \"-video\"}\n      style={{\n        borderRadius: \"15px\",\n        backgroundColor: \"white\",\n        borderWidth: \"1px\",\n        margin: \"1vh\",\n      }}\n    >\n      <Card.Body>\n        <Row>\n          <Col xs=\"11\">\n            <Container>Video </Container>\n            {props.video}\n          </Col>\n          <Col xs=\"1\">\n            <SectionMenu id={props.id} />\n          </Col>\n        </Row>\n      </Card.Body>\n    </Card>\n  );\n}\n\n/**\n * Final section\n */\nfunction Final(props) {\n  return (\n    <Card\n      id={props.id + \"-final\"}\n      style={{\n        borderRadius: \"15px\",\n        backgroundColor: \"white\",\n        borderWidth: \"1px\",\n        margin: \"1vh\",\n      }}\n    >\n      <Card.Body>\n        <Row>\n          <Col xs=\"11\">\n            <Container> Final </Container>\n            {props.final}\n          </Col>\n          <Col xs=\"1\">\n            <SectionMenu id={props.id} />\n          </Col>\n        </Row>\n      </Card.Body>\n    </Card>\n  );\n}\n\n/* Challenges section */\nfunction Challenges(props) {\n\n  return (\n    <Card\n      id={props.id + \"-challenges\"}\n      style={{\n        borderRadius: \"15px\",\n        backgroundColor: \"white\",\n        borderWidth: \"1px\",\n        margin: \"1vh\",\n      }}\n    >\n      <Card.Body>\n        <Row>\n          <Col xs=\"11\">\n            <Container>Challenges</Container>\n            <Container>\n\n              {/* Maps each challenges */}\n              {props.challenges.map((challenge) => (\n                <Challenge question={challenge.question} hint={challenge.hint} />\n              ))}\n\n            </Container>\n          </Col>\n\n          {/* each section's small menu icon on the right side */}\n          <Col xs=\"1\">\n            <SectionMenu id={props.id} />\n          </Col>\n        </Row>\n      </Card.Body>\n    </Card>\n  );\n}\n\n/* Challenge */\nfunction Challenge(props) {\n  const [modalShow, setModalShow] = React.useState(false);\n  return (\n    <Container>\n      {props.question}\n\n      {/* Help Icon Button */}\n      <Nav.Link onClick={() => setModalShow(true)}>\n        <BsQuestionCircle />\n      </Nav.Link>\n      \n      {/* Callse Help Modal*/}\n      <HelpModal\n        show={modalShow}\n        onHide={() => setModalShow(false)}\n        hint={props.hint}\n      />\n    </Container>\n  )\n}\n\n/**\n * Help Overlay\n */\nfunction HelpModal(props) {\n  return (\n    <Modal\n      {...props}\n      size=\"lg\"\n      aria-labelledby=\"contained-modal-title-vcenter\"\n      centered\n    >\n      <Modal.Header closeButton>\n        <Modal.Title id=\"contained-modal-title-vcenter\">Hint</Modal.Title>\n      </Modal.Header>\n      <Modal.Body>{props.hint}</Modal.Body>\n      <Modal.Footer>\n        <Button onClick={props.onHide}>Close</Button>\n      </Modal.Footer>\n    </Modal>\n  );\n}\n/**\n * The dropdown menu and icon on the right side of each smaller sections\n */\nfunction SectionMenu(props) {\n  return (\n    <DropdownButton\n      variant=\"secondary-outline\"\n      id=\"dropdown-item-button\"\n      title={<RiMenu2Line />}\n      sticky=\"top\"\n      style={{ position: \"sticky\", top: \"2rem\" }}\n    >\n      <Col>\n        <SubsectionDropdownItem id={props.id} type=\"text\" />\n        <SubsectionDropdownItem id={props.id} type=\"video\" />\n        <SubsectionDropdownItem id={props.id} type=\"final\" />\n        <SubsectionDropdownItem id={props.id} type=\"challenges\" />\n      </Col>\n    </DropdownButton>\n  );\n}\n\n/**\n * One item in the menu\n */\nfunction SubsectionDropdownItem(props) {\n  return (\n    <Dropdown.Item\n      style={{\n        marginRight: \"1em\",\n        color: \"black\",\n        background: \"none\",\n        border: \"none\",\n      }}\n      href={\"#\" + props.id + \"-\" + props.type}\n      variant=\"secondary\"\n    >\n      {props.type}\n    </Dropdown.Item>\n  );\n}\n\n//+---------------------+----------------------------------------------------------------------------------------------------------------------\n//| Section Array    |\n//+------------------+\n\nconst sections = [\n  {\n    //+------------------+----------------------------------------------------------------------------------------------------------------------\n    //| Getting Started  |\n    //+------------------+\n\n    title: \"Getting Started\",\n\n    subsections:\n      /* Introduction to MIST */\n      [\n        {\n          title: \"Introduction to MIST\",\n          id: \"intro-to-mist\",\n          keywords: [\"introduction\", \"MIST\", \"general\"],\n          image: <MISTImage code=\"x\" resolution=\"250\" />,\n          isAnimated: false,\n          //Text\n          text: (\n            <Container>\n              Welcome to MIST, the Mathematical Image Synthesis Toolkit!\n              <br />\n              In this video we will go over the basic ideas of MIST!\n              <br />\n              After this, you will have a better understanding of how variables\n              and functions are getting translated to the cool images that you\n              can create with MIST.\n              <br />\n              All images in MIST are drawn on a square canvas.\n              <br />\n              We have an x and a y axis, just like in math class!\n              <br />\n              X values range from -1 at the left to 1 at the right. Y values\n              range from -1 at the top to 1 at the bottom (This is different\n              from what you have experienced in math class!).\n              <br />\n              Numbers also represent colors. Since we're working in the range -1\n              to 1, we must assign a meaning to each number. We'll start with\n              greyscale images. In greyscale, the value 1 represents the color\n              black (or lots of ink). Conversely, -1 is white.\n              <br />\n              And anything between -1 and 1 is grey.\n              <br />\n              Here's an image in which each color depends on the x coordinate.\n              <br />\n              We would write this as x.\n              <br />\n              We can apply mathematical operations, too. Here's what happens\n              when we multiply x times y. (Don't worry about how we're writing\n              it; you'll use a graphical user interface to build images.) You've\n              learned the basics of the MIST world. It's time to start making\n              your own images.\n            </Container>\n          ),\n\n          //Video\n          video: <Container>This is a video </Container>,\n\n          //Final\n          final: <Container> This is the final imaget </Container>,\n\n          isChallenge: false,\n\n          //Challenges\n          challenges: [\n            //   {\n            //   question:\n            //     <Container>This is a Challenge 1 </Container>,\n            //   hint:\n            //     <Container>This is a hint 1 </Container>\n            // },\n            // {\n            //   question:\n            //     <Container> This is a Challenge 2 </Container>,\n            //   hint:\n            //     <Container> This is a hint 2</Container>\n            // }\n          ],\n        },\n\n        //+------------------+----------------------------------------------------------------------------------------------------------------------\n        //| The Workspace    |\n        //+------------------+\n\n        {\n          title: \"The Workspace\",\n          id: \"workspace\",\n          keywords: [\"graph\", \"grayscale\", \"general\"],\n          image: <MISTImage code=\"x\" resolution=\"250\" />,\n          isAnimated: false,\n          //Text\n          text: (\n            <Container>\n              Welcome to the workspace! This is where you will be making all of\n              your lovely images from mathematical equations.\n              <br />\n              Here, you are able to choose from a variety of values and\n              functions that allow the images to be made and are connected\n              through lines.\n              <br />\n              Each image has a range of -1 to 1, where -1 represents white and 1\n              represents black; everything in between is gray until the rbg\n              function is used. X- values range from -1 on the left and 1 on the\n              right, while y-values range from -1 at the top to 1 at the bottom.\n            </Container>\n          ),\n\n          //Video\n          video: <Container>This is a video </Container>,\n\n          //Final\n          final: <Container> This is the final image </Container>,\n\n          isChallenge: false,\n          //Challenges\n          challenges: [\n            //{\n            //   question:\n            //     <Container> This is a Challenge 1 </Container>,\n            //   hint:\n            //     <Container> This is a hint 1 </Container>\n            // },\n            // {\n            //   question:\n            //     <Container> This is a Challenge 2</Container>,\n            //   hint:\n            //     <Container> This is a hint 2</Container>\n            // }\n          ],\n        },\n\n        //+------------------+----------------------------------------------------------------------------------------------------------------------\n        //| The Website      |\n        //+------------------+\n        {\n          title: \"The Website\",\n          ref: \"#website\",\n          id: \"website\",\n          keywords: [\"graph\", \"grayscale\", \"introduction\"],\n          image: <MISTImage code=\"x\" resolution=\"250\" />,\n          isAnimated: false,\n          //Text\n          text: (\n            <Container>\n              Welcome to a tour of the MIST website!\n              <br />\n              To start off, this is the home page. There are many different\n              routes you can take here, from looking at other peoples' images to\n              creating your own. Let's begin with the create page, which you can\n              get to by clicking \"create\" on the top left of the page on the\n              menu bar.\n              <br />\n              <WorkSpace /> \n              On the create page, you can make your own images using the\n              workspace on it.\n              <br />\n              Next is the challenges page, which can also be found by clicking\n              the button beside \"create.\" Here, you can click on a challenge,\n              which is an image that you try to recreate!\n              <br />\n              After this, we're going to go to the tutorial page, which is the\n              page that we're currently on if you're reading this!\n              <br />\n              Next up is the gallery. With the gallery, you can see what other\n              people have created. Here, you can click on images to learn more\n              about it. You can see who created the image, how many favorites it\n              has, you can save or share, or view or add a comment!\n              <br />\n              After this, we can look at the About MIST and development page.\n              This explain what MIST is about!\n              <br />\n              We can also go to the community guidelines page. This explains the\n              guidelines for using MIST and being a respectful of other peoples\n              <br />\n              Next we can go to the FAQ, which is still under the \"About\" tab.\n              <br />\n              Use the \"Sign In/Up\" tab to login or sign up for MIST!\n              <br />\n              You can use the search bar in the top right corner to look up\n              users, images, and albums!\n            </Container>\n          ),\n\n          //Video\n          video: <Container> This is a video </Container>,\n\n          //Final\n          final: <Container> This is the final image </Container>,\n\n          isChallenge: false,\n          //Challenges\n          challenges: [\n            //   {\n            //   question:\n            //     <Container> This is a Challenge 1 </Container>,\n            //   hint:\n            //     <Container> This is a hint 1 </Container>\n            // },\n            // {\n            //   question:\n            //     <Container> There's no challenge for this tutorial! </Container>,\n            //   hint:\n            //     <Container> This is a hint 2</Container>\n            // }\n          ],\n        },\n\n        //+------------------+----------------------------------------------------------------------------------------------------------------------\n        //| The Expert UI    |\n        //+------------------+\n\n        {\n          title: \"The Expert UI\",\n          id: \"expert-ui\",\n          keywords: [\"graph\", \"grayscale\", \"axis\"],\n          image: <MISTImage code=\"x\" resolution=\"250\" />,\n          isAnimated: false,\n          //Text\n          text: <Container>This section is about the Expert UI!</Container>,\n\n          //Video\n          video: <Container>This is a video </Container>,\n\n          //Final\n          final: <Container> This is the final image </Container>,\n\n          isChallenge: true,\n          //Challenges\n          challenges: [\n            {\n              question: <Container> This is a Challenge 1 </Container>,\n              hint: <Container>This is a hint 1 </Container>,\n            },\n            {\n              question: <Container> This is a Challenge 2 </Container>,\n              hint: <Container> This is a hint 2</Container>,\n            },\n          ],\n        },\n\n        //+------------------+----------------------------------------------------------------------------------------------------------------------\n        //| Good Practices  |\n        //+------------------+\n        /*{\n        title: \"Good Practices\", ref: '#good-practices', id: 'good-practices',\n        keywords: [\"graph\", \"grayscale\", \"axis\"],\n        //Text\n        text:\n          <Container>Good practices who?</Container>,\n        //Video\n        video:\n          <Container> This is a video </Container>,\n        //Final\n        final:\n          <Container> This is a video </Container>,\n        //Challenges\n        challenges:\n          [{\n            question:\n              <Container> This is a Challenge 1 </Container>,\n            hint:\n              <Container> This is a hint 1 </Container>\n          },\n          {\n            question:\n              <Container> This is a Challenge 2 </Container>,\n            hint:\n              <Container> This is a hint 2</Container>\n          }]\n      } */\n      ],\n  },\n\n  //+------------------+----------------------------------------------------------------------------------------------------------------------\n  //| The Variables    |\n  //+------------------+\n  {\n    title: \"Variables\",\n    subsections: [\n      {\n        title: \"X, Y, and Constants\",\n        id: \"x-y-constants\",\n        keywords: [\"introduction\", \"grayscale\", \"MIST\"],\n        image: <MISTImage code=\"x\" resolution=\"250\" />,\n        isAnimated: false,\n        //Text\n        text: (\n          <Container>\n            <b>X</b>, <b>Y</b> and <b>constants</b> are values in MIST that are\n            inputted into functions or even used on their own.\n            <br />\n            The <b>X</b> variable ranges from -1 to 1 based on the x-values.\n            This means that from left to right, the colors of this block change\n            white to black. This is because x-values change horizontally.\n            <br />\n            The <b>Y</b> variable ranges from -1 to 1 based on the y-values.\n            Remember that for <b>Y</b>, -1 starts at the top and 1 is at the\n            bottom. Therefore, white is at the top and slowly turns black, which\n            comes from y-values changing hoizontally.\n            <br />A constant is a value that doesn't change, hence the name\n            constant. For example, if we had the value <b>2</b>, it would always\n            remain as <b>2</b>.\n          </Container>\n        ),\n        //need to add how to change.\n\n        //Video\n        video: <Container> This is a video </Container>,\n\n        //Final\n        final: <Container> This is the final image </Container>,\n        isChallenge: false,\n        //Challenges\n        challenges: [\n          //   {\n          //   question:\n          //     <Container> This is a Challenge 1 </Container>,\n          //   hint:\n          //     <Container> This is a hint 1 </Container>\n          // },\n          // {\n          //   question:\n          //     <Container> This is a Challenge 2 </Container>,\n          //   hint:\n          //     <Container> This is a hint 2</Container>\n          // }\n        ],\n      },\n\n      //+---------------------+------------------------------------------------------------------------------------------------------------------\n      //| Time and Animations |\n      //+---------------------+\n      {\n        title: \"Time and Animations\",\n        id: \"time-animations\",\n        keywords: [\"animation\", \"grayscale\", \"time\"],\n        image: <MISTImage code=\"mult(x,t.s,2)\" resolution=\"250\" />,\n        isAnimated: true,\n        //Text\n        text: (\n          <Container>\n            In order to get an animation, you'll have to connect a time variable\n            to your workspace! This includes the blocks <b>t.s</b>, <b>t.m</b>,{\" \"}\n            <b>t.h</b>, <b>t.d</b>. These are divided by increasing times, with\n            s standing for seconds, m for minutes, h for hours, and d for days.\n            <br />\n            Adding time causes the image to become an animation. This is because\n            time passes, it changes the input and therefore changes the image.\n            <br />\n            Time and animations can be manipulated. You can add them, multiply\n            them, or change them with other functions and this speeds up or\n            slows down the animation.\n            <br />\n            To show an example of this:\n            <br />\n            1. Add an <b>x</b> and <b>t.s</b> variable to the workspace.\n            <br />\n            2. Drag in a <b>mult</b> block and connect the <b>x</b> and{\" \"}\n            <b>t.s</b> to it. Now you can see time changes what was once a a\n            simple <b>x</b> image.\n            <br />\n            3. To change the speed of the animation, bring in a <b>\n              constant\n            </b>{\" \"}\n            variable and set it equal to 2. Connect this to the <b>mult</b>{\" \"}\n            block that is already there and see how the speed changes. It should\n            move much quicker now!\n          </Container>\n        ),\n\n        //Video\n        video: <Container> This is a video </Container>,\n\n        //Final\n        final: <Container> This is the final image </Container>,\n        isChallenge: true,\n        //Challenges\n        challenges: [\n          {\n            question: (\n              <Container>\n                <p1>\n                  Try making the following image: <br />\n                </p1>\n                <MISTImage code=\"mult(x,y,t.s)\" resolution=\"250\" />\n              </Container>\n            ),\n\n            hint: (\n              <Container>\n                {\" \"}\n                What happens when some variables get multipled?{\" \"}\n              </Container>\n            ),\n          },\n          {\n            question: <Container> This is a Challenge 2 </Container>,\n            hint: <Container> This is a hint 2</Container>,\n          },\n        ],\n      },\n\n      //+------------------------+-------------------------------------------------------------------------------------------------------------------\n      //| Moving with the Mouse  |\n      //+------------------------+\n      {\n        title: \"Moving with the Mouse\",\n        id: \"moving-with-mouse\",\n        keywords: [\"animation\", \"grayscale\", \"mouse\"],\n        image: <MISTImage code=\"wsum(x,y,m.x,m.y)\" resolution=\"250\" />,\n        isAnimated: false,\n        //Text\n        text: (\n          <Container>\n            Moving with the mouse means that you can change what the image looks\n            like just by moving your mouse around on the image. In order to do\n            this, the <b>m.x</b> block, <b>m.y</b> block, or both must be used.\n            <br />\n            The <b>m.x</b> block changes the colors along the x-values. You can\n            try it yourself by opening the preview for <b>m.x</b> and moving\n            your mouse from side to side over it!\n            <br />\n            The <b>m.y</b> block changes the shades from white to black across\n            the y-values. This is because the y-values refer to the vertical\n            values in math!\n            <br />\n            To try it yourself:\n            <br />\n            1. Bring a <b>x</b>, <b>y</b>,<b>m.x</b> and <b>m.y</b> variable\n            into the workspace.\n            <br />\n            2. Then add a <b>wsum</b> in and connect all 4 variables to it. You\n            should have a simple animation that moves when you hover over it!\n          </Container>\n        ),\n\n        //Video\n        video: <Container> This is a video </Container>,\n\n        //Final\n        final: <Container> This is the final image </Container>,\n        isChallenge: true,\n        //Challenges\n        challenges: [\n          {\n            question: (\n              <Container>\n                <p1>\n                  Try making the following image: <br />\n                </p1>\n                <MISTImage code=\"mult(y,sum(x,m.x))\" resolution=\"250\" />\n              </Container>\n            ),\n\n            hint: (\n              <Container>\n                {\" \"}\n                Try using <b>wsum</b> instead of <b>sum</b>\n              </Container>\n            ),\n          },\n          {\n            question: (\n              <Container>\n                <p1>\n                  For a harder image, try this: <br />\n                </p1>\n                <MISTImage\n                  code=\"wsum(sin(x),cos(y),m.y,m.x)\"\n                  resolution=\"250\"\n                />\n              </Container>\n            ),\n            hint: (\n              <Container>\n                {\" \"}\n                Try using <b>wsum</b> instead of <b>sum</b>{\" \"}\n              </Container>\n            ),\n          },\n        ],\n      },\n    ],\n  },\n\n  //+------------------+----------------------------------------------------------------------------------------------------------------------\n  //| The Functions    |\n  //+------------------+\n  {\n    title: \"Functions\",\n    subsections: [\n      {\n        title: \"Multiple Inputs\",\n        id: \"multiple-input\",\n        keywords: [\"inputs\", \"grayscale\", \"image\"],\n        image: <MISTImage code=\"avg(sum(x,x),mult(y,y))\" resolution=\"250\" />,\n        isAnimated: false,\n        //Text\n        text: (\n          <Container>\n            Multiple input functions are functions that must have at least 2\n            inputs and can have up to 20. These functions include <b>sum</b>,{\" \"}\n            <b>wsum</b>, <b>mult</b>, and <b>avg</b>.\n            <br />\n            The <b>sum</b> function adds numbers together. It sums together\n            numbers up to -1 and 1. For example, if you add together 0.5 and\n            0.7, it will stay equal to 1.\n            <br />\n            The <b>wsum</b> (wrap sum) function works similarly to how{\" \"}\n            <b>sum</b> does. However, instead of maxing out at 1 or -1, it wraps\n            back around.\n            <br />\n            The <b>mult</b> block lets you multiply two or more numbers\n            together. Using the example multiplying x and y together, you can\n            see in the top left corner, that it is black because -1 x -1 is 1.\n            Then, if you look at the bottom left corner, it is black\n            <br />\n            The <b>avg</b> function averages together values. For example, the\n            average of -1 and 1 is 0.\n            <br />\n            To use this yourself try:\n            <br />\n            1. Adding an <b>x</b> and <b>y</b> variable to the workspace.\n            <br />\n            2. Then add a <b>sum</b> block and a <b>mult</b> block in.\n            <br />\n            3. Connect the <b>x</b> to the <b>sum</b> block twice, and then the{\" \"}\n            <b>y</b> to the <b>mult</b> twice.\n            <br />\n            4. Then bring in an <b>avg</b> block and connect the <b>sum</b> and{\" \"}\n            <b>mult</b> block to it! Now take a look at your final image!\n          </Container>\n        ),\n\n        //Video\n        video: <Container> This is a video </Container>,\n\n        //Final\n        final: <Container> This is a final image </Container>,\n        isChallenge: true,\n        //Challenges\n        challenges: [\n          {\n            question: (\n              <Container>\n                <p1>\n                  Try making the following image: <br />\n                </p1>\n                <MISTImage code=\"sum(x,x,y)\" resolution=\"250\" />\n              </Container>\n            ),\n            hint: (\n              <Container> What variable changes thing horizontally? </Container>\n            ),\n          },\n          {\n            question: (\n              <Container>\n                <p1>\n                  Try making the following image: <br />\n                </p1>\n                <MISTImage code=\"avg(mult(x,x)y)\" resolution=\"250\" />\n              </Container>\n            ),\n            hint: (\n              <Container>\n                {\" \"}\n                How does <b>avg</b> change images?{\" \"}\n              </Container>\n            ),\n          },\n        ],\n      },\n\n      //+------------------+----------------------------------------------------------------------------------------------------------------------\n      //| Fixed Inputs     |\n      //+------------------+\n      {\n        title: \"Fixed Inputs\",\n        id: \"fixed-input\",\n        keywords: [\"inputs\", \"grayscale\", \"image\"],\n        image: <MISTImage code=\"mistif(x,x,y)\" resolution=\"250\" />,\n        isAnimated: false,\n        //Text\n        text: (\n          <Container>\n            Fixed input functions mean that the number of inputs is unchanging.\n            This includes blocks for <b>sqr</b>, <b>neg</b>, <b>sin</b>,{\" \"}\n            <b>cos</b>, <b>abs</b>, <b>sign</b>, <b>if</b>.\n            <br />\n            <b>Sqr</b> stands for squaring a number or variable. This means that\n            multiplying a variable like x by itself twice is the same as\n            squaring it once.\n            <br />\n            <b>Neg</b> means negative, this changes the input from positive to\n            negative, or if the input was already negative, it would change it\n            to a positive output.\n            <br />\n            <b>Sin</b> and <b>cos</b> stand for sine and cosine, which are\n            trigonometric functions. To see a difference, drag an <b>x</b> and{\" \"}\n            <b>y</b> variable into the workspace. Next, add a <b>sin</b> and{\" \"}\n            <b>cos</b> block to connect to each. Here, you can see how they\n            differ.\n            <br />\n            <b>Abs</b> is absolute value. This turns anything that is negative\n            or positive into its positive counterpart. For example, the absolute\n            value of -1 is one, whereas the absolute value of 1 is also 1.\n            <br />\n            <b>Sign</b> is used to round values. Every value below 0 gets\n            rounded to -1 and every value equal to or greater than 0 gets\n            rounded to one. This also means that there will be no gray areas in\n            the image you make!\n            <br />\n            <b>If</b> blocks work by taking 3 inputs. To see for yourself:\n            <br />\n            1. Drag a <b>x</b> and <b>y</b> variable into the workspace along\n            with an <b>if</b> block.\n            <br />\n            2. Connect the <b>x</b> to the first two nodes of the <b>if</b>{\" \"}\n            block.\n            <br />\n            3. Then, connect the <b>y</b> variable to the third node of the{\" \"}\n            <b>if</b> block. In this example , the test case, which is the first\n            input, is <b>x</b>. So while the input is less than 0, the returned\n            value is negative, which means that it calls <b>y</b>. When it\n            reaches 0 or greater, it returns positive, which in this case is x.\n            This is why the image looks \"split\" in this case.\n          </Container>\n        ),\n\n        //Video\n        video: <Container> This is a video </Container>,\n\n        //Final\n        final: <Container> This is the final image </Container>,\n        isChallenge: true,\n        //Challenges\n        challenges: [\n          {\n            question: (\n              <Container>\n                <p1>\n                  Try making the following image: <br />\n                </p1>\n                <MISTImage code=\"mistif(y,y,x)\" resolution=\"250\" />\n              </Container>\n            ),\n\n            hint: (\n              <Container>\n                {\" \"}\n                How do you change images from vertical to horizonally?{\" \"}\n              </Container>\n            ),\n          },\n          {\n            question: (\n              <Container>\n                <p1>\n                  Try making the following image: <br />\n                </p1>\n                <MISTImage code=\"cos(sin(x))\" resolution=\"250\" />\n              </Container>\n            ),\n            hint: (\n              <Container>\n                {\" \"}\n                What happens when you combine <b>sin</b> and <b>cos</b>?{\" \"}\n              </Container>\n            ),\n          },\n        ],\n      },\n\n      //+------------------+----------------------------------------------------------------------------------------------------------------------\n      //| Adding Color     |\n      //+------------------+\n      {\n        title: \"Adding Color\",\n        id: \"adding-color\",\n        keywords: [\"graph\", \"color\", \"image\"],\n        image: <MISTImage code=\"rgb(mult(y,y),x,square(x))\" resolution=\"250\" />,\n        isAnimated: false,\n        //Text\n        text: (\n          <Container>\n            The <b>RGB</b> function adds color! <b>RGB</b> is defined by three\n            components: red, green, and blue. These components are the primary\n            colors in a pixel on your screen that can be mixed by varying\n            degrees so that other colors can be made. It helps to think about\n            RGB in terms of mixing light rather than mixing paint colors in that\n            the more you add, the closer you get to white light.\n            <br />\n            To the right is an example of solid red, represented by a 1 in the\n            red component's position and -1 in the green and blue positions.\n            Meaning that the amount of red in the light mixture is at its\n            highest and the amounts of green and blue are at their lowest.\n            <br />\n            Together, these all change the color. If the <b>RGB</b> function is\n            given 1, 1 and 1, it will interpret these numbers as pure white\n            since in our [-1,1] world these are our highest values. Given -1,-1\n            and -1, <b>RGB</b> would show pitch black. Within the limits of our\n            world, adding more of any of the three components will change the\n            'amount' of that color in the mixture.\n            <br />\n            To make your own colorful image, try this!\n            <br />\n            1. Start by adding an <b>x</b>, <b>x</b>, and <b>y</b> to your\n            workspace.\n            <br />\n            2. Drag in a <b>mult</b> block and connect y to it twice.\n            <br />\n            3. Add a <b>sin</b> and connect the <b>x</b> to it.\n            <br />\n            4. Finally, bring in a <b>RGB</b> block. Connect the <b>mult</b>{\" \"}\n            block to the red, the x to the green, and sign to the blue. Check\n            out your colorful image!\n          </Container>\n        ),\n\n        //Video\n        video: <Container> This is a video </Container>,\n\n        //Final\n        final: <Container> This is the final image </Container>,\n        isChallenge: true,\n        //Challenges\n        challenges: [\n          {\n            question: (\n              <Container>\n                <p1>\n                  Try making the following image: <br />\n                </p1>\n                <MISTImage code=\"rgb(x,x,y)\" resolution=\"250\" />\n              </Container>\n            ),\n            hint: (\n              <Container>\n                {\" \"}\n                Try to think of what variables make the RGB values change!{\" \"}\n              </Container>\n            ),\n          },\n          {\n            question: (\n              <Container>\n                <p1>\n                  For a harder challenge, try making this image: <br />{\" \"}\n                </p1>\n                <MISTImage\n                  code=\"rgb(cos(y),sum(cos(y),x),x)\"\n                  resolution=\"250\"\n                />\n              </Container>\n            ),\n            hint: (\n              <Container>\n                {\" \"}\n                How does <b>cos</b> change how a function looks?{\" \"}\n              </Container>\n            ),\n          },\n        ],\n      },\n    ],\n  },\n\n  //+------------------+----------------------------------------------------------------------------------------------------------------------\n  //| The Shapes       |\n  //+------------------+\n  {\n    title: \"Shapes\",\n    subsections: [\n      {\n        title: \"Circle\",\n        id: \"circle\",\n        keywords: [\"shape\", \"grayscale\", \"image\"],\n        image: (\n          <MISTImage code=\"sign(wsum(square(x),square(y)))\" resolution=\"250\" />\n        ),\n        isAnimated: false,\n        //Text\n        text: (\n          <Container>\n            Have you ever wanted to try making shapes? Here is an example of a\n            circle!\n            <br /><br />\n            1. Place an <b>x</b> and a <b>y</b> in the workspace.\n            <br /><br />\n            <img src={Circle} alt=\"Circle Step 1\" style={{height:\"75%\", width:\"75%\" }} />\n            <br /><br />\n            2. <b>Square</b> each of them! We square them because x<sup>2</sup>{\" \"}\n            + y<sup>2</sup> is the equation of a circle.\n            <br /><br />\n            <img src={Circle1} alt=\"Circle Step 2\" style={{height:\"75%\", width:\"75%\" }} />\n            <br /><br />\n            3. Add <b>wsum</b>. And make sure it has a W!\n            <br /><br />\n            <img src={Circle2} alt=\"Circle Step 3\" style={{height:\"75%\", width:\"75%\" }} />\n            <br /><br />\n            4. Connect it to a <b>sign</b> function! This gets rid of all of the\n            gray areas and makes it purely black and white.\n            <br /><br />\n            <img src={Circle3} alt=\"Circle Step 4\" style={{height:\"75%\", width:\"75%\" }} />\n          </Container>\n        ),\n\n        //Video\n        video: <Container> <iframe width=\"560\" height=\"315\" src=\"https://www.youtube.com/embed/YQwvc7hdggE\" frameborder=\"0\"\n         allow=\"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen></iframe> </Container>,\n\n        //Final\n        final: <Container> This is the final image: <br />\n                      <img src={Circle3} alt=\"Circle Final\" style={{height:\"75%\", width:\"75%\" }} />\n               </Container>,\n        isChallenge: true,\n        //Challenges\n        challenges: [\n          {\n            question: (\n              <Container>\n                <p1>\n                  Try making the following image: <br />\n                </p1>\n                <MISTImage\n                  code=\"neg(sign(wsum(square(x),square(y))))\"\n                  resolution=\"250\"\n                />\n              </Container>\n            ),\n            hint: <Container> What block inverses images? </Container>,\n          },\n\n          {\n            question: (\n              <Container>\n                <p1>\n                  Try making the following image: <br />\n                </p1>\n                <MISTImage\n                  code=\"wsum(sum(mult(x,x),mult(y,y),t.s),t.s)\"\n                  resolution=\"250\"\n                />\n              </Container>\n            ),\n            hint: <Container> How does adding time work? </Container>,\n          },\n        ],\n      },\n\n      //+------------------+----------------------------------------------------------------------------------------------------------------------\n      //| Triangle         |\n      //+------------------+\n      {\n        title: \"Triangle\",\n        id: \"triangle\",\n        keywords: [\"shape\", \"grayscale\", \"image\"],\n        image: <MISTImage code=\"sign(sum(x,y))\" resolution=\"250\" />,\n        isAnimated: false,\n        //Text\n        text: (\n          <Container>\n            Making a basic triangle is pretty straightforward!\n            <br />\n            1. Drag in a <b>x</b> and a <b>y</b> in the workspace.\n            <br />\n            2. Add a <b>sum</b> block. You can also add a wsum block to see how\n            they look different. However, in this tutorial, we will just be\n            focusing on sum.\n            <br />\n            3. Next, place in a <b>sign</b> block. Now if you click on the\n            preview button, you will see that you have a triangle!\n            <br />\n          </Container>\n        ),\n\n        //Video\n        video: <Container> This is a video </Container>,\n\n        //Final\n        final: <Container> This is the final image </Container>,\n        isChallenge: true,\n        //Challenges\n        challenges: [\n          {\n            question: (\n              <Container>\n                <p1>\n                  Try making the following image: <br />\n                </p1>\n                <MISTImage code=\"sign(sum(x,negate(y)))\" resolution=\"250\" />\n              </Container>\n            ),\n            hint: <Container> What inverts colors? </Container>,\n          },\n          {\n            question: (\n              <Container>\n                <p1>\n                  Try making the following image: <br />\n                </p1>\n                <MISTImage code=\"wsum(x,y,t.s)\" resolution=\"250\" />\n              </Container>\n            ),\n            hint: <Container> How do you get it to move? </Container>,\n          },\n        ],\n      },\n\n      //+------------------+----------------------------------------------------------------------------------------------------------------------\n      //| Rhombus          |\n      //+------------------+\n      {\n        title: \"Rhombus\",\n        id: \"rhombus\",\n        keywords: [\"shape\", \"grayscale\", \"image\"],\n        image: (\n          <MISTImage\n            code=\"sign(sum(mult(2, x, mistif(x, -1, 1)), mult(2, y, mistif(y, -1, 1)), 2))\"\n            resolution=\"250\"\n          />\n        ),\n        isAnimated: false,\n        //Text\n        text: (\n          <Container>\n            For a rhombus, we’re going to add <b>x</b> and <b>y</b> blocks.\n            <br />\n            1. First, add the variable <b>x</b> and values <b>1</b> and{\" \"}\n            <b>-1</b> to the workspace.\n            <br />\n            2.Then, bring in an <b>if</b> statement.\n            <br />\n            3. When connecting to the <b>if</b> statement, make sure it goes in\n            the correct order! This is very important. Connect the <b>x</b> to\n            the first node of the if statement.\n            <br />\n            4. Then, connect <b>-1</b> to the second node. This means that if x\n            is a positive number or 0, it will return this -1.\n            <br />\n            5. After that, connect <b>1</b> to the third node. If the input is\n            less than 0, it will return 1. This is why when you click the\n            preview for if, the right side is white and the left side is black.\n            You can see what it should look below!\n            <br />\n            6. Next, add <b>x</b> and a <b>value</b> block to the workspace. Set\n            the value of this block equal to <b>2</b>.\n            <br />\n            7. Bring in a <b>mult</b> block and connect the <b>x</b>, the{\" \"}\n            <b>2</b>, and the <b>if</b> block to it. If you look at the preview\n            now, you can see how it has changed!\n            <br />\n            8. Now repeat steps 1-7, but this time using <b>y</b> instead of{\" \"}\n            <b>x</b>. This will change the pattern from a vertical split to a\n            horizontal one. We'll write the steps below just in case (or jump to\n            step 12).\n            <br />\n            9. Connect a <b>y</b>, <b>-1</b>, and <b>1</b> to an <b>if</b>{\" \"}\n            block, in that order, just like in step 3 to 5. It should look like\n            this.\n            <br />\n            10. Then add another <b>y</b>, <b>2</b>, and <b>mult</b> block.\n            <br />\n            11. Connect the <b>y</b>, <b>2</b> and previous <b>if</b> block to\n            the <b>mult</b> block.\n            <br />\n            12. After this is completed, let’s add a <b>sum</b> block. Connect\n            this to the <b>mult</b> blocks we used with <b>x</b>, and with{\" \"}\n            <b>y</b> to it.\n            <br />\n            13. We’re also going to add another value block and set it to{\" \"}\n            <b>2</b>. Then, connect it to the sum block. We should now have a\n            diamond shaped rhombus outline!\n            <br />\n            14. To make this image more clear, we’re going to add a <b>\n              sign\n            </b>{\" \"}\n            block. Connect <b>sum</b> to <b>sign</b> and click the preview; you\n            should see a rhombus!\n          </Container>\n        ),\n\n        //Video\n        video: <Container> This is a video </Container>,\n\n        //Final\n        final: <Container> This is the final image </Container>,\n        isChallenge: true,\n        //Challenges\n        challenges: [\n          {\n            question: (\n              <Container>\n                <p1>\n                  {\" \"}\n                  Try making a rhombus using a different equation: <br />\n                </p1>\n                <MISTImage code=\"sign(wsum(abs(y),abs(x)))\" resolution=\"250\" />\n              </Container>\n            ),\n            hint: <Container> This is a hint 1 </Container>,\n          },\n          {\n            question: (\n              <Container>\n                <p1>\n                  {\" \"}\n                  Try making a rhombus using a different equation: <br />\n                </p1>\n                <MISTImage\n                  code=\"neg(sign(wsum(abs(y),abs(x),0.5)))\"\n                  resolution=\"250\"\n                />\n              </Container>\n            ),\n            hint: (\n              <Container>\n                {\" \"}\n                How do you invert the color and change shape size? <br /> Click{\" \"}\n                <Link to=\"#resizing\">here </Link> for the resizing tutorial!\n              </Container>\n            ),\n          },\n        ],\n      },\n    ],\n  },\n\n  //+------------------+----------------------------------------------------------------------------------------------------------------------\n  //| The Customize    |\n  //+------------------+\n  {\n    title: \"Customize\",\n    subsections: [\n      /* Flipping */\n      {\n        title: \"Flipping\",\n        id: \"flipping\",\n        keywords: [\"shape\", \"grayscale\", \"image\"],\n        image: <MISTImage code=\"sign(neg(sum(x,y)))\" resolution=\"250\" />,\n        isAnimated: false,\n        //Text\n        text: (\n          <Container>\n            Flipping an image means that you create the impression of flipping\n            an image when you invert the colors! You can flip it horizontally or\n            vertically (on the x or the y axis). Here is an example with a\n            simple triangle.\n            <br />\n            1. Start by making a triangle. Click{\" \"}\n            <Link to=\"#triangle\">here </Link> for the triangle tutorial!\n            <br />\n            To flip horizontally: <br />\n            3. Add a <b> neg </b> function to the <b>x </b> value\n            <br />\n            To flip vertically: <br />\n            4. Add a <b> neg </b> function to the <b>y </b> value\n          </Container>\n        ),\n\n        //Video\n        video: <Container> This is a video </Container>,\n\n        //Final\n        final: <Container> This is the final image </Container>,\n        isChallenge: true,\n        //Challenges\n        challenges: [\n          {\n            question: (\n              <Container>\n                <p1>\n                  {\" \"}\n                  Try making a rhombus using a different equation: <br />\n                </p1>\n                <MISTImage code=\"sum(sin(x),sin(y),-0.5)\" resolution=\"250\" />\n              </Container>\n            ),\n            hint: (\n              <Container>\n                {\" \"}\n                Try adding <b>sin</b> with <b>x</b> or <b>y</b> and then how do\n                you change the size of that?{\" \"}\n              </Container>\n            ),\n          },\n        ],\n      },\n\n      //+------------------+----------------------------------------------------------------------------------------------------------------------\n      //| Resizing         |\n      //+------------------+\n      {\n        title: \"Resizing\",\n        id: \"resizing\",\n        keywords: [\"size\", \"shape\", \"grayscale\"],\n        image: <MISTImage code=\"sign(sum(x,y,-0.5))\" resolution=\"250\" />,\n        isAnimated: false,\n        //Text\n        text: (\n          <Container>\n            Resizing can be useful when trying to get an image to look a certain\n            way. The easiest way to alter the size of an image inside the canvas\n            is to include a constant. Let's go through an example of that!\n            <br />\n            1. Start by making a triangle. Click{\" \"}\n            <Link to=\"#triangle\">here </Link> for the triangle tutorial!\n            <br />\n            2. Add a constant and set it equal to <b>-0.5</b>.\n            <br />\n            3. Connect this to the <b>sum</b> block.\n            <br />\n            4. Bring a <b>sign</b> block into the workspace.\n            <br />\n            5. Connect the <b>sum</b> block to it. See how the triangle got\n            smaller!\n          </Container>\n        ),\n\n        //Video\n        video: <Container> This is a video </Container>,\n\n        //Final\n        final: <Container> This is the final image </Container>,\n        isChallenge: true,\n        //Challenges\n        challenges: [\n          {\n            question: (\n              <Container>\n                <p1>\n                  Try making the following image: <br />\n                </p1>\n                <MISTImage\n                  code=\"sign(wsum(square(x),square(y),0.5))\"\n                  resolution=\"250\"\n                />\n              </Container>\n            ),\n            hint: (\n              <Container>\n                {\" \"}\n                Does making the constant bigger than 0 shrink the circle?{\" \"}\n              </Container>\n            ),\n          },\n        ],\n      },\n\n      //+------------------+----------------------------------------------------------------------------------------------------------------------\n      //| Moving around    |\n      //+------------------+\n      {\n        title: \"Moving around\",\n        id: \"moving-around\",\n        keywords: [\"shape\", \"grayscale\", \"image\"],\n        image: (\n          <MISTImage\n            code=\"wsum(square(sum(x,0.5)),square(y))\"\n            resolution=\"250\"\n          />\n        ),\n        isAnimated: false,\n        //Text\n        text: (\n          <Container>\n            You are familiar with the following circle:In this tutorial, you\n            will learn how to move this image along the x and y axis (vertically\n            and horizontally).\n            <br />\n            1. To move the circle horizontally, we have to add or subtract some\n            value from the <b>x</b> value. In this case we are adding <b>0.5</b>\n            .\n            <br />\n            2. When finishing this up, you get a circle that is slightly to the\n            left. Now try moving it to the right!\n            <br />\n            3. Similarly to the horizontal example, to move the circle\n            vertically, we have to add or subtract some value from the <b>y</b>y\n            value. In this case we are adding <b>0.5</b> to <b>y</b>.\n            <br />\n            4. When finishing this up, you get a circle that is slightly up. Now\n            try moving it down!\n          </Container>\n        ),\n\n        //Video\n        video: <Container> This is a video </Container>,\n\n        //Final\n        final: <Container> This is the final image </Container>,\n        isChallenge: true,\n        //Challenges\n        challenges: [\n          {\n            question: (\n              <Container>\n                <p1>\n                  Try making the following image: <br />\n                </p1>\n                <MISTImage\n                  code=\"sum(sign(sum(x,0.5)),sign(sum(y,0.5)))\"\n                  resolution=\"250\"\n                />\n              </Container>\n            ),\n            hint: (\n              <Container>\n                {\" \"}\n                Try making the <b>y</b> shape and <b>x</b> shape and then\n                combing them.{\" \"}\n              </Container>\n            ),\n          },\n        ],\n      },\n\n      //+------------------+----------------------------------------------------------------------------------------------------------------------\n      //| Assemble         |\n      //+------------------+\n      {\n        title: \"Assemble\",\n        id: \"assemble\",\n        keywords: [\"graph\", \"grayscale\", \"axis\"],\n        image: (\n          <MISTImage\n            code=\"mistif(sign(wsum(square(x),square(y))),y,sign(sum(x,y)))\"\n            resolution=\"250\"\n          />\n        ),\n        isAnimated: false,\n        //Text\n        text: (\n          <Container>\n            You might have created some cool pictures by now. In this tutorial\n            you will learn how to put them together into one piece. To do so, we\n            need to use the if function. Let’s say you have the following 3\n            images:\n            <br />\n            And you want to make it into the following:\n            <br />\n            It uses the circle outline, and uses the second picture as the\n            inside of the circle and the third picture as the outside of the\n            circle. You just need to connect them together with an if function:\n            <br />\n            Remember what if does? It takes 3 inputs in -- 3 images. It uses the\n            second image in all the positive parts of the first image, and the\n            third imagery all the negative parts of the image.\n            <br />\n            In the above example, the second image (y) is being used at the\n            positive parts (black parts) of the first image (the circle).\n            Whereas the third image (the triangle) is being used at the negative\n            parts (white parts) of the first image (the circle).\n            <br />\n            So how would it look like if the order was the following with the\n            following images:\n            <br />\n            (These are the same images as in the previous one except the circle\n            is blended.\n            <br />\n            It looks the following:\n            <br />\n            This is because sign changes all negative parts into white, and\n            positive parts into black. By adding a sign function on the first\n            image input, you will have an easier time seeing through the\n            different parts of the image and the exact dividers.\n            <br />\n            You can also think in quadrants, like in math with graphs and\n            coordinates. For example you can use four different images to make\n            the following:\n            <br />\n            It makes up of the following four images:\n            <br />\n            1. Make each of these shapes:\n            <br />\n            2. Then connect the upper 2 together with an <b>if</b> function, and\n            the bottom 2 together with an <b>if</b> function, while using{\" \"}\n            <b>y</b> as the first image in both cases. You can see that the\n            upper image is made up of the upper two images, and the bottom one\n            is made up of the bottom two images. They are also being divided up\n            horizontally in the middle. This is how it would look like:\n            <br />\n            3. Now, we can connect these two images together based on the{\" \"}\n            <b>x</b> image. Since the <b>x</b> function divides the image up\n            vertically in the middle, it uses the first image’s right part, and\n            the second image’s left part.\n          </Container>\n        ),\n\n        //Video\n        video: <Container> This is a video </Container>,\n\n        //Final\n        final: <Container> This is the final image </Container>,\n        isChallenge: true,\n        //Challenges  \n        challenges: [\n          {\n            question: (\n              <Container>\n                {\" \"}\n                <p1>\n                  Try making the following image: <br />\n                </p1>\n                <MISTImage\n                  code=\"mistif(x,mistif(y,cos(sin(x)),sign(sum(x,y))),mistif(y,wsum(square(x),square(y)),y))\"\n                  resolution=\"250\"\n                />{\" \"}\n              </Container>\n            ),\n\n            hint: (\n              <Container>\n                {\" \"}\n                Try making each quadrant seperately first!{\" \"}\n              </Container>\n            ),\n          },\n        ],\n      },\n    ],\n  },\n\n  //+---------------------------+-------------------------------------------------------------------------------------------------------------\n  //| The Interesting Images    |\n  //+---------------------------+\n  {\n    title: \"Interesting Images\",\n    //+------------------+----------------------------------------------------------------------------------------------------------------------\n    //| Colorful Image   |\n    //+------------------+\n    subsections: [\n      {\n        title: \"Colorful Image\",\n        id: \"colorful-image\",\n        keywords: [\"color\", \"animation\", \"interesting\"],\n        image: (\n          <MISTImage\n            code=\"rgb(sin(sin(cos(x))),mult(sin(sin(cos(x))),y),wsum(y,t.s))\"\n            resolution=\"250\"\n          />\n        ),\n        isAnimated: false,\n        //Text\n        text: (\n          <Container>\n            Here is an example of a colorful image using many of the skills you\n            just learned!\n            <br />\n            1. To start, add an <b>x</b>, <b>y</b>, and <b>t.s</b> variable to\n            the workspace.\n            <br />\n            2. After this, bring in a <b>sin</b> and <b>cos</b> block. Connect\n            the <b>x</b> to <b>cos</b> first then <b>sin</b>. If we click on the\n            previews for <b>sin</b> and <b>cos</b>, we can see how the\n            differences in how they look!\n            <br />\n            3. Now, let’s add another <b>sin</b> block and connect the{\" \"}\n            <b>sin</b> from the previous step to it.\n            <br />\n            4. Next, we’re going to drag in a <b>mult</b> block. Let’s connect\n            the <b>sin</b> block and the <b>y</b> variable to it!\n            <br />\n            5. Add a <b>wsum</b> block. We’re going to connect <b>t.s</b> and{\" \"}\n            <b>y</b> to this.\n            <br />\n            6. Finally, connect this to an <b>rgb</b> block. We’ll start at the\n            top, with <b>sin</b> being red, the <b>mult</b> block going to\n            green, and <b>wsum</b> connecting to blue. Now look at this colorful\n            animation you just made!\n          </Container>\n        ),\n\n        //Video\n        video: <Container> This is a video </Container>,\n\n        //Final\n        final: <Container> This is the final image </Container>,\n        isChallenge: true,\n        //Challenges\n        challenges: [\n          {\n            question: (\n              <Container>\n                <p1>\n                  Try making the following image: <br />\n                </p1>\n                <MISTImage code=\"rgb(sin(x),cos(y),t.s)\" resolution=\"250\" />\n              </Container>\n            ),\n            hint: (\n              <Container>\n                {\" \"}\n                What does <b>sin</b> and <b>cos</b> look like?{\" \"}\n              </Container>\n            ),\n          },\n          {\n            question: (\n              <Container>\n                {\" \"}\n                <p1>\n                  Try making the following image: <br />\n                </p1>\n                <MISTImage\n                  code=\"rgb(cos(sin(sin(x))),sum(cos(sin(sin(x))),y),y)\"\n                  resolution=\"250\"\n                />{\" \"}\n              </Container>\n            ),\n            hint: (\n              <Container>\n                {\" \"}\n                What happens when you combine multiple <b>sin</b> and <b>cos</b>{\" \"}\n                blocks?{\" \"}\n              </Container>\n            ),\n          },\n        ],\n      },\n\n      //+------------------+----------------------------------------------------------------------------------------------------------------------\n      //| Moving Image     |\n      //+------------------+\n      {\n        title: \"Moving Image\",\n        id: \"moving-image\",\n        keywords: [\"animation\", \"grayscale\", \"interesting\"],\n        image: (\n          <MISTImage\n            code=\"sin(wsum(neg(square(x)),neg(y),mult(t.s,m.y),m.x,mult(x,y)))\"\n            resolution=\"250\"\n          />\n        ),\n        isAnimated: false,\n        //Text\n        text: (\n          <Container>\n            Here is an example of an interesting and slightly more challenging\n            image. It incorporates many aspects from the previous tutorials. To\n            begin:\n            <br />\n            1. Start by adding an <b>x</b> and a <b>y</b> variable.\n            <br />\n            2. Next, add a <b>sqr</b>, <b>mult</b>, and <b>neg</b>. Connect the\n            <b>x</b> to the <b>sqr</b> and <b>mult</b> and the <b>y</b> to the{\" \"}\n            <b>mult</b> and <b>neg</b>.\n            <br />\n            3. Then bring in another <b>neg</b> block and connect the <b>sqr</b>{\" \"}\n            to this.\n            <br />\n            4. Add a <b>t.s</b>, <b>m.x</b>, and <b>m.y</b>.\n            <br />\n            5. Connect the <b>t.s</b> and <b>m.y</b> to the new <b>mult</b>{\" \"}\n            block in the workspace. and it.\n            <br />\n            6. On their own, the images look simple, but now it's time to put it\n            all together. Start by adding a<b>wsum</b>. From there, connect both\n            of the <b>neg</b> blocks and <b>mult</b> blocks. Additionally,\n            connect the <b>m.x</b> block to the <b>wsum</b> block as well.\n            <br />\n            7. Finally, connect the <b>wsum</b> to a new <b>sin</b> block and\n            check out the final image!\n          </Container>\n        ),\n\n        //Video\n        video: <Container> This is a video </Container>,\n\n        //Final\n        final: <Container> This is the final image </Container>,\n        isChallenge: true,\n        //Challenges\n        challenges: [\n          {\n            question: (\n              <Container>\n                <p1>\n                  Try making the following image: <br />\n                </p1>\n                <MISTImage code=\"sin(sin(sum(m.x,x)))\" resolution=\"250\" />\n              </Container>\n            ),\n\n            hint: <Container> How does sin change the image? </Container>,\n          },\n          {\n            question: (\n              <Container>\n                <p1>\n                  For a super challenge, try this image: <br />\n                </p1>\n                <MISTImage\n                  code=\"wsum(cos(mult(x,x,x)),cos(mult(x,x,x)),cos(mult(x,x,x)))\"\n                  resolution=\"250\"\n                />\n              </Container>\n            ),\n            hint: (\n              <Container>\n                {\" \"}\n                What happens when you use <b>cos</b> and <b>wsum</b>?{\" \"}\n              </Container>\n            ),\n          },\n        ],\n      },\n\n      //+------------------+----------------------------------------------------------------------------------------------------------------------\n      /*//| Adding Color     |\n      //+------------------+\n      {\n        title: \"Adding Color\", id: 'adding-color',\n        keywords: [\"graph\", \"grayscale\", \"axis\"],\n        //Text\n        text:\n          <Container>hellobello2</Container>,\n        //Video\n        video:\n          <Container> This is a video </Container>,\n        //Final\n        final:\n          <Container> This is a video </Container>,\n        //Challenges\n        challenges:\n          [{\n            question:\n              <Container> This is a Challenge 1 </Container>,\n            hint:\n              <Container> This is a hint 1 </Container>\n          },\n          {\n            question:\n              <Container> This is a Challenge 2 </Container>,\n            hint:\n              <Container> This is a hint 2</Container>\n          }] \n      }*/\n    ],\n  },\n];\n\nexport default Tutorial;\n","// +-------+------------------------------------------------------------------------\n// | Notes |\n// +-------+\n/*\n * user.js\n * \n * This exports the user page, which is the page users see \n * when viewing other user's profile.\n * Not yet developed:\n    * Albums are the user's public albums. Currently, what is displayed is fake data.\n    * Images are the user's public images. Currently, the images displayed are the same \n    *   images from the gallery \n    * blocking user works\n * \n */\n\nimport React from \"react\";\nimport \"../design/styleSheets/profile.css\";\nimport \"../design/styleSheets/generalStyles.css\";\nimport { Button, Container, Row, Form, Col, Nav, OverlayTrigger, Popover } from \"react-bootstrap\";\nimport { useState } from \"react\";\nimport \"bootstrap/dist/css/bootstrap.css\";\nimport MISTImage from './components/MISTImageGallery'\nimport {\n    AiOutlinePicture,\n    AiOutlineStar,\n} from \"react-icons/ai\";\nimport { GiAchievement } from \"react-icons/gi\";\nimport { GrAchievement } from \"react-icons/gr\";\n\n// full profile\nexport default function User() {\n    return (\n        <div>\n            <Container>\n                <h1> Example User </h1>\n            </Container>\n            <Container style={{ marginTop: \"3vh\", marginBottom: \"3vh\" }}>\n                <FirstPart />\n            </Container>\n\n            <ProfileNav />\n        </div>\n    );\n}\n\n// user information: profile pic, username, name, email, member since, block, report\nfunction FirstPart() {\n    let [blocked, setBlocked] = useState(false);\n\n    let blockPopover = (\n        <Popover id=\"popover-basic\">\n            <Popover.Content>\n                This user and their content will be blocked for you.\n        </Popover.Content>\n        </Popover>\n    );\n\n    function block() {\n        if (!blocked) {\n            setBlocked(true);\n            alert(\"You have blocked this user and will no longer see their content. Visit your account settings to undo this.\")\n        }\n    }\n\n    let reportPopover = (\n        <Popover id=\"popover-basic\">\n            <Popover.Content>\n                Report this user.\n        </Popover.Content>\n        </Popover>\n    );\n\n    return (\n        <Container style={{ width: \"90%\" }}>\n            {/*\n      <Row style={{ justifyContent: \"flex-start\" }}>\n        {\" \"}\n        <BsEnvelope size={28} /> <AiOutlineSetting size={28} />\n        </Row> */ }\n            <Row style={{ justifyContent: \"space-between\" }}>\n                <Container style={{ width: \"30%\", justifyContent: \"center\" }}>\n                    <MISTImage code=\"sin(x)\" resolution=\"300\" />\n                    <OverlayTrigger trigger=\"hover\" placement=\"right\" overlay={blockPopover}>\n                        <Button variant=\"secondary\" onClick={() => block()}>\n                            {blocked ? \"Blocked\" : \"Block\"}\n                        </Button>\n                    </OverlayTrigger> {' '}\n                    <OverlayTrigger trigger=\"hover\" placement=\"right\" overlay={reportPopover}>\n                        <Button href=\"/report\" variant=\"danger\">Report</Button>\n                    </OverlayTrigger>\n                </Container>\n\n                {/** User informations + icon bar*/}\n\n                <Container style={{ width: \"50%\", alignItems: \"center\" }}>\n                    <Form>\n                        <Form.Group as={Row} controlId=\"formPlaintextEmail\">\n                            <Form.Label column sm=\"4\"> Name </Form.Label>\n                            <Col sm=\"7\">\n                                <Form.Control\n                                    plaintext\n                                    readOnly\n                                    defaultValue=\"Shrek\"\n                                />\n                            </Col>\n\n                            <Form.Label column sm=\"4\"> Username </Form.Label>\n                            <Col sm=\"7\">\n                                <Form.Control plaintext readOnly defaultValue=\"@donkey\" />\n                            </Col>\n                            <Form.Label column sm=\"4\">\n                                Member since </Form.Label>\n\n                            <Col sm=\"6\">\n                                <Form.Control plaintext readOnly defaultValue=\"June, 2020\" />\n                            </Col>\n\n                            <Form.Label column sm=\"4\">\n                                Bio </Form.Label>\n\n                            <Col sm=\"7\">\n                                <Form.Control plaintext rows=\"3\" defaultValue=\"First the worst, Shrek the best\" />\n                            </Col>\n                        </Form.Group>\n                    </Form>\n                    <hr />\n                    <IconsBar />\n                    <hr />\n                </Container>\n            </Row>\n        </Container>\n    );\n}\n\n// icons (for images, likes, badges, challenges) underneath user information\nfunction IconsBar() {\n    const icons = [\n        { iconName: <AiOutlinePicture size={28} />, num: 8, category: \"images\" },\n        { iconName: <AiOutlineStar size={28} />, num: 2, category: \"likes\" },\n        { iconName: <GiAchievement size={28} />, num: 4, category: \"badges\" },\n        { iconName: <GrAchievement size={28} />, num: 6, category: \"challenges\" },\n    ];\n    return (\n        <Row>\n            {icons.map((iconBlock, idx) => (\n                <Col key={idx}>\n                    <Container style={{ textAlign: \"center\" }}>\n                        {iconBlock.iconName}\n                    </Container>\n                    <Container style={{ textAlign: \"center\" }}>\n                        {\" \"}\n                        {iconBlock.num} <br />\n                        {iconBlock.category}{\" \"}\n                    </Container>\n                </Col>\n            ))}\n        </Row>\n    );\n}\n\n// images, albums\nfunction ProfileNav() {\n    return (\n        <Container>\n            <Nav fill variant=\"tabs\" defaultActiveKey=\"link-1\">\n                <Nav.Item>\n                    <Nav.Link eventKey=\"link-1\" style={{ color: \"black\" }}>\n                        Images\n          </Nav.Link>\n                </Nav.Item>\n                <Nav.Item>\n                    <Nav.Link eventKey=\"link-2\" style={{ color: \"black\" }}>\n                        Albums\n          </Nav.Link>\n                </Nav.Item>\n                {/*  Not implemented in back-end \n        <Nav.Item>\n          <Nav.Link eventKey=\"link-4\" style={{ color: \"black\" }}>\n            Badges\n          </Nav.Link>\n        </Nav.Item>\n        <Nav.Item>\n          <Nav.Link eventKey=\"link-3\" style={{ color: \"black\" }}>\n            Challenges\n          </Nav.Link>\n        </Nav.Item>\n        <Nav.Item>\n          <Nav.Link eventKey=\"link-5\" style={{ color: \"black\" }}>\n            Saved\n          </Nav.Link>\n  </Nav.Item> */}\n            </Nav>\n        </Container>\n    );\n}","// +-------+------------------------------------------------------------------------\n// | Notes |\n// +-------+\n/*\n * profile.js\n * \n * This exports the profile page, which is the user's personal profile page.\n * When a user views another user's profile page, they see user.js not profile.js.\n * Not yet developed:\n    * Albums are the user's own albums. Currently, what is displayed is fake data.\n    * Images are the user's own images. Currently, the images displayed are the same \n    *   images from the gallery \n \n *\n * Copyright (c) 2020 Samuel A. Rebelsky and the people who did the work.\n * This work is licenced under a LGLP 3.0 or later .....\n */\n\n// +----------------+-----------------------------------------------------------------------\n// | Design Issues  |\n// +----------------+\n\n/**\n * The page is made up of the following parts:\n *    --First Part\n *        | Profile Image + user information\n *        | IconsBar: # of pictures, likes, badges, challenges\n *    --Profile Nav\n *        | images: calls displayImages.js\n *        | albums: function Albums \n *            + Carousel\n */\n// +-------------------+----------------------------------------------------------------------\n// | IMPORTS           |\n// +-------------------+\nimport React, { useState, useEffect } from \"react\";\nimport DisplayImages from \"./components/displayImages\";\nimport \"./../design/styleSheets/profile.css\";\nimport \"./../design/styleSheets/generalStyles.css\";\nimport { Button, Card, Carousel, Container, Col, Form, Nav, Row, Tab } from \"react-bootstrap\";\nimport \"bootstrap/dist/css/bootstrap.css\";\nimport MISTImage from \"./components/MISTImageGallery\"\n/* icons */\nimport {\n  AiOutlinePicture,\n  AiOutlineStar,\n  AiOutlineSetting,\n} from \"react-icons/ai\";\nimport { GiAchievement } from \"react-icons/gi\";\nimport { GrAchievement } from \"react-icons/gr\";\n\n// +-------------------+----------------------------------------------------------------------\n// | profile.js        |\n// +-------------------+\nexport default function Profile() {\n\n  /**\n   * These are seperate because of how the db is organized\n   * users only store the id's of their images, so finding a user\n   * and retrieving their images are seperate queries in the back-end,\n   * same applies for albums\n   */\n  const [user, setUser] = useState({\n    forename: \"\",\n    surname: \"\",\n    username: \"\",\n    createdAt: \"\",\n    about: \"\",\n    profilepic: \"\"\n  });\n  const [userImages, setUserImages] = useState([]);\n  const [userAlbums, setUserAlbums] = useState([]);\n\n  // grab user's information, images, and albums\n  useEffect(() => {\n    fetch('/api/gallery/recent')\n      .then(req => req.json())\n      .then(cards => { setUserImages(cards) });\n\n    fetch('/api/profile')\n      .then(req => req.json())\n      .then((userInfo) => {\n        setUser(userInfo.user);\n        setUserAlbums(userInfo.userAlbums);\n      });\n  }, [])\n\n  return (\n    <Container fluid style={{ marginTop: \"2vh\", marginBottom: \"0\", paddingBottom: \"7.5rem\" }}>\n      {/* Title */}\n      <Container>\n        <h1> Profile </h1>\n      </Container>\n\n      {/* First Part: Profile Picture + information */}\n      <Container style={{ marginTop: \"3vh\", marginBottom: \"3vh\" }}>\n        <FirstPart name={user.forename + \" \" + user.surname}\n          username={user.username}\n          date={user.createdAt}\n          bio={user.about}\n          code={user.profilepic}\n        />\n      </Container>\n\n      {/* Tabs for images, albums */}\n      <ProfileNav images={userImages} albums={userAlbums} />\n    </Container>\n  );\n}\n\n// user information: profile pic, username, name, email, member since\nfunction FirstPart(props) {\n  return (\n    <Container style={{ width: \"90%\" }}>\n      <Row style={{ justifyContent: \"flex-start\" }}>\n        {\" \"}\n      </Row>\n      <Row style={{ justifyContent: \"space-between\" }}>\n        {/* Displays profile picture + option to change it + settings */}\n        <Container style={{ width: \"25%\", justifyContent: \"center\" }}>\n          <MISTImage code={props.code} resolution=\"275\" />\n          <Nav.Link eventKey=\"link-1\">Change Image</Nav.Link>\n          <Nav.Link href=\"/settings\">\n            <AiOutlineSetting size={28} /> Account Settings\n          </Nav.Link>\n        </Container>\n\n        {/** User informations + icon bar*/}\n        <Container style={{ width: \"50%\", alignItems: \"center\" }}>\n          <Form>\n            <Form.Group as={Row} controlId=\"formPlaintextEmail\">\n              {/* name */}\n              <Form.Label column sm=\"4\">\n                Name\n              </Form.Label>\n              <Col sm=\"7\">\n                <Form.Control\n                  plaintext\n                  readOnly\n                  value={props.name}\n                />\n              </Col>\n              <Col sm=\"1\">\n                <Nav.Link eventKey=\"link-1\">Change</Nav.Link>\n              </Col>\n\n              {/* username */}\n              <Form.Label column sm=\"4\">\n                Username\n              </Form.Label>\n              <Col sm=\"7\">\n                <Form.Control plaintext readOnly value={\"@\" + props.username} />\n              </Col>\n              <Col sm=\"1\">\n                <Nav.Link eventKey=\"link-1\">Change</Nav.Link>\n              </Col>\n\n              {/* member since */}\n              <Form.Label column sm=\"4\">\n                Member since\n              </Form.Label>\n              <Col sm=\"6\">\n                <Form.Control plaintext readOnly value={props.date} />\n              </Col>\n\n              {/* bio */}\n              <Form.Label column sm=\"4\">\n                Bio\n              </Form.Label>\n              <Col sm=\"7\">\n                <Form.Control as=\"textarea\" readOnly rows=\"3\" value={props.bio} />\n              </Col>\n              <Col sm=\"1\">\n                <Nav.Link eventKey=\"link-1\">Change</Nav.Link>\n              </Col>\n            </Form.Group>\n          </Form>\n\n          {/* icons bar */}\n          <hr />\n          <IconsBar />\n          <hr />\n\n        </Container>\n      </Row>\n    </Container>\n  );\n}\n\n{/* # of pictures, likes, badges, challenges and their icons */ }\nfunction IconsBar() {\n  const icons = [\n    { iconName: <AiOutlinePicture size={28} />, num: 8, category: \"images\" },\n    { iconName: <AiOutlineStar size={28} />, num: 2, category: \"likes\" },\n    { iconName: <GiAchievement size={28} />, num: 4, category: \"badges\" },\n    { iconName: <GrAchievement size={28} />, num: 6, category: \"challenges\" },\n  ];\n  return (\n    <Row>\n      {icons.map((iconBlock, idx) => (\n        <Col key={idx}>\n          <Container style={{ textAlign: \"center\" }}>\n            {iconBlock.iconName}\n          </Container>\n          <Container style={{ textAlign: \"center\" }}>\n            {\" \"}\n            {iconBlock.num} <br />\n            {iconBlock.category}{\" \"}\n          </Container>\n        </Col>\n      ))}\n    </Row>\n  );\n}\n\nclass ProfileNav extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      message: <DisplayImages cards={props.images} cardsLoaded={true} />\n    }\n  }\n\n  updateContent = () => {\n    this.setState({ message: \"Updated Content!\" });\n  }\n\n  openImagesView = () => {\n    this.setState({ message: <DisplayImages cards={this.props.images} cardsLoaded={true} /> });\n  }\n\n  openAlbumsView = () => {\n    this.setState({ message: <Albums albums={this.props.albums} message={this.state.message} /> });\n  }\n\n  openedAlbum = () => {\n    this.setState({ message: <AlbumsView albums={this.props.albums} /> });\n  }\n\n  render() {\n    return (\n      <Container>\n        <Nav fill variant=\"tabs\" defaultActiveKey=\"images\">\n          <Nav.Item>\n            <Nav.Link onClick={this.openImagesView} style={{ color: \"black\" }}>\n              Images\n          </Nav.Link>\n          </Nav.Item>\n          <Nav.Item>\n            <Nav.Link onClick={this.openAlbumsView} style={{ color: \"black\" }}>\n              Albums\n          </Nav.Link>\n          </Nav.Item>\n          {/*  Not implemented in back-end \n        <Nav.Item>\n          <Nav.Link eventKey=\"link-4\" style={{ color: \"black\" }}>\n            Badges\n          </Nav.Link>\n        </Nav.Item>\n        <Nav.Item>\n          <Nav.Link eventKey=\"link-3\" style={{ color: \"black\" }}>\n            Challenges\n          </Nav.Link>\n        </Nav.Item>\n        <Nav.Item>\n          <Nav.Link eventKey=\"link-5\" style={{ color: \"black\" }}>\n            Saved\n          </Nav.Link>\n  </Nav.Item> */}\n        </Nav>\n\n        <Container>\n          {this.state.message}\n        </Container>\n\n      </Container>\n    );\n  }\n}\n\nfunction Albums(props) {\n\n  const [mode, setMode] = useState(\"albumsView\");\n  const [images, setImages] = useState(\"\");\n  function openAlbumsView() { setMode(\"albumsView\") };\n  function openAlbum(props) { setMode(\"openedAlbum\"); setImages(props.images) };\n\n  if (mode === \"albumsView\") {\n    return (\n\n      /* default mode*/\n      <Row>\n        {props.albums.map((album) => (\n          <Card\n            style={{ padding: \"1em\", width: \"30%\", margin: \"1em\" }}\n          >\n            <Card.Header>\n              <Card.Title style={{ margin: \"auto\" }}>\n                <p>{props.title}</p>\n              </Card.Title>\n              {/* ICONS */}\n              <Card.Body style={{ justifyContent: \"space-between\" }}>\n                <ControlledCarousel images={album.images} openAlbum={openAlbum}/>\n                <p>{props.description}</p>\n                <p>{props.date}</p>\n              </Card.Body>\n            </Card.Header>\n          </Card>\n        ))}\n      </Row>\n    );\n  } else {\n    return (\n      /* signIn mode*/\n      <OpenedAlbum  images={images} onClick={openAlbumsView}/>\n    );\n  }\n}\n\nfunction AlbumsView(props) {\n  return (\n    <Row>\n      {props.albums.map((album) => (\n        <Album title={album.name} description={album.caption} date={album.createdAt} images={album.images} message={props.message} />\n      ))}\n    </Row>\n  )\n}\n// album component\nfunction Album(props) {\n  return (\n    <Card\n      style={{ padding: \"1em\", width: \"30%\", margin: \"1em\" }}\n    >\n      <Card.Header>\n        <Card.Title style={{ margin: \"auto\" }}>\n          <p>{props.title}</p>\n        </Card.Title>\n        {/* ICONS */}\n        <Card.Body style={{ justifyContent: \"space-between\" }}>\n          <ControlledCarousel images={props.images} message={props.message} />\n          <p>{props.description}</p>\n          <p>{props.date}</p>\n        </Card.Body>\n      </Card.Header>\n    </Card>\n  )\n}\n\n// carousel used for looking through albums\nfunction ControlledCarousel(props) {\n  const [index, setIndex] = useState(0);\n  const handleSelect = (selectedIndex, e) => {\n    setIndex(selectedIndex);\n  };\n\n  return (\n    <Carousel activeIndex={index} onSelect={handleSelect}>\n      {props.images.map((album) => (\n        <Carousel.Item >\n          <Row style={{ justifyContent: \"center\" }}>\n            <Nav.Link onClick={props.openAlbum}>\n              <MISTImage\n                code={album.code}\n                resolution=\"250\"\n              />\n            </Nav.Link>\n          </Row>\n          <Carousel.Caption>\n          </Carousel.Caption>\n        </Carousel.Item>\n      ))}\n    </Carousel>\n  );\n}\n\nfunction OpenedAlbum(props) {\n  return (\n    <Container>\n      <Row>\n        <Button onClick={props.onClick}> Back </Button>\n      </Row>\n    </Container>\n  )\n}","/**\n * MIST is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\n// +-----------------------+----------------------------------------------------------------------\n// | footer.js     |\n// +-----------------------+\n/** \n * This file returns the footer of this website\n *\n * Copyright (c) 2020 Samuel A. Rebelsky and the people who did the work.\n * This work is licenced under a LGLP 3.0 or later .....\n */\n\n// +----------------+-----------------------------------------------------------------------\n// | Imports        |\n// +----------------+\nimport React from \"react\";\nimport \"../../design/styleSheets/generalStyles.css\";\nimport { Container, Nav } from \"react-bootstrap\";\nimport \"bootstrap/dist/css/bootstrap.css\";\n\n/**\n * Creates the footer\n */\n\nfunction Footer() {\n  return (\n    <Container fluid id=\"footer\">\n      {/* copy right */}\n      <p className=\"justify-content-center\">&copy;2020 Glimmer Labs </p>\n      <Nav className=\"justify-content-center\" activeKey=\"/home\">\n        {/* about */}\n        <Nav.Item>\n          <Nav.Link href=\"/about\" id=\"footer-button\">\n            About\n          </Nav.Link>\n        </Nav.Item>\n\n         {/* contact */}\n        <Nav.Item>\n          <Nav.Link href=\"/contact\" id=\"footer-button\">\n            Contact\n          </Nav.Link>\n        </Nav.Item>\n\n         {/* license */}\n        <Nav.Item>\n          <Nav.Link href=\"/license\" id=\"footer-button\">\n            License\n          </Nav.Link>\n        </Nav.Item>\n\n         {/* privacy policy */}\n        <Nav.Item>\n          <Nav.Link href=\"/privacy\" id=\"footer-button\">\n            Privacy Policy\n          </Nav.Link>\n        </Nav.Item>\n      </Nav>\n    </Container>\n  );\n}\n\nexport default Footer;","/**\n * MIST is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n// +-------------+----------------------------------------------------------------------\n// | App.js      |\n// +-------------+\n\n/**\n * This is the App.js\n * This file is in charge of rendering the different pages\n *\n * Copyright (c) 2020 Samuel A. Rebelsky and the people who did the work.\n * This work is licenced under a LGLP 3.0 or later .....\n *\n */\n\n// +----------------+-----------------------------------------------------------------------\n// | Design Issues  |\n// +----------------+\n\n/**\n * This app is a single-page website. It always renders into index.html's <root\n * element the following way:\n * \n * It always displays a navigation bar: \n *      -- the user navigation bar if the user is signed in\n *      -- the base navigation bar if the user is NOT signed in\n * \n * Then, it renders one of the 'pages' page content (eg. home, about, workspace, tutorials, etc.)\n *      -- the page it renders depends on the URL path\n *            if it calls the /about path, then it calls the About imported component\n * \n * It always renders the 'footer' component in the end\n */\n\n// +-------------+----------------------------------------------------------------------\n// | Imports     |\n// +-------------+\n \n /* imports from react libraries */\nimport React, { useContext } from \"react\";\nimport { BrowserRouter, Route, Switch } from \"react-router-dom\";\nimport { Container } from \"react-bootstrap\";\n\n/* imports stylesheet & userContext */\nimport \"./design/styleSheets/generalStyles.css\";\nimport { UserContext } from './pages/components/Contexts/UserContext';\n\n/* Imports the 2 types of navigation bar */\nimport BaseNavigation from \"./pages/components/NavBar/navBarLoggedOut\";\nimport UserNavigation from \"./pages/components/NavBar/navBarLoggedIn\";\n\n/* Imports for the actual page contents */\nimport About from \"./pages/about\";\nimport Challenges from \"./pages/challenges\";\nimport Community from \"./pages/community\";\nimport Contact from \"./pages/contact\";\nimport Development from \"./pages/development\";\nimport Expert from \"./expert/\";\nimport Faq from \"./pages/faq\";\nimport Gallery from \"./pages/Gallery\";\nimport Home from \"./pages/home\";\nimport License from \"./pages/license\";\nimport Privacy from \"./pages/privacy\";\nimport ReportForm from \"./pages/report\";\nimport Settings from \"./pages/settings\";\nimport SignIn from \"./pages/signIn\";\nimport SignUp from \"./pages/signUp\";\nimport Tutorial from \"./pages/tutorial\";\nimport User from \"./pages/user\";\nimport UserProfile from \"./pages/profile\";\n//import WorkSpace from \"./Workspace\";\nimport WorkspaceComponent from './workspace';\n\n/* imports the footer */\nimport Footer from \"./pages/components/footer\";\n\n// +-------------+----------------------------------------------------------------------\n// | App         |\n// +-------------+\n\nfunction App() {\n\n  const data = useContext(UserContext);\n  console.log(data);\n\n  return (\n    /* the page-container styling helps with the footer */\n    <div id=\"page-container\">\n      <BrowserRouter>\n      {/* navigation bar based on the user's logged in state */}\n        {data ? <UserNavigation /> : <BaseNavigation />}\n\n        {/* the container-wrap styling helps with the footer */}\n        <Container fluid id=\"content-wrap\">\n          <Switch>\n            {/* pages */}\n            <Route path=\"/\" component={Home} exact />\n            <Route path=\"/about\" component={About} />\n            <Route path=\"/challenges\" component={Challenges} />\n            <Route path=\"/community\" component={Community} />\n            <Route path=\"/contact\" component={Contact} />\n            <Route path=\"/development\" component={Development} />\n            <Route path=\"/expert\" children={<Expert />} />\n            <Route path=\"/faq\" component={Faq} />\n            <Route path=\"/gallery\" component={Gallery} />\n            <Route path=\"/license\" component={License} />\n            <Route path=\"/privacy\" component={Privacy} />\n            <Route path=\"/profile\" component={UserProfile} />\n            <Route path=\"/report\" children={ReportForm} />\n            <Route path=\"/settings\" component={Settings} />\n            <Route path=\"/signIn\" component={SignIn} />\n            <Route path=\"/signUp\" component={SignUp} />\n            <Route path=\"/tutorial\" component={Tutorial} />\n            <Route path=\"/user\" children={User} />\n            {/* workspace */}\n            <Route path=\"/createWorkspace\" children={<WorkspaceComponent />} />\n            <Route path=\"/expert\" render={(props) => <Expert {...props} />} />\n            \n            {/* overlay modal when opening an image */}\n            <Route path=\"/img/:url\" children={<Gallery />} />           \n          </Switch>\n        </Container>\n\n        {/* footer */}\n        <Footer id=\"footer\" />\n      </BrowserRouter>\n    </div>\n  );\n}\n\n\nexport default App;\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\nimport UserContextProvider from './pages/components/Contexts/UserContext';\n\nReactDOM.render(\n  <UserContextProvider>\n  <App />\n  </UserContextProvider>,\n  document.getElementById('root')\n);","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAABmJLR0QA/wD/AP+gvaeTAAAEKklEQVRIibWWXW8bRRSG353dnXWcuLZrO3GJWommQqKGtnGDlEIpSgsSKv8AxBUfxXZa/sL+hIoktlMJ9RKpN1yV3jQXjVKgRXVahCUuIA0pNHHtxGs7/tjZXQ8XSdzYsZM1Ca+0kuecM/OcGZ89OwK6lKqm6eqAETK5FQIASRDTvoycVtUQ62YdwU5QJP7re5xbMYdChyVZHqIyFSilAADGdDBm1k2TLbAaS3EixhPRU/f2BR6fSI1YIrnu9bjPeTweIgi758k5h6ZpvFgoPrYkRBNfnP65a3Bkcj7ucrs+C/h91ObBbE8BudwaKxQLN5Kx8FVbYFVN04zfuBM80n/R6XR2CWxWpVLF8kpmJpiVL7fWAGkNzviNO0ePDe4bCgBOZw+OHR28tOzXf2j1NYEjk6lvBoL9F2VZtr04lQQMHBIx6JXg7xPhchBsLwVZljH4SvDSlcn56e3zGiHjE6kRp8c9F/D7FDtAj5Ng7PUeHPdLaK25b2dLyFfqTbZsLsfWq6Xz8S+HfwG27dgSyFTAf9gW1OUg+Hi0D0OBndBOCvh9FKZwfWtMACA6/XjMe9g9Yrd6333NASftttIFuN3u0VgydQEAJACwjHrU4/HsKLS20wXgRL/UZHuuWfjxjxqqjAMAirV6u6nwej1Ey+cjAGYlAHAodHiv5rAldw8BlZpjbz+poFBtD2tOWgClylkAIKqaprKsvGqLCsAhN0PXa3Vb0C3JCj2uqmlKMv21NymVbR3zRtbNY920zQQAUFkStQBOEl4XTyqKrWI+EFFFgS7U3pAEYnHO+a7BH4R6EHSLAABZbN6y20nw6dt9TbbvHpRhWh3W5ABA6pIkiGnGGHp7O7dIby/BwCGxrU8iaPKVdd4ZCoDpOsCk34gvI6cZM+xXxx5aLVu7+plpWgMa+Z2oaoiZJlvYLdgwOWrGxsPM5t1wjoavZnBki7uDTWb8qaohJgFATWfznPMTnd7l71OVxu8jHhGfjL78T9fKddycK+0Ke5kkR43pj4DNlikI4pSmaQd23J2Uz2uWKPJkA5yInrqX1woPN0vufxJHoVD8aeqr8GwDvCFrPJdb6+qm2I2y2VVdFPi1rXEDnIiefVQqFpLlcqX9zH2oWq2gVCrenIicmd8BBoB4LPz1SubFjGEYBwY1DAPPlzN3E7FwZLt9R48OZuXLS8/+malUqvuGlssVLD37+24wSz9q9Umths3b4PtX4vOT7j7X54GAT/kv19tsdlUvFYo3klfD19pFdPwqTUeHx0vrhXcWnv51f20tb+3Vz4GN93Q1n+eLi0sPq+X1c4kOUMDmVmLJ1IW6gShVlHC/xzH04WkX8bkdAICnK1XcflK0DJ0tMF1PCYRMxmNn5vZas9szxK1baVpw9J7XYbxlcc5lQX7wIrV4X1XHuvoy/wu/kLPctyVQHAAAAABJRU5ErkJggg==\"","module.exports = \"data:image/png;base64,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\"","module.exports = __webpack_public_path__ + \"static/media/logoFinal.4d8191e1.png\";","/**\n * The basic MIST library.  Available at\n *   http://glimmer.grinnell.edu/js/mist.js\n *   http://glimmer.grinnell.edu/js/ugly.mist.js\n *\n * MIST is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nvar MIST = {};\n\n/**\n * mist-functions.js\n *   Representations of functions, expressions, images, and so on\n *   and so forth.\n */\n\n// +-------+---------------------------------------------------------\n// | Notes |\n// +-------+\n\n/*\n   1. We represent a variety of kinds of \"things\".\n\n   a. Basic expressions (class MIST.Val), which include not only the\n   built-in values, such as numbers, x, y, t.m, and so on and so forth,\n   but also any *named* values (either parameters to functions or values\n   we've taken from other folks).\n\n   b. Compound expressions (class MIST.App), which are the application\n   of an operation (function name) to zero or more expressions.\n\n   c. Functions (class MIST.Fun), which add a list of the operand names.\n\n   2. When we evaluate an expression, we may also have to set up the\n   context in which to evaluate that expression (e.g., by evaluating\n   a variety of name/expression pairs).\n\n   3. All of these objects have a toString and a prettyPrint(indent)\n   method.\n\n   4. When you want to store any of these objects in the database, use\n   `JSON.stringify` on the object.  When you want to restore the object,\n   use `restore(JSON.parse(str))`, where `restore` comes from\n   `mist-utils.js`.  (Unfortunately, JSON.parse does not restore prototypes,\n   so we need to do that by hand.)\n\n   Alternately, use MIST.rebuild on the resulting string, but that\n   approach is deprecated.\n\n   5. Many of the MIST functions rely on a MIST object.  We start each\n   file with instructions to build that object.\n\n   6. I'm still struggling with type checking.  I had originally assumed\n   that RGB functions could only be applied to numeric values.  However,\n   something like \"lambda (a,b) rgb(first(a),b,b) should expect a to be\n   a triplet.  (Of course, I could not allow extracting components of\n   rgb and hsv values, which would restore my assumption.)\n */\n\n// +-------+---------------------------------------------------------\n// | Setup |\n// +-------+\n\nMIST = Object.create(null);\n\n// +----------------------+------------------------------------------\n// | Types of Expressions |\n// +----------------------+\n\nMIST.TYPE = {};\n\nMIST.TYPE.RGB = \"RGB\";\nMIST.TYPE.HSV = \"HSV\";\nMIST.TYPE.NUMBER = \"NUMBER\";\n\n/**\n * Determine the type of an expression, given a series of function\n * and value definitions.\n */\nMIST.expType = function(exp,context) {\n  // Long term: Scan through the expression.\n  // Short term: Look at the top-level operation\n  if (exp instanceof MIST.App) {\n    if ((exp.operation === \"rgb\") || (exp.operation === \"MIST.rgb\")) {\n      return MIST.TYPE.RGB;\n    }\n    else if (exp.operation === \"hsv\") {\n      return MIST.TYPE.HSV;\n    }\n    else {\n      return MIST.TYPE.NUMBER;\n    }\n  } // if it's an application\n\n  // If it's just a value, we should look at the type of the value.\n  // But right now, we assume we'll only have numeric contants and\n  // not HSV or RGB constants.\n  else {\n    return MIST.TYPE.NUMBER;\n  } // A value\n} // MIST.expType\n\n// +-------------------+---------------------------------------------\n// | General Utilities |\n// +-------------------+\n\n/**\n * Determine if an array contains a value.\n */\nfunction contains(array, val)\n{\n  for (var i = 0; i < array.length; i++) {\n    if (array[i] === val) {\n      return true;\n    } // if\n  } // for\n  return false;\n} // contains\n\n/**\n * I like varargs procedures, but sometimes I want to pass in an\n * array instead.  So, call getArgs with the arguments 'array' and\n * the starting point for extracting the array.\n * Returns the array from index=start.\n */\nfunction getArgs(args, start)\n{\n  if (!start) { start = 0; }\n  var arglen = args.length - start;\n  //console.log(\"arglen: \"+arglen);\n  if ((arglen === 1) && (args[start] instanceof Array)) {\n    return args[start];\n  } // if there's only one argument, and it's an array.\n  else {\n    var result = Array(arglen);\n    for (var i = start; i < args.length; i++)\n      result[i-start] = args[i];\n    return result;\n  } // getArgs\n} // getArgs\n\n/**\n * Create a string of n copies of ch\n */\nfunction ncopies(n, ch)\n{\n  return Array(n+1).join(ch);\n} // ncopies\n\n/**\n * Create a string of n spaces.\n */\nfunction nspaces(n)\n{\n  return ncopies(n, \" \");\n} // nspaces\n\n// +----------------+------------------------------------------------\n// | MIST Utilities |\n// +----------------+\n\n/**\n * Determine the depth of an expression.  Assumes that the expression has\n * no loops.\n */\nMIST.depth = function(exp)\n{\n  // If it's an application\n  if (exp instanceof MIST.App) {\n    // Find the deepest child\n    var deepest = 0;\n    for (var i = 0; i < exp.operands.length; i++) {\n      deepest = Math.max(deepest, MIST.depth(exp.operands[i]));\n    } // for\n    // And add 1\n    return 1 + deepest;\n  } // if it's an application\n\n  // If it's not an application\n  else {\n    // Then the depth is 1\n    return 1;\n  } // if it's anything but an application\n} // MIST.depth\n\n/**\n * Determine if there is a loop in an expression.  (There should never\n * be, but ...)\n */\nMIST.hasLoop = function(val, seen)\n{\n  if (!seen) { seen = []; }\n  if (contains(seen,val)) {\n    return true;\n  }\n  if (val instanceof MIST.App) {\n    seen.push(val);\n    for (var i = 0; i < val.operands.length; i++) {\n      if (MIST.hasLoop(val.operands[i], seen)) {\n        return true;\n      } // if\n    } // for\n    seen.pop(val);\n  }\n  return false;\n} // MIST.hasLoop\n\n/**\n * Determine if an object is a MIST expression.\n */\nMIST.isExp = function(val)\n{\n  return ((val instanceof MIST.Val) || (val instanceof MIST.App));\n}; // MIST.isExp\n\n/**\n * Determine if an object is a MIST function.\n */\nMIST.isFun = function(val)\n{\n  return (val instanceof MIST.Fun);\n}; // MIST.isFun\n\n/**\n * Rebuild one of the MIST objects from JSON (or parsed JSON).\n */\nMIST.rebuild = function(obj) {\n  // If we start with a string, we assume it's JSON.\n  if (typeof(obj) === \"string\") {\n    try {\n      return MIST.rebuild(JSON.parse(obj));\n    } // try\n    catch (err) {\n      return obj;\n    } // catch\n  } // if it's a string\n\n  // Handle the standard MIST. objects\n  else if (obj.class === \"MIST.Val\") {\n    return new MIST.Val(obj.name);\n  }\n  else if (obj.class === \"MIST.App\") {\n    var operands = Array(obj.operands.length);\n    for (var i = 0; i < obj.operands.length; i++) {\n      operands[i] = MIST.rebuild(obj.operands[i]);\n    } // for\n    return new MIST.App(obj.operation, operands);\n  }\n  else if (obj.class === \"MIST.Fun\") {\n    return new MIST.Fun(obj.parameters, MIST.rebuild(obj.body));\n  }\n\n  // Handle everything else\n  return obj;\n} // MIST.rebuild\n\n/**\n * Determine if two expressions are the same\n */\nMIST.sameExp = function(a,b,checkedLoops)\n{\n  // We'll assume that expressions with loops are different.  (We can\n  // probably get partial similarity, but I'm pretty sure that the\n  // Halting Problem suggests that I can't determine equality of\n  // arbitrary loops, so I might as well not try.)\n  if (!checkedLoops && (MIST.hasLoop(a) || MIST.hasLoop(b)))\n    return false;\n\n  // Two values are the same if the have the same name\n  if ((a instanceof MIST.Val) && (b instanceof MIST.Val)) {\n    return a.name === b.name;\n  } // two values\n\n  // Two expressions are the same if they have the same operations\n  // and the same operands.\n  if ((a instanceof MIST.App) && (b instanceof MIST.App)) {\n    if (a.operation !== b.operation) {\n      return false;\n    } // different operations\n    if (a.operands.length !== b.operands.length) {\n      return false;\n    } // different numbers of operands\n    for (var i = 0; i < a.operands.length; i++) {\n      if (!MIST.sameExp(a.operands[i], b.operands[i], true)) {\n        return false;\n      } // if the operands are different\n    } // for\n    // The operators and operands are the same.  They must be the same.\n    return true;\n  } // two expressions\n\n  // Anything else is different\n  return false;\n} // MIST.sameExp\n\n/**\n * Validate an expression:\n *   * Make sure that all of the parameters are of appropriate types.\n *   * Make sure that all of the functions are in the context or are\n *     standard functions.\n *   * Identify the type of the expression.\n *   * Identify whether or not the expression is animated.\n */\n\n/*\nMIST.validate = function(name, exp, context) {\n  // Validate all of the expressions in the context\n\n  // We'll assume that expressions that already have a type are\n  // already validated.  (Trust your client?)\n  if (exp.type && (exp.animated != undefined))\n    return;\n\n  // Case 1: Applications\n  if (exp instanceof MIST.App) {\n    var opInfo = context[exp.operator] ||\n         MIST.builtins.functions[exp.operator];\n\n    // Make sure that the operator is defined.\n    if (!opInfo) {\n      throw name + \" includes unknown operation \" + exp.operation;\n    } // if the function is not defined\n\n    // Validate all of the children.  Doing so should also set the\n    // type and animated fields of the children.\n    for (var i = 0; i < exp.operands.length; i++) {\n      MIST.validate(name, exp.operands[i], context);\n    } // for\n\n    // Determine whether or not it's animated\n    exp.animated = false;\n    for (var i = 0; i < exp.operands.length; i++) {\n      exp.animated = exp.animated || exp.operands[i].animated;\n    } // for\n\n    // For RGB functions, make sure that all parameters are numbers.\n    if (opInfo.type === \"RGB\") {\n      exp.type = MIST.TYPE.RGB;\n      for (var i = 0; i < exp.operands.length; i++) {\n        if (exp.operands[i].type != MIST.TYPE.NUMBER) {\n          throw name \": RGB function \" + opInfo.name +\n              \" applied to non-numeric value (\" +\n              exp.operands[i].toString() + \")\";\n        } // if an operand is not a number\n      } // for\n    } // if it's an RGB function\n\n    else if (opInfo.type === \"HSV\") {\n    } // if it's an HSV function\n\n    else if (opInfo.type === \"GENERAL\") {\n      for (var i = 0; i < exp.operands.length; i++) {\n      } // for\n    } // if it's a general function\n    else {\n      throw name + \" includes unsupported operation \" + exp.operation;\n    }\n  } // if it's an application\n\n  else if (exp instanceof MIST.Val) {\n  } // if it's a value\n  else {\n    throw \"Could not validate \" + name + \" (\" + exp + \")\";\n  } // if it's neither an application nor a value\n} // MIST.validate\n*/\n\n// +-----------------+-----------------------------------------------\n// | Class: MIST.App |\n// +-----------------+\n\n/**\n * The application of an operation to zero or more operands.\n */\nMIST.App = function(operation) {\n  this.class = \"MIST.App\";\n  this.operation = operation;\n  //console.log(\"MIST.App called getArgs with arguments... \");\n  /*for(var i=0; i<arguments.length;i++) {\n    console.log(arguments[i]);\n  }*/\n  this.operands = getArgs(arguments,1);\n\n  // Validate the operands\n  for (var i = 0; i < this.operands.length; i++) {\n    if (!MIST.isExp(this.operands[i])) {\n      console.log(this.operands);\n      console.log( \"Subexpression \" + i +  \"is invalid: \" + this.operands[i]);\n    } // if\n  } // for\n\n  // Build the code for this expression\n  if (this.operands.length === 0)\n    this.code = this.operation + \"()\";\n  else\n    this.code = this.operation + \"(\" + this.operands.join(\",\") + \")\";\n} // MIST.App\n\n/**\n * Convert the application to a string.\n */\nMIST.App.prototype.toString = function() {\n  return this.code;\n};\n\n/**\n * Print the application, with all but the first line indented by\n * indent and with the last line followed by suffix.\n */\nMIST.App.prototype.prettyPrint = function(indent,suffix) {\n  if (!indent) { indent = \"\"; }\n  if (!suffix) { suffix = \"\\n\"; }\n  var arity = this.operands.length;\n  var newindent = indent + nspaces(this.operation.length+1);\n\n  // If there are no operands\n  if (arity === 0) {\n    return this.operation + \"()\" + suffix;\n  } // if there are no operands\n\n  // If there's only one operand\n  else if (arity === 1) {\n    return this.operation + \"(\" + this.operands[0].prettyPrint(newindent, \")\"+suffix);\n  } // if there's only one operand\n\n  // If there are more than one operand\n  else {\n    var result = this.operation + \"(\";\n    result += this.operands[0].prettyPrint(newindent, \",\\n\");\n    for (var i = 1; i < arity-1; i++) {\n      result += newindent + this.operands[i].prettyPrint(newindent, \",\\n\");\n    } // for\n    result += newindent + this.operands[arity-1].prettyPrint(newindent, \")\" + suffix);\n    return result;\n  } // has operands\n}; // MIST.App.prettyPrint\n\n\n// +-----------------+-----------------------------------------------\n// | Class: MIST.Fun |\n// +-----------------+\n\n/**\n * MIST functions are expressions that have parameters.\n */\nMIST.Fun = function(parameters, body)\n{\n  this.class = \"MIST.Fun\";\n  // Note: Need to validate inputs.\n  this.parameters = parameters;\n  this.body = body;\n\n  // Build the code for this function.\n  this.code = \"(function \"\n            + \"(\" + this.parameters.join(\",\") + \") \"\n            + \"{ return \" + this.body.toString() + \"})\";\n\n} // MIST.Fun\n\n/**\n * Convert to a string.\n */\nMIST.Fun.prototype.toString = function() {\n  return this.code;\n} // toString\n\n/**\n * Pretty print.\n */\nMIST.Fun.prototype.prettyPrint = function (indent) {\n  return this.body.prettyPrint(indent);\n};\n\n/**\n * Convert to an executable Javascript function.\n */\nMIST.Fun.prototype.toFunction = function() {\n  var code = \"var \" + this.name  + \" = \" + this.toString();\n  eval(code);\n  return eval(this.name);\n};\n\n// +-----------------+-----------------------------------------------\n// | Class: MIST.Val |\n// +-----------------+\n\n/**\n * A basic value.  (Either a number of the name of something.)\n */\nMIST.Val = function(name) {\n  this.class = \"MIST.Val\";\n  if(name === 't.s'){\n    this.name = 'second'\n  } else if(name === 't.m') {\n    this.name = 'minute';\n  } else if(name === 't.d') {\n    this.name = 'day'\n  } else if(name === 't.h') {\n    this.name = 'hour'\n  } else {\n    this.name = name;\n  }\n  this.code = \"\" + name;\n} // MIST.Val\n\n/**\n * Convert to a string.\n */\nMIST.Val.prototype.toString = function() {\n  return this.code;\n}; // MIST.Val.prototype.toString\n\n/**\n * Print a value.\n */\nMIST.Val.prototype.prettyPrint = function(indent,suffix) {\n  if (!indent) { indent = \"\"; }\n  if (!suffix) { suffix = \"\\n\"; }\n  return this.name + suffix;\n}; // MIST.Val.prettyPrint\n\n// +-----------------------+-----------------------------------------\n// | Class: MIST.ImageGray |\n// +-----------------------+\n\n/**\n * Constructor:\n *   MIST.ImageGrey\n * Parameters:\n *   exp, a MIST. expression describing the image\n *   context, a bunch of hashes\n * Purpose:\n *   Create the description of a greyscale image.\n */\nMIST.ImageGrey = function(exp)\n{\n  this.exp = exp;\n  this.context = getArgs(arguments,1);\n} // MIST.ImageGrey\n\n// +------------------------+----------------------------------------\n// | Class: MIST.Collection |\n// +------------------------+\n\n/*\n  General collections of information.  Used primarily for storing\n  the builtin functions, the user functions, the builtin values,\n  and the user values.\n */\n\n/**\n * Constructor.\n */\nMIST.Collection = function(name, about) {\n  this.class = \"MIST.Collection\";\n  this.name = name;\n  if (!this.name) {\n    this.name = \"<Untitled>\";\n  }\n  this.about = about;\n  if (!this.about) {\n    this.about = \"\";\n  }\n  this.values = {};\n} // MIST.Collection\n\n/**\n * Get all of the keys.\n */\nMIST.Collection.prototype.keys = function() {\n  return Object.keys(this.values);\n} // MIST.Collection.prototype.keys\n\n/**\n * Clear the contents of the collection.\n */\nMIST.Collection.prototype.clear = function() {\n  this.values = {};\n} // MIST.Collection.prototype.clear\n\n/**\n * Add an object, which we will then index by name (we assume that all\n * objects have a .name field).\n *\n * If there's a .display field, also index the object by that value\n */\nMIST.Collection.prototype.add = function(obj) {\n  this.values[obj.name] = obj;\n  if (obj.display) {\n    this.values[obj.display] = obj;\n  }\n} // MIST.Collection.prototype.add\n\n/**\n * Look up an object.\n */\nMIST.Collection.prototype.get = function(name) {\n  return this.values[name];\n} // MIST.Collection.prototype.get\n\n/**\n * Add a user function.\n */\nMIST.Collection.prototype.addUserFun = function(name,display,about,params,code) {\n  var numParams = 0;\n  if (params) {\n    numParams = params.split(\",\").length;\n  }\n  this.add(new MIST.FunInfo(name,display,about,params,\n      {type:\"GENERAL\", minarity:numParams, maxArity:numParams, code:code}));\n};\n\n/**\n * Add a user value\n */\nMIST.Collection.prototype.addUserVal = function(name,display,about,code) {\n  this.add(new MIST.ValInfo(name,display,about,code));\n}; // addUserVal\n\n/**\n * Add a builtin function.\n */\nMIST.Collection.prototype.addBuiltinFun = function(name,display,about,params,minarity,maxarity,type) {\n  this.add(new MIST.FunInfo(name, display, about, params,\n    {minarity:minarity, maxarity:maxarity, type:type}));\n} // addBuiltinFun\n\n// +-------------------+---------------------------------------------\n// | Value Information |\n// +-------------------+\n\nMIST.ValInfo = function(name, display, about, other) {\n  this.class = \"MIST.ValInfo\";\n  this.name = name;\n  this.display = display;\n  this.about = about;\n  for (var key in other) {\n    this[key] = other[key];\n  } // for\n} // MIST.ValInfo\n\n// +----------------------+------------------------------------------\n// | Function Information |\n// +----------------------+\n\n/**\n * A bit of information on the installed functions.\n */\nMIST.FunInfo = function(name, display, about, params, other) {\n  this.class = \"MIST.FunInfo\";\n  this.name = name;\n  this.display = display;\n  this.about = about;\n  this.params = params;\n  for (var key in other) {\n    this[key] = other[key];\n  } // for\n} // MIST.FunInfo\n\n// +---------+-------------------------------------------------------\n// | Parsing |\n// +---------+\n\n/**\n * Patterns for alphabetic and digit characters.\n */\nMIST.alpha = /[a-zA-Z]/;\nMIST.digit = /[0-9]/;\n\n/**\n * Token type.\n */\nMIST.tokens = Object.freeze({UNKNOWN:0, OPEN:1, CLOSE:2, COMMA:3,\n  ID:4, NUM:5, EOF:6});\n\n/**\n * A token: One of the basic building blocks.\n */\nMIST.Token = function(type,text,row,col)\n{\n  this.type = type;\n  this.text = text;\n  this.row = row;\n  this.col = col;\n} // MIST.Token\n\n/**\n * An object that lets us read input one character at a time.\n */\nMIST.Input = function(text)\n{\n  this.text = text;\n  this.pos = 0;\n  this.row = 1;\n  this.col = 1;\n  this.len = text.length;\n\n  // Determine if we're at the end of the input\n  this.eof = function() {\n    return this.pos >= this.len;\n  } // eof\n\n  // Peek at the next input character\n  this.peek = function() {\n    if (this.eof())\n      return undefined;\n    else\n      return this.text[this.pos];\n  }; // peek\n\n  // Get the next character\n  this.next = function() {\n    var c = this.peek();\n    if (c === undefined) {\n      return undefined;\n    }\n    else {\n      var result = new MIST.Token(MIST.tokens.UNKNOWN, c,\n          this.row, this.col);\n      ++this.pos;\n      ++this.col;\n      if (c === \"\\n\") {\n        ++this.row;\n        this.col = 1;\n      }\n      return result;\n    }\n  } // next()\n\n  // Skip over whitespace\n  this.skipWhitespace = function() {\n    var ws = /[ \\t\\n]/;\n    while (ws.test(this.peek())) {\n      this.next();\n    } // while\n  } // skipWhitespace\n} // MIST.Input\n\n/**\n * Throw a parse or tokenize error.\n */\nMIST.parseError = function(text, row, col) {\n  if (row) MIST.row = row;\n  if (col) MIST.col = col;\n  console.log( \"Error at line \" + MIST.row + \", column \" + MIST.col + \": \" + text);\n} // parseError\n\n/**\n * Tokenize a string.\n */\nMIST.tokenize = function(str) {\n  var tokens = [];\n  var input = new MIST.Input(str);\n  input.skipWhitespace();\n  while (!input.eof())\n    {\n      var ch = input.next();\n      if (ch.text === \"(\") {\n        ch.type = MIST.tokens.OPEN;\n        tokens.push(ch);\n      }\n      else if (ch.text === \")\") {\n        ch.type = MIST.tokens.CLOSE;\n        tokens.push(ch);\n      }\n      else if (ch.text === \",\") {\n        ch.type = MIST.tokens.COMMA;\n        tokens.push(ch);\n      }\n      else if (/[0-9-.]/.test(ch.text)) {\n        var num = ch.text;\n        var c;\n        var dot = (ch.text === \".\");\n        while ((c = input.peek()) &&\n            (/[0-9]/.test(c) || (!dot && (c === \".\")))) {\n          input.next();\n          num += c;\n          if (c === \".\") { dot = true; }\n        } // while\n        if (num === \"-\") {\n          MIST.parseError(\"Singleton negative signs not allowed.\",\n            ch.row, ch.col);\n        } // if we only saw a negative sign\n        ch.type = MIST.tokens.NUM;\n        ch.text = num;\n        tokens.push(ch);\n      }\n      else if (/[A-Za-z]/.test(ch.text)) {\n        //var col = ch.col;\n        //var row = ch.row;\n        var id = ch.text;\n        while ((c = input.peek()) && /[A-Za-z0-9.]/.test(c)) {\n          id += c;\n          input.next();\n        } // while\n        ch.type = MIST.tokens.ID;\n        ch.text = id;\n        tokens.push(ch);\n      } // if it's an id\n      else {\n        MIST.parseError(\"Invalid character (\" + ch.text + \")\", ch.row, ch.col);\n      } // else\n      input.skipWhitespace();\n    } // while\n  tokens.push(new MIST.Token(MIST.tokens.EOF, \"<eof>\", input.row, input.col));\n  return tokens;\n} // MIST.tokenize\n\n/**\n * Peek at the type of the next token.\n */\nvar peekType = function(tokens) {\n  if (!tokens[0])\n    return MIST.tokens.UNKNOWN;\n  else\n    return tokens[0].type;\n} // peekType\n\n/**\n * Create a regular expression for sanitizing MIST code.\n */\nMIST.createSanitizer = function() {\n  var resultingRE = \"\"\n  for(var i = 0; i<arguments.length-1;i++) {\n    resultingRE += \"(?:\"+arguments[i]+\")|\"\n  }\n  resultingRE += \"(?:\"+arguments[arguments.length - 1]+\")\"\n  var evaluated = new RegExp(resultingRE, \"g\");\n  return evaluated\n}\n\n/**\n * Sanitize MIST code.\n */\nMIST.sanitize = function(RE, string) {\n  var result = string.match(RE).join(\"\");\n  return result\n}\n\n/**\n * Parse MIST code into a MIST expression.\n */\nMIST.parse = function(str,prefix) {\n  if (!prefix) { prefix=\"\"; }\n\n  // The kernel.  Does the work, also recurses.\n  var kernel = function(tokens) {\n    // This should never happen, but let's be safe.\n    if (tokens.length === 0) {\n      MIST.parseError(\"Unexpected end of input\", 0, 0);\n    }\n\n    var tok = tokens.shift();\n\n    // Check for end of input\n    if (tok.type === MIST.tokens.EOF) {\n      MIST.parseError(\"Unexpected end of input\", tok.row, tok.col);\n    }\n\n    // Is it a number?\n    if (tok.type === MIST.tokens.NUM) {\n      return new MIST.Val(tok.text);\n    } // MIST.tokens.NUM\n\n    // Only identifiers and numbers are allowed at the top level.\n    else if (tok.type !== MIST.tokens.ID) {\n      MIST.parseError(\"Unexpected token (\" + tok.text + \")\", tok.row, tok.col);\n    } // if it's not an identifier\n\n    // Is it a function call?\n    else if (peekType(tokens) === MIST.tokens.OPEN) {\n      tokens.shift();\n      var children = [];\n      while (peekType(tokens) !== MIST.tokens.CLOSE) {\n        children.push(kernel(tokens));\n        if (peekType(tokens) === MIST.tokens.COMMA) {\n          tokens.shift();\n          if (peekType(tokens) === MIST.tokens.CLOSE) {\n            MIST.parseError(\"Close paren follows comma\", tokens[0].row, tokens[0].col);\n          } // if there's a close paren after a comma\n        } // if there's a comma\n      } // while\n      tokens.shift();\n      return new MIST.App(prefix + tok.text, children);\n    } // if it's a function call\n\n    // Otherwise, it's a singleton\n    else {\n      return new MIST.Val(tok.text);\n    } // if it's a singleton\n  }; // kernel\n\n  var tokens = MIST.tokenize(str);\n  var result = kernel(tokens);\n  if ((tokens.length > 1) || (peekType(tokens) !== MIST.tokens.EOF)) {\n    MIST.parseError(\"Extra text after expression\", tokens[0].row,\n      tokens[0].col);\n  }\n  return result;\n} // MIST.parse\n\n// +-------------------+---------------------------------------------\n// | Simulated Objects |\n// +-------------------+\n\n/**\n * A mouse for cases in which someone has not passed in the mouse.\n */\n// function SimulatedMouse()\n// {\n//   this.x = 0;\n//   this.y = 0;\n// } // SimulatedMouse()\n\n/**\n * A time for cases in which someone has not passed in the time.\n */\n// function SimulatedTime()\n// {\n//   this.s = 0;\n//   this.m = 0;\n//   this.h = 0;\n//   this.d = 0;\n//   this.y = 0;\n// } // SimulatedTime\n\n\nfunction gifTime()\n{\n  var temp = new Date();\n  this.ms = temp.getMilliseconds();\n  this.s = temp.getSeconds();\n  this.m = temp.getMinutes();\n  this.h = temp.getHours();\n  this.d = 0;\n  this.y = 0;\n} // gifTime\n\n\n// +-------------+---------------------------------------------------\n// | Quick Hacks |\n// +-------------+\n\n/**\n * Display a context.\n */\n// function displayContext(context)\n// {\n//   var args = getArgs(arguments);\n//   for (var i = 0; i < args.length; i++) {\n//     console.log(args[i]);\n//   } // for\n// } // displayContext\n\n/**\n * Evaluate an expression in an environment.  (Intended as a bit of an\n * experiment for what we're likely to do in the render function.)\n */\n// function evalExp(exp)\n// {\n//   var env = getArgs(arguments,1);\n//   for (var i = 0; i < env.length; i++)\n//     {\n//       var fun = env[i];\n//       console.log(fun);\n//       var code = fun.name + \" = \" + fun.toString();\n//       console.log(code);\n//       eval(code);\n//     }\n//   return eval(exp.toString());\n// } // evalExp\n\n/**\n * Test getArgs\n */\n// function testArgs()\n// {\n//   return getArgs(arguments, 1);\n// } // testArgs\n\n// +-----------------------+-----------------------------------------\n// | Interpreting MIST Code |\n// +-----------------------+\n\n/**\n * MISTbody2fun\n *   Given the body of something that uses \"raw\" MIST, return the\n *   corresponding function.  (Note that we will generally not\n *   use \"raw\" MIST, but it's helpful for testing.)\n */\n// function MISTbody2fun(body)\n// {\n//   return eval(\"(function (x,y,t,m) { return \" + body + \"})\");\n// } // MISTbody2fun\n\n/**\n * Convert a MIST expression to something that returns an RGB\n * list.  env is the 'environment' - a mapping of names to MIST\n * expressions\n */\nMIST.expToRGB = function(name,exp,env) {\n  var type = MIST.expType(exp, env);\n  var tmp = [];\n   // Contexts as objects\n  for (var c in env) {\n    //console.log(\"1008\");\n    tmp.push(\"var \" + c + \" = \" + env[c].toString());\n  }\n  var envCode = tmp.join(\";\");\n\n  // For RGB functions\n  //   function(x,y,t,m,p) {\n  //      var env0 = def0;\n  //      ...\n  //      return (exp).map(r2c);\n  //   };\n  if (type === MIST.TYPE.RGB) {\n    var code = \"(function(x,y,t,m,p) { \" + envCode +\n        \"; return (\" + exp.toString() + \").map(r2c); })\";\n    return eval(code);\n  }\n  // For B&W functions\n  //    function(x,y,t,m,p) {\n  //      var env0 = def0;\n  //      ...\n  //      var _tmp_ = r2c(-exp);\n  //      return [_tmp_, _tmp_, _tmp];\n  else if (type === MIST.TYPE.NUMBER) {\n     code = \"(function(x,y,t,m,p) { \" + envCode +\n        \"; var _tmp_ = r2c(-\" + exp.toString() +\n        \"); return [_tmp_, _tmp_, _tmp_]; })\";\n    return eval(code);\n  }\n  else {\n    throw \"Cannot handle expressions of type \" + type;\n  }\n} // MIST.expToRGB\n\n/*\n  Some HSV notes for expToRGB\n        h = r2h(cap(hfun(x,y,time,mouse)));\n        s = r2sv(cap(sfun(x,y,time,mouse)));\n        v = r2sv(cap(vfun(x,y,time,mouse)));\n\n        var rgb = [];\n        rgb = hsv2rgb(h, s, v);\n */\n\n// +---------------------+-------------------------------------------\n// | Comparing Functions |\n// +---------------------+\n\n/**\n * Maximum 'distance' for two components to be considered the same.\n * Remember that components have values in the range 0..255\n */\nMIST.COMPONENT_EPSILON = 10;\n\n/**\n * Percentage of pixels that must be similar for two functions to be\n * the same.\n */\nMIST.PERCENT_MATCH = 0.95;\n\n/**\n * Compare two functions, using their code.  Returns true\n * if they are similar and false if they are not.\n */\nMIST.compareFun = function(code1,code2) {\n  // Determine if we might have interactive images\n  var timed = (code1.indexOf(\"t.\") >= 0) || (code2.indexOf(\"t.\") >= 0);\n  var mouse = (code1.indexOf(\"m.\") >= 0) || (code2.indexOf(\"m.\") >= 0);\n\n  // Pick the right comparison to use\n  if (timed && mouse) {\n    return MIST.compareFunCore(code1,code2,17);\n  }\n  else if (timed) {\n    return MIST.compareFunCore(code1,code2,9);\n  }\n  else if (mouse) {\n    return MIST.compareFunCore(code1,code2,9);\n  }\n  else {\n    return MIST.compareFunCore(code1,code2);\n  }\n}; // MIST.compareFun\n\n/**\n * Repeatedly compare code for two functions.  (We take advantage of\n * randomness in compareFunOnce to handle different mice and times.)\n */\nMIST.compareFunCore = function(code1,code2,times) {\n  if (!times) { times = 1; }\n  var count = 0;\n  var sum = 0;\n  for (count = 0; count < times; count++) {\n    sum += MIST.compareFunOnce(code1,code2);\n  } // for\n  return (sum/count >= MIST.PERCENT_MATCH);\n} // compareFunCore\n\n/**\n * Compare two functions, using their code.  Returns the percentage of\n * pixels that are 'close enough'.  (See the constants above.)\n */\nMIST.compareFunOnce = function(code1,code2,time,mouse) {\n  // Are two compnents similar?\n  var similar = function(a,b) {\n    var result = Math.abs(a-b) <= MIST.COMPONENT_EPSILON;\n    // console.log(\"similar\",a,b,result);\n    return result;\n  }; // similar\n\n  // A random component\n  var rand = function() {\n    var result = 2*Math.random() - 1;\n    return result;\n  }; // rand\n\n  // Fill in the optional parameters\n  if (!time) {\n    time = { s: rand(), m:rand(), h:rand(), d:rand() };\n  }\n  if (!mouse) {\n    mouse = { x:rand(), y:rand(), X:rand(), Y:rand() };\n  }\n\n  // Parse the two pieces of code.\n  try {\n    var parsed1 = MIST.parse(code1);\n    var parsed2 = MIST.parse(code2);\n  } // try\n  catch (err) {\n    // If either fails to parse, we assume nothing is in common\n    return 0;\n  } // catch\n\n  // Convert the two pieces of code into functions\n  try {\n    var fun1 = MIST.expToRGB(\"f1\",parsed1,{});\n    var fun2 = MIST.expToRGB(\"f2\",parsed2,{});\n  } // try\n  catch (err) {\n    // If either fails to convert, we assume nothing is in common\n    return 0;\n  } // catch\n\n  // Set up counters\n  var pixels = 0;\n  var matches = 0;\n\n  // Iterate through positions\n  for (var x = -1; x <= 1; x += 0.1) {\n    for (var y = -1; y <= 1; y+= 0.1) {\n      var c1 = fun1(x, y, time, mouse);\n      var c2 = fun2(x, y, time, mouse);\n      pixels++;\n      if (similar(c1[0],c2[0]) && similar(c1[1],c2[1]) && similar(c1[2],c2[2])) {\n        matches++;\n      } // if\n    } // for y\n  } // for x\n\n  // Determine the percentage that match\n  return matches/pixels;\n} // compareFunOnce\n\n/**\n * Compare code for two functions that use the mouse (but not time).\n * DEPRECATED.  We use randomness instead.\n */\nMIST.compareFunMouse = function(code1,code2) {\n  var count = 0;        // The count of the number of tests we do.\n  var sum = 0;          // The sum of the percentages\n\n  for (var x = -1; x <= 1; x += 0.25) {\n    for (var y = -1; y <= 1; y += 0.25) {\n      count++;\n      sum += MIST.compareFunOnce(code1,code2,undefined,{x:x,y:y});\n    } // for y\n  } // for x\n\n  return (sum/count >= MIST.PERCENT_MATCH);\n} // compareFunMouse\n\n/**\n * Compare code for two functions that use the time (but not mouse)\n * DEPRECATED.  We use randomness instead.\n */\nMIST.compareFunTime = function(code1,code2) {\n  var count = 0;        // The count of the number of tests we do.\n  var sum = 0;          // The sum of the percentages\n\n  for (var m = -1; m <= 1; m += 0.25) {\n    for (var s = -1; s <= 1; s += 0.25) {\n      count++;\n      sum += MIST.compareFunOnce(code1,code2,{s:s,m:m,h:0,d:0});\n    } // for y\n  } // for x\n\n  return (sum/count >= MIST.PERCENT_MATCH);\n} // compareFunTime\n\n// +--------------------+--------------------------------------------\n// | Sample Expressions |\n// +--------------------+\n\n// var plus = function()\n//   {\n//     var result = 0;\n//     for (var i = 0; i < arguments.length; i++)\n//       result += arguments[i];\n//     return result;\n//   };\n\n//var exp0 = new MIST.Val(1);\n//var exp1 = new MIST.App(\"plus\", new MIST.Val(\"x\"), new MIST.Val(\"y\"));\n//var exp1a = new MIST.App(\"plus\", new MIST.Val(\"x\"), new MIST.Val(\"y\"));\n//var exp2 = new MIST.App(\"times\", exp0, exp1, exp1)\n//var exp3 = new MIST.Val(\"x\");\n\n//var fun0 = new MIST.Fun([], exp0);\n\n// var fun1 = new MIST.Fun([\"i\"],\n//                        new MIST.App(\"plus\",\n//                                    new MIST.Val(3),\n//                                    new MIST.Val(\"i\")));\n\n// var fun2 = new MIST.Fun([\"i\"],\n//                        new MIST.App(\"plus\",\n//                                     new MIST.Val(\"x\"),\n//                                     new MIST.Val(\"i\")));\n\n// var pp = function(str) {\n//   console.log(MIST.parse(str).prettyPrint());\n// }\n/**\n * mist-builtin-functions.js\n *   The collection of builtin functions\n */\n\n// +-------+---------------------------------------------------------\n// | Setup |\n// +-------+\n\n//try { MIST; } catch (err) { MIST = {}; }\nif (!MIST.builtins) { MIST.builtins = {}; }\n\n// +----------------------+------------------------------------------\n// | Function Information |\n// +----------------------+\n\nMIST.builtins.functions = new MIST.Collection();\n\n// I'd like to be able to write \n//   BUILTIN = MIST.builtins.functions.addBuiltinFun\n// But that seems to be illegal.\nfunction BUILTIN() {\n  MIST.builtins.functions.addBuiltinFun.apply(MIST.builtins.functions, \n    arguments);\n}\n\n// +-----------+-----------------------------------------------------\n// | Utilities |\n// +-----------+\n\n\n/**\n * Restrict a value to a particular range.\n */\n// function cap(val)\n// {\n//   return Math.max(-1, Math.min(1, val));\n// } // cap\n\n/**\n * Wrap around\n */\nfunction wrap(val)\n{\n  if (val < -1)\n    return wrap (val + 2);\n  else if (val > 1)\n    return wrap (val - 2);\n  else\n    return val;\n} // wrap\nMIST.wrap = wrap;\n \n// +-------------------+---------------------------------------------\n// | Builtin Functions |\n// +-------------------+\n\nvar abs = function(i) {\n  return Math.abs(i);\n}; // abs\nMIST.abs = abs;\nBUILTIN(\"abs\", \"abs\", \"The absolute value of i\", \"i\", \n  1, 1, \"GENERAL\");\n\nvar average = function(a) {\n  return sum.apply(this, arguments)/arguments.length;\n}; // average\n//var avg = average;\nMIST.avg = average;\nMIST.average = average;\nBUILTIN(\"average\", \"avg\", \"Average 2 or more values\", \"...\",\n  2, 20, \"GENERAL\");\n   \nvar cosine = function(a) {\n  return Math.cos(Math.PI * a);\n}; // cosine\n//var cos = cosine;\nMIST.cos = cosine;\nMIST.cosine = cosine;\nBUILTIN(\"cosine\", \"cos\", \"The cosine of pi*a\", \"a\",\n  1, 1, \"GENERAL\");\n\nvar multiply = function() {\n  var product = 1;\n  for (var i = 0; i < arguments.length; i++) {\n    product *= arguments[i];\n  }\n  return product;\n}; // multiply\n//var mult = multiply;\nMIST.mult = multiply;\nMIST.multiply = multiply;\nBUILTIN(\"multiply\", \"mult\", \"Multiply 2 or more values\", \"...\",\n  2, 20, \"GENERAL\");\n\nvar negate = function(value)\n{\n return -value;\n};\n//var neg = negate;\nMIST.negate = negate;\nMIST.neg = negate;\nBUILTIN(\"negate\", \"neg\", \"negates value\");\n\nvar rgb = function(r,g,b) {\n  return [r,g,b];\n}; // rgb\nMIST.rgb = rgb;\nBUILTIN(\"rgb\", \"rgb\", \"Generate an RGB color from red, green, and blue components\", \"r,g,b\", 3, 3, \"RGB\");\n\nvar sign = function(range) {\n  if (range < 0) \n    return -1;\n  else \n    return 1;\n}; \nMIST.sign = sign;\nBUILTIN(\"sign\", \"sign\", \n  \"If i < 0, returns -1; if i >- 0, returns 1\", \"i\", 1, 1, \"GENERAL\");\n\nvar signz = function(range)\n{\n  if (range < 0) \n    return -1;\n  else if (range > 0)\n    return 1;\n  else\n    return range;\n}; \nMIST.signz = signz;\nBUILTIN(\"signz\", \"signz\", \n  \"If i < 0, returns -1; if i > 0, returns 1; if i is 0, returns 1.\",\n  \"i\", 1, 1, \"GENERAL\");\n\nvar sine = function(a) {\n    return Math.sin(Math.PI * a);\n};\n//var sin = sine;\nMIST.sine = sine;\nMIST.sin = sine;\nBUILTIN(\"sine\", \"sin\", \"The sine of pi*a\", \"a\",\n  1, 1, \"GENERAL\");\n\n// var square = function(i) {\n//   return i*i;\n// } // square\nBUILTIN(\"square\", \"square\", \"Square i\", \"i\", 1, 1, \"GENERAL\");\n\nvar sum = function() {\n  var sum = 0;\n  for (var i = 0; i < arguments.length; i++) {\n    sum += arguments[i];\n  } \n  return sum;\n}; // sum\nMIST.sum = sum;\nBUILTIN(\"sum\", \"sum\", \"Sum 2 or more values.  If the sum would exceed 1, has the value 1.  If the sum would be less than -1, has the value -1\", \"...\", 2, 20, \"GENERAL\");\n\nvar wrapsum = function() {\n    return wrap(sum.apply(this, arguments));\n};\n//var wsum = wrapsum;\nMIST.wrapsum = wrapsum;\nMIST.wsum = wrapsum;\nBUILTIN(\"wrapsum\", \"wsum\", \"Sum 2 or more values, wrapping around from 1 to -1 (or vice versa) if the sum is too large or too small\", \"...\", 2, 20, \"GENERAL\");\n\n// var mistif = function(test, pos, neg) {\n//   if (test >= 0) \n//     return pos;\n//   else\n//     return neg;\n// };\nBUILTIN(\"mistif\", \"if\", \"if test is greater than or equal to zero, return pos, if test is less than zero, return neg\", \"test, pos, neg\", 3, 3, \"GENERAL\");/**\n * mist-layout.js\n *   Information on the layout of a MIST editing session.\n */\n\n// +-------+-----------------------------------------------------------\n// | Notes |\n// +-------+\n\n/*\n   1. Layouts allow you to add values (addVal), add operations (addOp),\n      and add edges (addEdge).\n\n   2. You can then display a layout using MIST.displayLayout.  (I made\n      it a separate function to ease dealing with JSON.)\n\n   3. You can store a layout in a database by converting it to a string\n      with JSON.stringify.  When you retrieve it, you can either display\n      it with MIST.displayLayout or (probably better) convert it back\n      to a real MIST.Layout with MIST.rebuildLayout.\n\n   4. In rebuilding layouts from JSON, I'm preserving the ids of nodes.\n      Is that neccessary?  I could also set up a hash that maps old\n      ids to new ids.  Note that I've had to extend addOp and addVal\n      to take in a specified id.\n\n   5. There's a lot of similarlity between MIST.displayLayout and\n      MIST.rebuildLayout.  Over the longer term, I should figure out \n      how to rewrite MIST.rebuildLayout in terms of MIST.displayLayout.\n */\n\n// +-------+-----------------------------------------------------------\n// | Setup |\n// +-------+\n\ntry { MIST = MIST; } catch (err) { MIST = Object.create(null); }\n\n// +--------+----------------------------------------------------------\n// | Layout |\n// +--------+\n\nMIST.Layout = function()\n{\n  // +--------+------------------------------------------------------\n  // | Fields |\n  // +--------+\n\n  this.class = \"MIST.Layout\";\n\n  // For convenience, we number things starting at 1000\n  this.num = 1000;\n\n  // All of the operation nodes\n  this.operations = {};\n\n  // All of the value nodes\n  this.values = {};\n\n  // All of the edges\n  this.edges = [];\n\n  // +----------+----------------------------------------------------\n  // | Mutators |\n  // +----------+\n\n  /**\n   * Add an edge from source to the ith input of sink.\n   */\n  this.addEdge = function(source, sink, i)\n  {\n    this.edges.push({ source:source, sink:sink, i:i });\n  }; // addEdge\n\n  /**\n   * Add a new function node at (x,y).  Returns an identifier that you \n   * can use to refer to the node.\n   */\n  this.addOp = function(name, x, y, id)\n  {\n    if (!id) { id = \"F\" + this.num++; }\n    this.operations[id] = { id:id, name:name, x:x, y:y };\n    return id;\n  }; // addOp\n\n  /**\n   * Add a new value node at (x,y).  Returns an identifier that you can \n   * use to refer to the node.\n   */\n  this.addVal = function(name, x, y, id)\n  {\n    if (!id) { id = \"V\" + this.num++; }\n    this.values[id] = { id:id, name:name, x:x, y:y };\n    return id;\n  }; // addVal\n\n  // +-----------+---------------------------------------------------\n  // | Accessors |\n  // +-----------+\n\n  /**\n   * Get a function node.  \n   */\n  this.getFun = function(id) \n  {\n    return this.operations[id];\n  }; // getFun\n\n  /**\n   * Get a value node.\n   */\n  this.getVal = function(id)\n  {\n    return this.values[id];\n  }; // getVal\n} // MIST.Layout\n\n// +----------------------+------------------------------------------\n// | Additional Functions |\n// +----------------------+\n\n/**\n * Display a layout-like object (either a real Layout object or the\n * object without the functions as given by JSON.parse) using \n * display.addOp to display operations, display.addVal to display \n * values, and display.addEdge to display edges.\n */\nMIST.displayLayout = function(layout, display)\n{\n  var things = {};\n  console.log(display);\n  // Process all of the operations\n  for (var id in layout.operations) {\n    var op = layout.operations[id];\n    things[id] = display.pushFunctionNode(op.name, op.x, op.y);\n  } // for\n\n  // Process all of the values\n  for (id in layout.values) {\n    var val = layout.values[id];\n    things[id] = display.pushVariableNode(val.name, val.x, val.y);\n  } // for\n  \n  // Process all of the edges\n  for (var i = 0; i < layout.edges.length; i++) {\n    var edge = layout.edges[i];\n    var source = layout.operations[edge.source] || layout.values[edge.source];\n    if (!source) {\n      console.log( \"Invalid source in edge from \" + edge.source + \" to \" + edge.sink);\n    }\n    var sink = layout.operations[edge.sink];\n    if (!sink) {\n      console.log( \"Invalid sink in edge from \" + edge.source + \" to \" + edge.sink);\n    }\n    display.pushLine(things[source.id], things[sink.id], edge.i);\n  } // for\n}; // MIST.displayLayout\n\n/**\n * Rebuild a layout from a parsed (or unparsed) JSON string.\n */\nMIST.rebuildLayout = function(layout)\n{\n  if (typeof(layout) === \"string\")\n    return MIST.rebuildlayout(JSON.parse(layout));\n  \n  if (layout.class !== \"MIST.Layout\")\n    throw \"Error: Parameter is not a layout.\";\n\n  var result = new MIST.Layout();\n\n  MIST.displayLayout(layout, result);\n  return result;\n\n  // Add all of the operations\n  for (var id in layout.operations) {\n    var op = layout.operations[id];\n    result.addOp(op.name, op.x, op.y, op.id);\n  } // for\n\n  // Add all of the values\n  for (id in layout.values) {\n    var val = layout.values[id];\n    result.addVal(val.name, val.x, val.y, val.id);\n  } // for\n  \n  // Add all of the edges\n  for (var i = 0; i < layout.edges.length; i++) {\n    var edge = layout.edges[i];\n    result.addEdge(edge.source, edge.sink, edge.i);\n  } // for\n\n  // And we're done\n  return result;\n}; // rebuildLayout\n\n// +--------------------------+--------------------------------------\n// | Sample Display Functions |\n// +--------------------------+\n\n\nvar sampleDisplay = new Object();\n\nsampleDisplay.displayCount = 2000;\nsampleDisplay.addEdge = function(source,sink,i)\n{\n  console.log(\"Connect \" + source + \" to \" + sink + \"/\" + i);\n} // displayEdge\n\nsampleDisplay.addOp = function(op,x,y)\n{\n  var id = \"N\" + this.displayCount++;\n  console.log(id + \": OPERATION \" + op + \" at (\" + x + \",\" + y + \")\");\n  return id;\n} // displayOp\n\nsampleDisplay.addVal = function(op,x,y)\n{\n  var id = \"N\" + this.displayCount++;\n  console.log(id + \": VALUE \" + op + \" at (\" + x + \",\" + y + \")\");\n  return id;\n} \n\n// +---------------+-------------------------------------------------\n// | Sample Layout |\n// +---------------+\n\nvar sampleLayout = new MIST.Layout();\nvar add = sampleLayout.addOp(\"add\", 100, 100);\nvar x = sampleLayout.addVal(\"x\", 50, 50);\nvar y = sampleLayout.addVal(\"y\", 50, 150);\nvar tmp = sampleLayout.addOp(\"sine\", 150, 100);\nsampleLayout.addEdge(x, add, 0);\nsampleLayout.addEdge(y, add, 1);\nsampleLayout.addEdge(add, tmp, 0);\n/**\n * mist-functions-layout\n *   Instructions for laying out mist functions.\n */\n\n// +-------+-----------------------------------------------------------\n// | Setup |\n// +-------+\n\ntry { MIST = MIST; } catch (err) { MIST = new Object(); }\n\n// +----------+--------------------------------------------------------\n// | Settings |\n// +----------+\n\n/**\n * The horizontal offset between \"columns\".\n */\nMIST.hoff = 30;\n\n/**\n * The vertical offset between \"rows\".\n */\nMIST.voff = 20;\n\n// +-----------+-----------------------------------------------------\n// | Functions |\n// +-----------+\n\n/**\n * Make a basic layout for an expression.\n */\nMIST.basicLayout = function(exp)\n{\n  // Prepare a layout for the data\n  var layout = new MIST.Layout();\n  // Determine the depth of the expression\n  var depth = MIST.depth(exp);\n  // Set up an array to keep track of how many nodes there are at\n  // each level\n  var counts = [];\n  for (var i = 0; i <= depth; i++) {\n    counts[i] = 1;\n  } // for\n  // We're going to need to recurse through the tree, so set up a\n  // kernel to do so.  The kernel returns the id of the current\n  // expression\n  var kernel = function(exp,depth) {\n    if (exp instanceof MIST.Val) {\n      return layout.addVal(exp.name, \n                           MIST.hoff*depth, \n                           MIST.voff*(counts[depth]++));\n    } // if it's a value\n    else if (exp instanceof MIST.App) {\n      var id = layout.addVal(exp.operation, \n                             MIST.hoff*depth, \n                             MIST.voff*(counts[depth]++));\n      for (var i = 0; i < exp.operands.length; i++) {\n        var tmp = kernel(exp.operands[i], depth-1);\n        layout.addEdge(tmp, id, i);\n      } // for\n      return id;\n    } // if it's an application\n    else {\n      console.log( \"Invalid expression.\")\n    } // if it's anthing else\n  }; // kernel\n\n  // Run the kernel\n  kernel(exp,depth);\n} // MIST.baseLaout\n/**\n * mist-render.js\n *   A library for rendering MIST functions.\n */\n\n// +-------+---------------------------------------------------------\n// | Setup |\n// +-------+\n\n//try { MIST; } catch (err) { MIST = {}; }\n\n// +-----------+-----------------------------------------------------\n// | Utilities |\n// +-----------+\n\n/**\n * Convert a value in the range [-1 .. 1] to a hue.\n */\n// function r2h(r) {\n//   return 180 + r*180;\n// }\n\n/**\n * Convert a value in the range [-1 .. 1] to a saturation or value.\n */\n// function r2sv(r) {\n//   return .5 + r*.5;\n// }\n\n/**\n * Converts hsv values to rgb values.\n */\n// function hsv2rgb(h, s, v) {\n//   var rgb = [];\n//   if (s === 0)\n//       rgb = [v, v, v];\n//   else {\n//     var c = v * s;\n//     var h2 = h / 60;\n//     var x = c*( 1 - Math.abs((h2 % 2) - 1));\n//     if (h2 >= 5) {\n//       rgb = [c, 0, x];\n//     }\n//     else if (h2 >= 4) {\n//       rgb = [x, 0, c];\n//     }\n//     else if (h2 >= 3) {\n//       rgb = [0, x, c];\n//     }\n//     else if (h2 >= 2) {\n//       rgb = [0, c, x];\n//     }\n//     else if (h2 >= 1) {\n//       rgb = [x, c, 0];\n//     }\n//     else {\n//       rgb = [c, x, 0];\n//     }\n//   } // if (s != 0)\n\n//   var m = v - c;\n//   rgb[0] = r2c (rgb[0] + m);\n//   rgb[1] = r2c (rgb[1] + m);\n//   rgb[2] = r2c (rgb[2] + m);\n//   return rgb;\n// }\n\n/**\n * Convert a value in the range [-1 .. 1] to a component.\n */\n// function r2c(r)\n// {\n//   return 127.5 + r*127.5;\n// } // r2c\n\n/**\n * Convert a component to a value in the range [-1 .. 1].\n */\n// function c2r(c)\n// {\n//   return (c/127.5) - 1.0;\n// } // c2r\n\n\n// +-------------------+---------------------------------------------\n// | Mouse Information |\n// +-------------------+\n\n/*\n  Note: Rather than having mouse listeners here, we expect the GUI\n  to keep us updated on where the mouse is and where it was last\n  clicked.\n */\n\nMIST.mouseX = 0;\nMIST.mouseY = 0;\nMIST.clickX = 0;\nMIST.clickY = 0;\n\nfunction setMouse(x, y)\n{\n  MIST.mouseX = x;\n  MIST.mouseY = y;\n} // setMouse\n\nfunction setClick(x, y)\n{\n  MIST.clickX = x;\n  MIST.clickY = y;\n} // setClick\n\n// +---------+-------------------------------------------------------\n// | Objects |\n// +---------+\n\n/**\n * Simple representations of time using the range model (everything\n * is in the range [-1 .. 1]).\n */\n// function Time(sec,min)\n// {\n//   this.s = sec;\n//   this.m = min;\n// }  // Time(sec,min)\n\n/**\n * Information on where the mouse is/was\n */\n// function Mouse(x, y, cx, cy)\n// {\n//   this.x = x;\n//   this.y = y;\n//   this.X = cx;\n//   this.Y = cy;\n// } // Mouse\n\n// +---------------------+-------------------------------------------\n// | Simulated Renderers |\n// +---------------------+\n\n/**\n * Render an expression on the specified region of the canvas.\n * (If no region is specified, uses the whole canvas.)\n */\n\n\nMIST.render = function(exp, context, canvas, renderWidth, renderHeight,\n    imgLeft, imgTop, imgWidth, imgHeight) {\n  // Get the time.\n  var d = new Date();\n \n\n var t = {\n    s: d.getMilliseconds()/500 - 1,\n    m: (d.getSeconds()*1000 + d.getMilliseconds())/30000 - 1,\n    h: (d.getMinutes()*60 + d.getSeconds())/1800 - 1,\n    d: (d.getHours()*60 + d.getMinutes())/720 - 1\n  }; \n\n  // Use the core function\n  MIST.renderAt(t, exp, context, canvas, renderWidth, renderHeight,\n      imgLeft, imgTop, imgWidth, imgHeight);\n  // Return the time (for use elsewhere)\n  return t;\n} // MIST.render\n\nMIST.renderGIF = function(d, exp, context, canvas, renderWidth, renderHeight, \n    imgLeft, imgTop, imgWidth, imgHeight) {\n\n  var t = {\n    s: d.ms / 500 - 1,\n    m: ( d.s * 1000 + d.ms)/30000 - 1,\n    h: ( d.m * 60 + d.s)/1800 - 1,\n    d: ( d.h * 60 + d.m)/720 - 1\n  };\n\n  // Use the core function\n  MIST.renderAt(t, exp, context, canvas, renderWidth, renderHeight,\n      imgLeft, imgTop, imgWidth, imgHeight);\n  // Return the time (for use elsewhere)\n  return t;\n} // MIST.renderGIF\n    \n\n\n\n/**\n * Render an expression at a particular time.\n */\nMIST.renderAt = function(t, exp, context, canvas, \n    renderWidth, renderHeight, imgLeft, imgTop, imgWidth, imgHeight) {\n  // Make sure that we have bounds.\n  if (!imgLeft) { imgLeft = 0; }\n  if (!imgTop) { imgTop = 0; }\n  if (!imgWidth) { imgWidth = canvas.width - imgLeft; }\n  if (!imgHeight) { imgHeight = canvas.height - imgTop; }\n  if (!renderWidth) { renderWidth = imgWidth; }\n  if (!renderHeight) { renderHeight = imgHeight; }\n  if (renderWidth > imgWidth) { renderWidth = imgWidth; }\n  if (renderHeight > imgHeight) { renderHeight = imgHeight; }\n\n  // Make sure that the rendering width and height are whole numbers\n  renderWidth = Math.round(renderWidth);\n  renderHeight = Math.round(renderHeight);\n\n  // Grab the canvas buffer.\n  var buffer = document.getElementById(\"canvas-buffer\");\n  if (!buffer ) {\n    buffer = document.createElement(\"canvas\");\n    buffer.id = \"canvas-buffer\";\n    buffer.style.display = \"none\";\n    document.body.appendChild(buffer);\n  } // if (!buffer)\n  buffer.width = renderWidth;\n  buffer.height = renderHeight;\n\n  // Determine scale factors\n  // var hscale = imgWidth/renderWidth;\n  // var vscale = imgHeight/renderHeight;\n\n  // Set up how much we change x and y each time.\n  var deltaX = 2.0/renderWidth;\n  var deltaY = 2.0/renderHeight;\n\n  // Get contexts for both canvases\n  var canvasContext = canvas.getContext(\"2d\");\n  var bufferContext = buffer.getContext(\"2d\");\n\n  //console.log(\"canvasContext: \"+canvasContext);\n\n  // Set up the image data\n  var region = bufferContext.createImageData(renderWidth,renderHeight);\n  // Set up the mouse (we don't want it changing while rendering).\n  var m = {\n    x: MIST.mouseX,\n    y: MIST.mouseY,\n    X: MIST.clickX,\n    Y: MIST.clickY\n  };\n\n  // Build the function\n  var fun = MIST.expToRGB(\"untitled image\", exp, context);\n  //console.log(\"1959\");\n  // Set up our main variables\n  var x = -1;\n  var y = -1 - deltaY;\n  // Loop through all of the pixels\n  for (var i = 0; i < region.data.length; i+= 4)\n    {\n      /*if(i%16===0) {\n        console.log(\"i:\"+i);\n      }*/\n      // When we reach the end of the row, move on to the next row\n      if ((i % (4*renderWidth)) === 0)\n        { \n          x = -1;\n          y += deltaY;\n        } // if (i % (4*imgWidth)) === 0\n\n      // Evaluate the function\n      var rgb = fun(x,y,t,m);\n\n      // Exploration\n      // if (i < 4*imgWidth) { console.log(\"i\",i, \"x\",x, \"y\",y, \"rgb\",rgb); }\n \n      // Copy the pixels\n      region.data[i+0] = rgb[0];\n      region.data[i+1] = rgb[1];\n      region.data[i+2] = rgb[2];\n      region.data[i+3] = 255;\n \n      // And advance to the next pixel\n      x += deltaX;\n    } // for\n\n  // Random computations\n  // var renderLeft = imgLeft*renderWidth/imgWidth;\n  // var renderTop = imgTop*renderHeight/imgHeight;\n\n  // Draw and scale\n  bufferContext.putImageData(region, 0, 0);\n  canvasContext.drawImage(buffer, imgLeft, imgTop, imgWidth, imgHeight);\n  //canvasContext.fillStyle = \"rgb(200, 0, 0)\";\n  //canvasContext.fillRect (10,10,75,50);\n\n//return t;\n\n} // MIST.renderAt\n\n/**\n * mist-utils.js\n *   A few assorted utilities for MIST and other applications.\n *\n * api(action,params,callback)\n *   Call one of the API routines.\n * contains(array,val)\n *   Determine if an array contains a value\n * restore(obj)\n *   Restore the prototypes for an object using a .class field to\n *   identify the class.\n */\n\n/**\n * Call an API routine.  The callback takes two parameters: the response\n * and an optional error.\n */\n// function api(action,params,callback,method) {\n//   if (!callback) {\n//     callback = function(result,error) { return [result,error]; };\n//   }\n//   if (!method) {\n//     method = \"POST\";\n//   }\n//   var keys = Object.keys(params);\n//   var stuff = keys.map(function(k) { return k + \"=\" + params[k]});\n//   var data = \"action=\" + action + \"&\" + stuff.join(\"&\");\n//   console.log(data);\n//   var request = new XMLHttpRequest();\n//   // If we're supposed to post the request ...\n//   if (method === \"POST\") {\n//     request.open(\"POST\", \"/api\", false);\n//     request.setRequestHeader(\"Content-type\", \"application/x-www-form-urlencoded\");\n//     request.send(data);\n//   } // if POST\n//   // Otherwise, we can just use GET.\n//   else {\n//     request.open(\"GET\", \"/api?\" + data, false);\n//     request.send();\n//   } // if GET\n\n//   if (request.status != 200) {\n//     console.log(\"failed\", request.responseText);\n//     return callback(false, request.responseText);\n//   }\n//   else {\n//     console.log(\"succeeded\", request.responseText);\n//     return callback(request.responseText, false);\n//   }\n// } // api\n\n/**\n * Restore the prototypes in an object built from JSON.\n */\n// function restore(obj) {\n//   // We only work with objects.\n//   if (typeof(obj) != \"object\") {\n//     return;\n//   } // if it's an object\n\n//   // Set up the collection of objects to process\n//   var unprocessed = [obj];\n\n//   // Set up a collection of objects already processed\n//   var processed = [];\n\n//   // While unprocessed things remain\n//   while (unprocessed.length > 0) {\n//     // Grab the next value\n//     var val = unprocessed.pop();\n\n//     // Remember that we've processed it.\n//     processed.push(val);\n\n//     // If the object does not yet have a prototype, and it has a\n//     // class field, set the prototype using that field.\n//     if ((val.__proto__ == Object.prototype) && (val.class != undefined)) {\n//       try {\n//         val.__proto__ = eval(val.class + \".prototype\");\n//       } \n//       catch (err) {\n//         // Do nothing\n//       }\n//     } // if it needs a prototype\n\n//     // Recurse on the children\n//     for (var key in val) {\n//       var child = val[key];\n//       if ((typeof(child) === \"object\") && (!contains(unprocessed,child))\n//           && (!contains(processed,child))) {\n//         unprocessed.push(child);\n//       } // if it's a new object\n//     } // for each child\n//   } // while\n// } // restore(obj)\n\n// var Data = function() {\n\n//   this.class = \"Data\";\n//   this.layout = new MIST.Layout();\n  \n// }\n\nMIST.setMouse = setMouse;\nMIST.setClick = setClick;\n\nexport {MIST, gifTime, setMouse};\n//module.exports = MIST;"],"sourceRoot":""}